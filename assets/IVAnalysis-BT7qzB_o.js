import{j as e,B as V,x as se}from"./index-BVw2Pzxv.js";import{r as x,R as ne}from"./router-C0wDHNfv.js";import{u as ae}from"./usePageTitle-CpPgFbZv.js";import{P as X}from"./csv-B1Pu-2A6.js";import{C as R,a as L,b as F,c as _}from"./card-Dh7Q_ijz.js";import{f as S,b as M}from"./numberFormatting-BNPfGtWN.js";import{I as re}from"./info-icon-tooltip-2bLzUggJ.js";import{P as le,a as ie,C as oe,b as ce,c as de,d as ue,e as me,f as xe,g as he,h as fe}from"./popover-D1HvfGk3.js";import{R as Q,i as pe,C as q,X as J,Y as z,T as Z,L as ge,f as ke,g as B,d as ve}from"./charts-B8eVsusH.js";import{A as je,b as Ne}from"./alert-Cl0GEkAX.js";import{I as Ie}from"./info-CIZJMKHd.js";const be="https://raw.githubusercontent.com/datamilo/put-options-se/main/data/iv_per_stock_per_day.csv",Se="/data/iv_per_stock_per_day.csv";function P(t,l){if(l.length===0)return null;const r=Math.min(...l),u=Math.max(...l);return u===r?50:Math.round((t-r)/(u-r)*100)}const Ce=()=>{const[t,l]=x.useState([]),[r,u]=x.useState([]),[h,m]=x.useState(!0),[v,f]=x.useState(null);x.useEffect(()=>{(async()=>{try{m(!0),f(null);let s="";for(const a of[be,Se])try{const N=await fetch(a.includes("github")?`${a}?${Date.now()}`:a);if(N.ok){s=await N.text();break}}catch{}if(!s)throw new Error("Could not load IV data from GitHub or local source.");const i=X.parse(s,{header:!0,skipEmptyLines:!0,delimiter:"|"}).data.map(a=>{var N,b;return{Stock_Name:((N=a.Stock_Name)==null?void 0:N.trim())??"",Date:((b=a.Date)==null?void 0:b.trim())??"",Stock_Price:parseFloat(a.Stock_Price)||0,IV_30d:a.IV_30d&&a.IV_30d!==""&&a.IV_30d!=="nan"?parseFloat(a.IV_30d):null,N_Stocks:a.N_Stocks&&a.N_Stocks!==""&&a.N_Stocks!=="nan"?parseInt(a.N_Stocks,10):null,N_Excluded:a.N_Excluded&&a.N_Excluded!==""&&a.N_Excluded!=="nan"?parseInt(a.N_Excluded,10):null}}).filter(a=>a.Stock_Name&&a.Date),d=i.filter(a=>a.Stock_Name==="MARKET_IV"),g=i.filter(a=>a.Stock_Name!=="MARKET_IV");l(g),u(d.sort((a,N)=>a.Date.localeCompare(N.Date)))}catch(s){f(s instanceof Error?s.message:"Unknown error")}finally{m(!1)}})()},[]);const n=x.useMemo(()=>{const o=new Map;for(const s of t)o.has(s.Stock_Name)||o.set(s.Stock_Name,[]),o.get(s.Stock_Name).push(s);for(const s of o.values())s.sort((c,i)=>c.Date.localeCompare(i.Date));return o},[t]),p=x.useMemo(()=>{const o=[];for(const[s,c]of n.entries()){const i=c.filter(k=>k.IV_30d!==null);if(i.length===0){const k=c[c.length-1];o.push({stockName:s,latestDate:(k==null?void 0:k.Date)??"",currentIV:null,currentStockPrice:(k==null?void 0:k.Stock_Price)??0,ivRank52w:null,ivRankAllTime:null,ivChange1d:null,ivChange5d:null});continue}const d=i[i.length-1],g=d.IV_30d,a=d.Date,N=i.map(k=>k.IV_30d),b=P(g,N),C=new Date(a);C.setFullYear(C.getFullYear()-1);const T=C.toISOString().split("T")[0],H=i.filter(k=>k.Date>=T).map(k=>k.IV_30d),A=P(g,H),E=i.length>=2?i[i.length-2]:null,I=E?g-E.IV_30d:null,K=i.length>5?i[i.length-6]:null,te=K?g-K.IV_30d:null;o.push({stockName:s,latestDate:a,currentIV:g,currentStockPrice:d.Stock_Price,ivRank52w:A,ivRankAllTime:b,ivChange1d:I,ivChange5d:te})}return o},[n]),j=x.useMemo(()=>{const o=r.filter(I=>I.IV_30d!==null);if(o.length===0)return null;const s=o[o.length-1],c=s.IV_30d,i=s.Date,d=o.map(I=>I.IV_30d),g=P(c,d),a=new Date(i);a.setFullYear(a.getFullYear()-1);const N=a.toISOString().split("T")[0],b=o.filter(I=>I.Date>=N).map(I=>I.IV_30d),C=P(c,b),T=o.length>=2?o[o.length-2]:null,H=T?c-T.IV_30d:null,A=o.length>5?o[o.length-6]:null,E=A?c-A.IV_30d:null;return{latestDate:i,currentIV:c,ivRank52w:C,ivRankAllTime:g,ivChange1d:H,ivChange5d:E,nStocks:s.N_Stocks,nExcluded:s.N_Excluded}},[r]);return{rawData:t,dataByStock:n,stockSummaries:p,marketIVData:r,marketIVSummary:j,isLoading:h,error:v}};function Ve(t){return t===null?"":t>80?"text-red-600 dark:text-red-400 font-semibold":t<20?"text-green-600 dark:text-green-400 font-semibold":"text-muted-foreground"}function Y(t){return t===null?"":t>0?"text-red-600 dark:text-red-400":t<0?"text-green-600 dark:text-green-400":""}function ye(t){return t===null?"–":S(t*100,2)+"%"}function we(t){return t===null?"–":String(t)}function O(t){return t===null?"–":M(t*100,2)}const Re=({summaries:t,selectedStock:l,onSelectStock:r})=>{const[u,h]=x.useState("ivRank52w"),[m,v]=x.useState("desc"),[f,n]=x.useState("52w"),p=s=>{u===s?v(c=>c==="asc"?"desc":"asc"):(h(s),v("desc"))},j=x.useMemo(()=>[...t].sort((s,c)=>{let i=null,d=null;switch(u){case"stockName":i=s.stockName,d=c.stockName;break;case"currentIV":i=s.currentIV,d=c.currentIV;break;case"ivRank52w":i=s.ivRank52w,d=c.ivRank52w;break;case"ivRankAllTime":i=s.ivRankAllTime,d=c.ivRankAllTime;break;case"ivChange1d":i=s.ivChange1d,d=c.ivChange1d;break;case"ivChange5d":i=s.ivChange5d,d=c.ivChange5d;break;case"currentStockPrice":i=s.currentStockPrice,d=c.currentStockPrice;break}if(i===null&&d===null)return 0;if(i===null)return 1;if(d===null)return-1;const g=i<d?-1:i>d?1:0;return m==="asc"?g:-g}),[t,u,m]),o=({field:s,label:c,tooltip:i})=>e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:text-foreground select-none whitespace-nowrap",onClick:()=>p(s),"aria-sort":u===s?m==="asc"?"ascending":"descending":void 0,children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[c,u===s&&e.jsx("span",{children:m==="asc"?"↑":"↓"}),i&&e.jsx("span",{onClick:d=>d.stopPropagation(),children:e.jsx(re,{content:i,side:"bottom"})})]})});return e.jsxs(R,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsx(F,{className:"text-lg",children:"IV Screening"}),e.jsxs("div",{className:"flex items-center gap-1 border rounded-md p-0.5",children:[e.jsx(V,{size:"sm",variant:f==="52w"?"default":"ghost",className:"h-7 text-xs px-2",onClick:()=>n("52w"),children:"52 Weeks"}),e.jsx(V,{size:"sm",variant:f==="allTime"?"default":"ghost",className:"h-7 text-xs px-2",onClick:()=>n("allTime"),children:"Historical"})]})]})}),e.jsx(_,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b bg-muted/50",children:e.jsxs("tr",{children:[e.jsx(o,{field:"stockName",label:"Stock"}),e.jsx(o,{field:"currentIV",label:"Current IV"}),e.jsx(o,{field:f==="52w"?"ivRank52w":"ivRankAllTime",label:f==="52w"?"IV Rank 52w":"IV Rank Hist.",tooltip:f==="52w"?"Where today's IV sits within this stock's own 52-week range. 100 = IV at 52-week high (expensive options), 0 = IV at 52-week low (cheap options). Useful for comparing relative IV richness across stocks with different baseline volatility.":"Where today's IV sits within this stock's full historical range in the dataset. 100 = IV at all-time high, 0 = IV at all-time low."}),e.jsx(o,{field:"ivChange1d",label:"1-day Δ IV"}),e.jsx(o,{field:"ivChange5d",label:"5-day Δ IV"}),e.jsx(o,{field:"currentStockPrice",label:"Price"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:j.map(s=>{const c=f==="52w"?s.ivRank52w:s.ivRankAllTime,i=s.stockName===l;return e.jsxs("tr",{onClick:()=>r(s.stockName),className:`cursor-pointer hover:bg-muted/50 transition-colors ${i?"bg-primary/10":""}`,children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:s.stockName}),e.jsx("td",{className:"px-3 py-2 tabular-nums",children:ye(s.currentIV)}),e.jsx("td",{className:`px-3 py-2 tabular-nums ${Ve(c)}`,children:we(c)}),e.jsx("td",{className:`px-3 py-2 tabular-nums ${Y(s.ivChange1d)}`,children:O(s.ivChange1d)}),e.jsx("td",{className:`px-3 py-2 tabular-nums ${Y(s.ivChange5d)}`,children:O(s.ivChange5d)}),e.jsx("td",{className:"px-3 py-2 tabular-nums",children:S(s.currentStockPrice,2)})]},s.stockName)})})]})})})]})},_e="https://raw.githubusercontent.com/datamilo/put-options-se/main/data/Stock_Events_Volatility_Data.csv",De="/data/Stock_Events_Volatility_Data.csv";function Me(t){return{Kvartalsrapport:"Quarterly Report",Bokslutskommuniké:"Annual Report",Delårsrapport:"Interim Report"}[t==null?void 0:t.trim()]??(t==null?void 0:t.trim())??"Earnings"}let y=null,$=null;async function Te(){return y||$||($=(async()=>{for(const t of[_e,De])try{const l=await fetch(t.includes("github")?`${t}?${Date.now()}`:t);if(!l.ok)continue;const r=await l.text();return y=X.parse(r,{header:!0,skipEmptyLines:!0,delimiter:"|"}).data.filter(h=>h.date&&h.name),y}catch{}return y=[],y})(),$)}function Ae(t){const[l,r]=x.useState([]);return x.useEffect(()=>{Te().then(r)},[]),x.useMemo(()=>l.filter(u=>u.name.trim()===t).map(u=>({date:u.date.trim(),type:Me(u.type_of_event)})),[l,t])}function Ee(t,l){const r=new Date(t);return r.setMonth(r.getMonth()-l),r.toISOString().split("T")[0]}const Pe=t=>{if(!t.viewBox)return null;const{x:l,y:r,height:u}=t.viewBox,h=r+u-1;return e.jsx("polygon",{points:`${l},${h-7} ${l-4},${h} ${l+4},${h}`,fill:"#f59e0b",opacity:.85})},$e=({active:t,payload:l,label:r,earningsMap:u})=>{if(!t||!l||l.length===0)return null;const h=u==null?void 0:u.get(r);return e.jsxs("div",{className:"bg-background border rounded shadow-md p-2 text-xs space-y-1",children:[e.jsx("div",{className:"font-medium",children:r}),l.map(m=>e.jsx("div",{style:{color:m.color},children:m.name==="IV"?`IV: ${m.value!=null?S(m.value*100,2)+"%":"–"}`:`Price: ${m.value!=null?S(m.value,2):"–"}`},m.name)),h&&e.jsxs("div",{className:"text-amber-500 font-medium pt-0.5 border-t border-border",children:["▲ ",h.type]})]})},Le=({data:t,stockName:l})=>{const[r,u]=x.useState("1Y"),h=Ae(l),m=x.useMemo(()=>[...t].sort((s,c)=>s.Date.localeCompare(c.Date)),[t]),f=x.useMemo(()=>{if(r==="All"||m.length===0)return m;const s=m[m.length-1].Date,i=Ee(s,r==="3M"?3:r==="6M"?6:12);return m.filter(d=>d.Date>=i)},[m,r]).map(s=>({date:s.Date,iv:s.IV_30d,price:s.Stock_Price})),n=x.useMemo(()=>new Set(f.map(s=>s.date)),[f]),p=x.useMemo(()=>h.filter(s=>n.has(s.date)),[h,n]),j=x.useMemo(()=>new Map(p.map(s=>[s.date,s])),[p]),o=["3M","6M","1Y","All"];return e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-end gap-1",children:o.map(s=>e.jsx(V,{size:"sm",variant:r===s?"default":"outline",className:"h-7 text-xs px-2",onClick:()=>u(s),children:s},s))}),e.jsx(Q,{width:"100%",height:320,children:e.jsxs(pe,{data:f,margin:{top:5,right:20,left:10,bottom:5},children:[e.jsx(q,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(J,{dataKey:"date",tick:{fontSize:11},tickFormatter:s=>s.slice(0,7),minTickGap:40}),e.jsx(z,{yAxisId:"iv",orientation:"left",tick:{fontSize:11},tickFormatter:s=>`${Math.round(s*100)}%`,width:45}),e.jsx(z,{yAxisId:"price",orientation:"right",tick:{fontSize:11},tickFormatter:s=>S(s,0),width:60}),e.jsx(Z,{content:e.jsx($e,{earningsMap:j})}),e.jsx(ge,{}),p.map(s=>e.jsx(ke,{x:s.date,yAxisId:"iv",stroke:"#f59e0b",strokeDasharray:"3 3",strokeWidth:1,strokeOpacity:.7,label:e.jsx(Pe,{})},s.date)),e.jsx(B,{yAxisId:"iv",type:"monotone",dataKey:"iv",name:"IV",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1,connectNulls:!1}),e.jsx(B,{yAxisId:"price",type:"monotone",dataKey:"price",name:"Price",stroke:"hsl(var(--muted-foreground))",strokeWidth:1.5,dot:!1,connectNulls:!0})]})}),p.length>0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-amber-500",children:"▲"}),e.jsx("span",{children:"Earnings report"})]})]})};function D({label:t,value:l,colorClass:r}){return e.jsx(R,{children:e.jsxs(_,{className:"pt-4 pb-3 px-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:t}),e.jsx("div",{className:`text-xl font-semibold tabular-nums ${r??""}`,children:l})]})})}function U(t){return t===null?"":t>80?"text-red-600 dark:text-red-400":t<20?"text-green-600 dark:text-green-400":""}function W(t){return t===null?"":t>0?"text-red-600 dark:text-red-400":t<0?"text-green-600 dark:text-green-400":""}const ee=ne.forwardRef(({selectedStock:t,onSelectStock:l,stockNames:r,summaries:u,dataByStock:h},m)=>{const[v,f]=x.useState(!1),n=u.find(d=>d.stockName===t)??null,p=t?h.get(t)??[]:[],j=(n==null?void 0:n.currentIV)!=null?S(n.currentIV*100,2)+"%":"–",o=(n==null?void 0:n.ivRank52w)!=null?`${n.ivRank52w} / 100`:"–",s=(n==null?void 0:n.ivRankAllTime)!=null?`${n.ivRankAllTime} / 100`:"–",c=(n==null?void 0:n.ivChange1d)!=null?M(n.ivChange1d*100,2):"–",i=(n==null?void 0:n.ivChange5d)!=null?M(n.ivChange5d*100,2):"–";return e.jsxs("div",{ref:m,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Select stock:"}),e.jsxs(le,{open:v,onOpenChange:f,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(V,{variant:"outline",size:"sm",className:"w-48 justify-between",children:[t||"Select stock...",e.jsx(oe,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(ce,{className:"w-48 p-0",align:"start",children:e.jsxs(de,{children:[e.jsx(ue,{placeholder:"Search stock..."}),e.jsxs(me,{children:[e.jsx(xe,{children:"No stock found."}),e.jsx(he,{children:r.map(d=>e.jsxs(fe,{value:d,onSelect:()=>{l(d),f(!1)},children:[e.jsx(se,{className:`mr-2 h-4 w-4 ${t===d?"opacity-100":"opacity-0"}`}),d]},d))})]})]})})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:[e.jsx(D,{label:"Current IV",value:j}),e.jsx(D,{label:"IV Rank 52w",value:o,colorClass:U((n==null?void 0:n.ivRank52w)??null)}),e.jsx(D,{label:"IV Rank Historical",value:s,colorClass:U((n==null?void 0:n.ivRankAllTime)??null)}),e.jsx(D,{label:"1-day Δ IV",value:c,colorClass:W((n==null?void 0:n.ivChange1d)??null)}),e.jsx(D,{label:"5-day Δ IV",value:i,colorClass:W((n==null?void 0:n.ivChange5d)??null)})]}),e.jsxs(R,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs(F,{className:"text-base",children:[t," — IV & Price History"]})}),e.jsx(_,{children:p.length>0?e.jsx(Le,{data:p,stockName:t}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No data available."})})]})]})]})});ee.displayName="IVDetailSection";function w({label:t,value:l,colorClass:r}){return e.jsx(R,{children:e.jsxs(_,{className:"pt-4 pb-3 px-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:t}),e.jsx("div",{className:`text-xl font-semibold tabular-nums ${r??""}`,children:l})]})})}function Fe(t){return t===null?"":t>80?"text-red-600 dark:text-red-400":t<20?"text-green-600 dark:text-green-400":""}function G(t){return t===null?"":t>0?"text-red-600 dark:text-red-400":t<0?"text-green-600 dark:text-green-400":""}function He(t,l){const r=new Date(t);return r.setMonth(r.getMonth()-l),r.toISOString().split("T")[0]}const ze=({active:t,payload:l,label:r})=>!t||!l||l.length===0?null:e.jsxs("div",{className:"bg-background border rounded shadow-md p-2 text-xs space-y-1",children:[e.jsx("div",{className:"font-medium",children:r}),e.jsxs("div",{style:{color:l[0].color},children:["IV: ",l[0].value!=null?S(l[0].value*100,2)+"%":"–"]})]}),Be=({marketIVData:t,marketIVSummary:l})=>{const[r,u]=x.useState("1Y"),[h,m]=x.useState("52w"),f=x.useMemo(()=>{if(t.length===0)return[];if(r==="All")return t;const a=t[t.length-1].Date,b=He(a,r==="3M"?3:r==="6M"?6:12);return t.filter(C=>C.Date>=b)},[t,r]).map(a=>({date:a.Date,iv:a.IV_30d})),n=l,p=(n==null?void 0:n.currentIV)!=null?S(n.currentIV*100,2)+"%":"–",j=h==="52w"?(n==null?void 0:n.ivRank52w)??null:(n==null?void 0:n.ivRankAllTime)??null,o=j!=null?`${j} / 100`:"–",s=(n==null?void 0:n.ivChange1d)!=null?M(n.ivChange1d*100,2):"–",c=(n==null?void 0:n.ivChange5d)!=null?M(n.ivChange5d*100,2):"–",i=(n==null?void 0:n.nStocks)!=null?String(n.nStocks):"–",d=(n==null?void 0:n.nExcluded)!=null?String(n.nExcluded):"–",g=["3M","6M","1Y","All"];return e.jsxs(R,{children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsx(F,{className:"text-lg",children:"Swedish Market IV"}),e.jsxs("div",{className:"flex items-center gap-1 border rounded-md p-0.5",children:[e.jsx(V,{size:"sm",variant:h==="52w"?"default":"ghost",className:"h-7 text-xs px-2",onClick:()=>m("52w"),children:"52 Weeks"}),e.jsx(V,{size:"sm",variant:h==="allTime"?"default":"ghost",className:"h-7 text-xs px-2",onClick:()=>m("allTime"),children:"Historical"})]})]})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[e.jsx(w,{label:"Current IV",value:p}),e.jsx(w,{label:h==="52w"?"IV Rank 52w":"IV Rank Historical",value:o,colorClass:Fe(j)}),e.jsx(w,{label:"1-day Δ IV",value:s,colorClass:G((n==null?void 0:n.ivChange1d)??null)}),e.jsx(w,{label:"5-day Δ IV",value:c,colorClass:G((n==null?void 0:n.ivChange5d)??null)}),e.jsx(w,{label:"N Stocks",value:i}),e.jsx(w,{label:"N Excluded",value:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-end gap-1",children:g.map(a=>e.jsx(V,{size:"sm",variant:r===a?"default":"outline",className:"h-7 text-xs px-2",onClick:()=>u(a),children:a},a))}),e.jsx(Q,{width:"100%",height:280,children:e.jsxs(ve,{data:f,margin:{top:5,right:20,left:10,bottom:5},children:[e.jsx(q,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(J,{dataKey:"date",tick:{fontSize:11},tickFormatter:a=>a.slice(0,7),minTickGap:40}),e.jsx(z,{tick:{fontSize:11},tickFormatter:a=>`${Math.round(a*100)}%`,width:45}),e.jsx(Z,{content:e.jsx(ze,{})}),e.jsx(B,{type:"monotone",dataKey:"iv",name:"Market IV",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1,connectNulls:!1})]})})]})]})]})},et=()=>{ae("IV Analysis");const{stockSummaries:t,dataByStock:l,marketIVData:r,marketIVSummary:u,isLoading:h,error:m}=Ce(),[v,f]=x.useState(""),n=x.useRef(null),p=x.useMemo(()=>Array.from(l.keys()).sort(),[l]);x.useEffect(()=>{if(t.length>0&&!v){const o=[...t].sort((s,c)=>(c.ivRank52w??-1)-(s.ivRank52w??-1));f(o[0].stockName)}},[t,v]);const j=o=>{f(o),setTimeout(()=>{var s;(s=n.current)==null||s.scrollIntoView({behavior:"smooth",block:"start"})},50)};return h?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading IV data..."})]})}):m?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs(R,{className:"max-w-md",children:[e.jsx(L,{children:e.jsx(F,{className:"text-destructive",children:"Error loading data"})}),e.jsx(_,{children:e.jsx("p",{className:"text-muted-foreground",children:m})})]})}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b bg-card",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Implied Volatility History"})})}),e.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-8",children:[e.jsxs(je,{children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsxs(Ne,{children:[e.jsx("strong",{children:"Data source:"}),` Each day's IV is a constant-maturity 30-day implied volatility computed via variance interpolation across the options term structure, targeting ~21 business days (following the Swedish holiday calendar). Dates with no valid IV data show as "–".`]})]}),e.jsx(Be,{marketIVData:r,marketIVSummary:u}),e.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:e.jsx(Re,{summaries:t,selectedStock:v,onSelectStock:j})}),e.jsx(ee,{ref:n,selectedStock:v,onSelectStock:f,stockNames:p,summaries:t,dataByStock:l})]})]})};export{et as IVAnalysis};
