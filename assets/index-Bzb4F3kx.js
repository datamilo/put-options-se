const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Index-EigZSzJQ.js","assets/router-C0wDHNfv.js","assets/usePageTitle-CpPgFbZv.js","assets/data-timestamp-DWnCNA-w.js","assets/table-CGHOFhqg.js","assets/scroll-area-Dmn--wjy.js","assets/checkbox-BjBjZgw6.js","assets/badge-OBSMywpV.js","assets/excelExport-v_uqzb7H.js","assets/xlsx-neLdohXR.js","assets/index-BAMY2Nnw.js","assets/info-paoyZXvp.js","assets/arrow-up-down-nlnHjzKT.js","assets/card-WXtfKUg2.js","assets/tabs-GFvQ5VaF.js","assets/charts-B8eVsusH.js","assets/useEnrichedOptionsData-Bj19-jVV.js","assets/csv-B1Pu-2A6.js","assets/useStockData-BWzV3G2_.js","assets/file-text-C5Flebfo.js","assets/rotate-ccw-BIqaY3dW.js","assets/chart-column-DrgXRbJl.js","assets/PortfolioGenerator-BXjiPiQq.js","assets/numberFormatting-BNPfGtWN.js","assets/useScoredOptionsData-BHMVBA1S.js","assets/info-icon-tooltip-BpKRSNsT.js","assets/arrow-left-Cme9G3bo.js","assets/MonthlyAnalysis-BtTiyHDk.js","assets/select-WonCfv9o.js","assets/popover-MapSAk0u.js","assets/useMonthlyStockData-CuShNDzV.js","assets/arrow-up-CA_LF0IU.js","assets/trending-down-BlFXryvF.js","assets/VolatilityAnalysis-Bi3hsV1y.js","assets/useVolatilityData-C2pxXklU.js","assets/ConsecutiveBreaksAnalysis-B3MDMSfi.js","assets/react-plotly-BZSA8xH3.js","assets/SupportBasedOptionFinder-a-d38qxj.js","assets/useSupportLevelMetrics-DrzEGGKY.js","assets/OptionDetailsPage-D-NgWXHi.js","assets/useProbabilityHistory-CJabXNgn.js","assets/StockDetailsPage-NF0GMhgL.js","assets/breadcrumb-wUG6xl80.js","assets/ProbabilityAnalysis-CXms0b44.js","assets/useProbabilityRecoveryData-5JhFCbWq.js","assets/LowerBoundAnalysis-EB46Khw0.js","assets/circle-alert-coVd2Ajp.js","assets/alert-B_-eh8g4.js","assets/AutomatedRecommendations-CR1fs08I.js","assets/circle-x-Qw8Tqxh8.js","assets/ScoredOptions-DF5yvmrM.js","assets/IVAnalysis-BETgIpkd.js","assets/NotFound-p0LA7tVi.js","assets/Auth-BeE66ycK.js","assets/AuthCallback-Kfgb6wX9.js"])))=>i.map(i=>d[i]);
var Rh=Object.defineProperty;var Gi=t=>{throw TypeError(t)};var Ah=(t,e,r)=>e in t?Rh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ji=(t,e,r)=>Ah(t,typeof e!="symbol"?e+"":e,r),to=(t,e,r)=>e.has(t)||Gi("Cannot "+r);var j=(t,e,r)=>(to(t,e,"read from private field"),r?r.call(t):e.get(t)),ie=(t,e,r)=>e.has(t)?Gi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Q=(t,e,r,n)=>(to(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),je=(t,e,r)=>(to(t,e,"access private method"),r);var qn=(t,e,r,n)=>({set _(s){Q(t,e,s,r)},get _(){return j(t,e,n)}});import{r as p,a as Rs,R as $,b as jc,d as ui,u as di,N as kh,L as Le,B as Ph,e as Oh,f as ke}from"./router-C0wDHNfv.js";import{c as Nc}from"./charts-B8eVsusH.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Dc={exports:{}},As={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ih=p,jh=Symbol.for("react.element"),Nh=Symbol.for("react.fragment"),Dh=Object.prototype.hasOwnProperty,Mh=Ih.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$h={key:!0,ref:!0,__self:!0,__source:!0};function Mc(t,e,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)Dh.call(e,n)&&!$h.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:jh,type:t,key:o,ref:i,props:s,_owner:Mh.current}}As.Fragment=Nh;As.jsx=Mc;As.jsxs=Mc;Dc.exports=As;var g=Dc.exports,$c,Yi=Rs;$c=Yi.createRoot,Yi.hydrateRoot;const Lh="modulepreload",Fh=function(t){return"/put-options-se/"+t},Qi={},Me=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Fh(c),c in Qi)return;Qi[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Lh,u||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),u)return new Promise((y,f)=>{m.addEventListener("load",y),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},Bh=1,Uh=1e6;let ro=0;function Vh(){return ro=(ro+1)%Number.MAX_SAFE_INTEGER,ro.toString()}const no=new Map,Xi=t=>{if(no.has(t))return;const e=setTimeout(()=>{no.delete(t),vn({type:"REMOVE_TOAST",toastId:t})},Uh);no.set(t,e)},Wh=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Bh)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Xi(r):t.toasts.forEach(n=>{Xi(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},cs=[];let ls={toasts:[]};function vn(t){ls=Wh(ls,t),cs.forEach(e=>{e(ls)})}function zh({...t}){const e=Vh(),r=s=>vn({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>vn({type:"DISMISS_TOAST",toastId:e});return vn({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:r}}function qh(){const[t,e]=p.useState(ls);return p.useEffect(()=>(cs.push(e),()=>{const r=cs.indexOf(e);r>-1&&cs.splice(r,1)}),[t]),{...t,toast:zh,dismiss:r=>vn({type:"DISMISS_TOAST",toastId:r})}}function W(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Zi(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function sr(...t){return e=>{let r=!1;const n=t.map(s=>{const o=Zi(s,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():Zi(t[s],null)}}}}function fe(...t){return p.useCallback(sr(...t),t)}function Kh(t,e){const r=p.createContext(e),n=o=>{const{children:i,...a}=o,c=p.useMemo(()=>a,Object.values(a));return g.jsx(r.Provider,{value:c,children:i})};n.displayName=t+"Provider";function s(o){const i=p.useContext(r);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[n,s]}function $t(t,e=[]){let r=[];function n(o,i){const a=p.createContext(i),c=r.length;r=[...r,i];const u=m=>{var E;const{scope:y,children:f,...b}=m,v=((E=y==null?void 0:y[t])==null?void 0:E[c])||a,x=p.useMemo(()=>b,Object.values(b));return g.jsx(v.Provider,{value:x,children:f})};u.displayName=o+"Provider";function l(m,y){var v;const f=((v=y==null?void 0:y[t])==null?void 0:v[c])||a,b=p.useContext(f);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[u,l]}const s=()=>{const o=r.map(i=>p.createContext(i));return function(a){const c=(a==null?void 0:a[t])||o;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[n,Hh(s,...e)]}function Hh(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=n.reduce((a,{useScope:c,scopeName:u})=>{const m=c(o)[`__scope${u}`];return{...a,...m}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return r.scopeName=e.scopeName,r}function ea(t){const e=Gh(t),r=p.forwardRef((n,s)=>{const{children:o,...i}=n,a=p.Children.toArray(o),c=a.find(Yh);if(c){const u=c.props.children,l=a.map(m=>m===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:m);return g.jsx(e,{...i,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,l):null})}return g.jsx(e,{...i,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}function Gh(t){const e=p.forwardRef((r,n)=>{const{children:s,...o}=r;if(p.isValidElement(s)){const i=Xh(s),a=Qh(o,s.props);return s.type!==p.Fragment&&(a.ref=n?sr(n,i):i),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Jh=Symbol("radix.slottable");function Yh(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Jh}function Qh(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function Xh(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function ks(t){const e=t+"CollectionProvider",[r,n]=$t(e),[s,o]=r(e,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:x,children:E}=v,T=$.useRef(null),S=$.useRef(new Map).current;return g.jsx(s,{scope:x,itemMap:S,collectionRef:T,children:E})};i.displayName=e;const a=t+"CollectionSlot",c=ea(a),u=$.forwardRef((v,x)=>{const{scope:E,children:T}=v,S=o(a,E),C=fe(x,S.collectionRef);return g.jsx(c,{ref:C,children:T})});u.displayName=a;const l=t+"CollectionItemSlot",m="data-radix-collection-item",y=ea(l),f=$.forwardRef((v,x)=>{const{scope:E,children:T,...S}=v,C=$.useRef(null),A=fe(x,C),O=o(l,E);return $.useEffect(()=>(O.itemMap.set(C,{ref:C,...S}),()=>void O.itemMap.delete(C))),g.jsx(y,{[m]:"",ref:A,children:T})});f.displayName=l;function b(v){const x=o(t+"CollectionConsumer",v);return $.useCallback(()=>{const T=x.collectionRef.current;if(!T)return[];const S=Array.from(T.querySelectorAll(`[${m}]`));return Array.from(x.itemMap.values()).sort((O,I)=>S.indexOf(O.ref.current)-S.indexOf(I.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:i,Slot:u,ItemSlot:f},b,n]}function Zh(t){const e=ef(t),r=p.forwardRef((n,s)=>{const{children:o,...i}=n,a=p.Children.toArray(o),c=a.find(rf);if(c){const u=c.props.children,l=a.map(m=>m===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:m);return g.jsx(e,{...i,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,l):null})}return g.jsx(e,{...i,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}function ef(t){const e=p.forwardRef((r,n)=>{const{children:s,...o}=r;if(p.isValidElement(s)){const i=sf(s),a=nf(o,s.props);return s.type!==p.Fragment&&(a.ref=n?sr(n,i):i),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var tf=Symbol("radix.slottable");function rf(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===tf}function nf(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function sf(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var of=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],le=of.reduce((t,e)=>{const r=Zh(`Primitive.${e}`),n=p.forwardRef((s,o)=>{const{asChild:i,...a}=s,c=i?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(c,{...a,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function hi(t,e){t&&Rs.flushSync(()=>t.dispatchEvent(e))}function Ge(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function af(t,e=globalThis==null?void 0:globalThis.document){const r=Ge(t);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var cf="DismissableLayer",ko="dismissableLayer.update",lf="dismissableLayer.pointerDownOutside",uf="dismissableLayer.focusOutside",ta,Lc=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$n=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:a,...c}=t,u=p.useContext(Lc),[l,m]=p.useState(null),y=(l==null?void 0:l.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=p.useState({}),b=fe(e,I=>m(I)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(x),T=l?v.indexOf(l):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,C=T>=E,A=hf(I=>{const P=I.target,D=[...u.branches].some(B=>B.contains(P));!C||D||(s==null||s(I),i==null||i(I),I.defaultPrevented||a==null||a())},y),O=ff(I=>{const P=I.target;[...u.branches].some(B=>B.contains(P))||(o==null||o(I),i==null||i(I),I.defaultPrevented||a==null||a())},y);return af(I=>{T===u.layers.size-1&&(n==null||n(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},y),p.useEffect(()=>{if(l)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ta=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(l)),u.layers.add(l),ra(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=ta)}},[l,y,r,u]),p.useEffect(()=>()=>{l&&(u.layers.delete(l),u.layersWithOutsidePointerEventsDisabled.delete(l),ra())},[l,u]),p.useEffect(()=>{const I=()=>f({});return document.addEventListener(ko,I),()=>document.removeEventListener(ko,I)},[]),g.jsx(le.div,{...c,ref:b,style:{pointerEvents:S?C?"auto":"none":void 0,...t.style},onFocusCapture:W(t.onFocusCapture,O.onFocusCapture),onBlurCapture:W(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:W(t.onPointerDownCapture,A.onPointerDownCapture)})});$n.displayName=cf;var df="DismissableLayerBranch",Fc=p.forwardRef((t,e)=>{const r=p.useContext(Lc),n=p.useRef(null),s=fe(e,n);return p.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),g.jsx(le.div,{...t,ref:s})});Fc.displayName=df;function hf(t,e=globalThis==null?void 0:globalThis.document){const r=Ge(t),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=a=>{if(a.target&&!n.current){let c=function(){Bc(lf,r,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function ff(t,e=globalThis==null?void 0:globalThis.document){const r=Ge(t),n=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!n.current&&Bc(uf,r,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ra(){const t=new CustomEvent(ko);document.dispatchEvent(t)}function Bc(t,e,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?hi(s,o):s.dispatchEvent(o)}var pf=$n,mf=Fc,Nt=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},gf="Portal",Ps=p.forwardRef((t,e)=>{var a;const{container:r,...n}=t,[s,o]=p.useState(!1);Nt(()=>o(!0),[]);const i=r||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?jc.createPortal(g.jsx(le.div,{...n,ref:e}),i):null});Ps.displayName=gf;function yf(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var Rt=t=>{const{present:e,children:r}=t,n=vf(e),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),o=fe(n.ref,wf(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:o}):null};Rt.displayName="Presence";function vf(t){const[e,r]=p.useState(),n=p.useRef(null),s=p.useRef(t),o=p.useRef("none"),i=t?"mounted":"unmounted",[a,c]=yf(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Kn(n.current);o.current=a==="mounted"?u:"none"},[a]),Nt(()=>{const u=n.current,l=s.current;if(l!==t){const y=o.current,f=Kn(u);t?c("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(l&&y!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Nt(()=>{if(e){let u;const l=e.ownerDocument.defaultView??window,m=f=>{const v=Kn(n.current).includes(CSS.escape(f.animationName));if(f.target===e&&v&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=l.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},y=f=>{f.target===e&&(o.current=Kn(n.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{l.clearTimeout(u),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Kn(t){return(t==null?void 0:t.animationName)||"none"}function wf(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var bf=ui[" useInsertionEffect ".trim().toString()]||Nt;function sn({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[s,o,i]=xf({defaultProp:e,onChange:r}),a=t!==void 0,c=a?t:s;{const l=p.useRef(t!==void 0);p.useEffect(()=>{const m=l.current;m!==a&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=a},[a,n])}const u=p.useCallback(l=>{var m;if(a){const y=_f(l)?l(t):l;y!==t&&((m=i.current)==null||m.call(i,y))}else o(l)},[a,t,o,i]);return[c,u]}function xf({defaultProp:t,onChange:e}){const[r,n]=p.useState(t),s=p.useRef(r),o=p.useRef(e);return bf(()=>{o.current=e},[e]),p.useEffect(()=>{var i;s.current!==r&&((i=o.current)==null||i.call(o,r),s.current=r)},[r,s]),[r,n,o]}function _f(t){return typeof t=="function"}var Ef=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Sf="VisuallyHidden",Os=p.forwardRef((t,e)=>g.jsx(le.span,{...t,ref:e,style:{...Ef,...t.style}}));Os.displayName=Sf;var Cf=Os,fi="ToastProvider",[pi,Tf,Rf]=ks("Toast"),[Uc]=$t("Toast",[Rf]),[Af,Is]=Uc(fi),Vc=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:i}=t,[a,c]=p.useState(null),[u,l]=p.useState(0),m=p.useRef(!1),y=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${fi}\`. Expected non-empty \`string\`.`),g.jsx(pi.Provider,{scope:e,children:g.jsx(Af,{scope:e,label:r,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:p.useCallback(()=>l(f=>f+1),[]),onToastRemove:p.useCallback(()=>l(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:y,children:i})})};Vc.displayName=fi;var Wc="ToastViewport",kf=["F8"],Po="toast.viewportPause",Oo="toast.viewportResume",zc=p.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=kf,label:s="Notifications ({hotkey})",...o}=t,i=Is(Wc,r),a=Tf(r),c=p.useRef(null),u=p.useRef(null),l=p.useRef(null),m=p.useRef(null),y=fe(e,m,i.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;p.useEffect(()=>{const x=E=>{var S;n.length!==0&&n.every(C=>E[C]||E.code===C)&&((S=m.current)==null||S.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),p.useEffect(()=>{const x=c.current,E=m.current;if(b&&x&&E){const T=()=>{if(!i.isClosePausedRef.current){const O=new CustomEvent(Po);E.dispatchEvent(O),i.isClosePausedRef.current=!0}},S=()=>{if(i.isClosePausedRef.current){const O=new CustomEvent(Oo);E.dispatchEvent(O),i.isClosePausedRef.current=!1}},C=O=>{!x.contains(O.relatedTarget)&&S()},A=()=>{x.contains(document.activeElement)||S()};return x.addEventListener("focusin",T),x.addEventListener("focusout",C),x.addEventListener("pointermove",T),x.addEventListener("pointerleave",A),window.addEventListener("blur",T),window.addEventListener("focus",S),()=>{x.removeEventListener("focusin",T),x.removeEventListener("focusout",C),x.removeEventListener("pointermove",T),x.removeEventListener("pointerleave",A),window.removeEventListener("blur",T),window.removeEventListener("focus",S)}}},[b,i.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const T=a().map(S=>{const C=S.ref.current,A=[C,...Vf(C)];return x==="forwards"?A:A.reverse()});return(x==="forwards"?T.reverse():T).flat()},[a]);return p.useEffect(()=>{const x=m.current;if(x){const E=T=>{var A,O,I;const S=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!S){const P=document.activeElement,D=T.shiftKey;if(T.target===x&&D){(A=u.current)==null||A.focus();return}const F=v({tabbingDirection:D?"backwards":"forwards"}),Y=F.findIndex(L=>L===P);so(F.slice(Y+1))?T.preventDefault():D?(O=u.current)==null||O.focus():(I=l.current)==null||I.focus()}};return x.addEventListener("keydown",E),()=>x.removeEventListener("keydown",E)}},[a,v]),g.jsxs(mf,{ref:c,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&g.jsx(Io,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});so(x)}}),g.jsx(pi.Slot,{scope:r,children:g.jsx(le.ol,{tabIndex:-1,...o,ref:y})}),b&&g.jsx(Io,{ref:l,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});so(x)}})]})});zc.displayName=Wc;var qc="ToastFocusProxy",Io=p.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=t,o=Is(qc,r);return g.jsx(Os,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:i=>{var u;const a=i.relatedTarget;!((u=o.viewport)!=null&&u.contains(a))&&n()}})});Io.displayName=qc;var Ln="Toast",Pf="toast.swipeStart",Of="toast.swipeMove",If="toast.swipeCancel",jf="toast.swipeEnd",Kc=p.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:o,...i}=t,[a,c]=sn({prop:n,defaultProp:s??!0,onChange:o,caller:Ln});return g.jsx(Rt,{present:r||a,children:g.jsx(Mf,{open:a,...i,ref:e,onClose:()=>c(!1),onPause:Ge(t.onPause),onResume:Ge(t.onResume),onSwipeStart:W(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:W(t.onSwipeMove,u=>{const{x:l,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${l}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:W(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:W(t.onSwipeEnd,u=>{const{x:l,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${l}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});Kc.displayName=Ln;var[Nf,Df]=Uc(Ln,{onClose(){}}),Mf=p.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:o,onClose:i,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:l,onSwipeMove:m,onSwipeCancel:y,onSwipeEnd:f,...b}=t,v=Is(Ln,r),[x,E]=p.useState(null),T=fe(e,L=>E(L)),S=p.useRef(null),C=p.useRef(null),A=s||v.duration,O=p.useRef(0),I=p.useRef(A),P=p.useRef(0),{onToastAdd:D,onToastRemove:B}=v,U=Ge(()=>{var X;(x==null?void 0:x.contains(document.activeElement))&&((X=v.viewport)==null||X.focus()),i()}),F=p.useCallback(L=>{!L||L===1/0||(window.clearTimeout(P.current),O.current=new Date().getTime(),P.current=window.setTimeout(U,L))},[U]);p.useEffect(()=>{const L=v.viewport;if(L){const X=()=>{F(I.current),u==null||u()},z=()=>{const H=new Date().getTime()-O.current;I.current=I.current-H,window.clearTimeout(P.current),c==null||c()};return L.addEventListener(Po,z),L.addEventListener(Oo,X),()=>{L.removeEventListener(Po,z),L.removeEventListener(Oo,X)}}},[v.viewport,A,c,u,F]),p.useEffect(()=>{o&&!v.isClosePausedRef.current&&F(A)},[o,A,v.isClosePausedRef,F]),p.useEffect(()=>(D(),()=>B()),[D,B]);const Y=p.useMemo(()=>x?Zc(x):null,[x]);return v.viewport?g.jsxs(g.Fragment,{children:[Y&&g.jsx($f,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:Y}),g.jsx(Nf,{scope:r,onClose:U,children:Rs.createPortal(g.jsx(pi.ItemSlot,{scope:r,children:g.jsx(pf,{asChild:!0,onEscapeKeyDown:W(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||U(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:g.jsx(le.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...b,ref:T,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:W(t.onKeyDown,L=>{L.key==="Escape"&&(a==null||a(L.nativeEvent),L.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:W(t.onPointerDown,L=>{L.button===0&&(S.current={x:L.clientX,y:L.clientY})}),onPointerMove:W(t.onPointerMove,L=>{if(!S.current)return;const X=L.clientX-S.current.x,z=L.clientY-S.current.y,H=!!C.current,V=["left","right"].includes(v.swipeDirection),M=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,Z=V?M(0,X):0,ce=V?0:M(0,z),ee=L.pointerType==="touch"?10:2,se={x:Z,y:ce},K={originalEvent:L,delta:se};H?(C.current=se,Hn(Of,m,K,{discrete:!1})):na(se,v.swipeDirection,ee)?(C.current=se,Hn(Pf,l,K,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(X)>ee||Math.abs(z)>ee)&&(S.current=null)}),onPointerUp:W(t.onPointerUp,L=>{const X=C.current,z=L.target;if(z.hasPointerCapture(L.pointerId)&&z.releasePointerCapture(L.pointerId),C.current=null,S.current=null,X){const H=L.currentTarget,V={originalEvent:L,delta:X};na(X,v.swipeDirection,v.swipeThreshold)?Hn(jf,f,V,{discrete:!0}):Hn(If,y,V,{discrete:!0}),H.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),$f=t=>{const{__scopeToast:e,children:r,...n}=t,s=Is(Ln,e),[o,i]=p.useState(!1),[a,c]=p.useState(!1);return Bf(()=>i(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:g.jsx(Ps,{asChild:!0,children:g.jsx(Os,{...n,children:o&&g.jsxs(g.Fragment,{children:[s.label," ",r]})})})},Lf="ToastTitle",Hc=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return g.jsx(le.div,{...n,ref:e})});Hc.displayName=Lf;var Ff="ToastDescription",Gc=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return g.jsx(le.div,{...n,ref:e})});Gc.displayName=Ff;var Jc="ToastAction",Yc=p.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?g.jsx(Xc,{altText:r,asChild:!0,children:g.jsx(mi,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Jc}\`. Expected non-empty \`string\`.`),null)});Yc.displayName=Jc;var Qc="ToastClose",mi=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,s=Df(Qc,r);return g.jsx(Xc,{asChild:!0,children:g.jsx(le.button,{type:"button",...n,ref:e,onClick:W(t.onClick,s.onClose)})})});mi.displayName=Qc;var Xc=p.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...s}=t;return g.jsx(le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function Zc(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Uf(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...Zc(n))}}),e}function Hn(t,e,r,{discrete:n}){const s=r.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?hi(s,o):s.dispatchEvent(o)}var na=(t,e,r=0)=>{const n=Math.abs(t.x),s=Math.abs(t.y),o=n>s;return e==="left"||e==="right"?o&&n>r:!o&&s>r};function Bf(t=()=>{}){const e=Ge(t);Nt(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function Uf(t){return t.nodeType===t.ELEMENT_NODE}function Vf(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function so(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var Wf=Vc,el=zc,tl=Kc,rl=Hc,nl=Gc,sl=Yc,ol=mi;const sa=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,oa=Nc,gi=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return oa(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=e,i=Object.keys(s).map(u=>{const l=r==null?void 0:r[u],m=o==null?void 0:o[u];if(l===null)return null;const y=sa(l)||sa(m);return s[u][y]}),a=r&&Object.entries(r).reduce((u,l)=>{let[m,y]=l;return y===void 0||(u[m]=y),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,l)=>{let{class:m,className:y,...f}=l;return Object.entries(f).every(b=>{let[v,x]=b;return Array.isArray(x)?x.includes({...o,...a}[v]):{...o,...a}[v]===x})?[...u,m,y]:u},[]);return oa(t,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),il=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:i,...a},c)=>p.createElement("svg",{ref:c,...qf,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:il("lucide",s),...a},[...i.map(([u,l])=>p.createElement(u,l)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const r=p.forwardRef(({className:n,...s},o)=>p.createElement(Kf,{ref:o,iconNode:e,className:il(`lucide-${zf(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Ee("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Ee("ArrowDown10",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M17 10V4h-2",key:"zcsr5x"}],["path",{d:"M15 10h4",key:"id2lce"}],["rect",{x:"15",y:"14",width:"4",height:"6",ry:"2",key:"33xykx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=Ee("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Ee("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Ee("ChartNetwork",[["path",{d:"m13.11 7.664 1.78 2.672",key:"go2gg9"}],["path",{d:"m14.162 12.788-3.324 1.424",key:"11x848"}],["path",{d:"m20 4-6.06 1.515",key:"1wxxh7"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["circle",{cx:"12",cy:"6",r:"2",key:"1jj5th"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}],["circle",{cx:"9",cy:"15",r:"2",key:"lf2ghp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=Ee("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=Ee("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=Ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=Ee("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Ee("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Ee("TrendingUpDown",[["path",{d:"M14.828 14.828 21 21",key:"ar5fw7"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"m21 3-9 9-4-4-6 6",key:"1h02xo"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=Ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=Ee("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),yi="-",ep=t=>{const e=rp(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const a=i.split(yi);return a[0]===""&&a.length!==1&&a.shift(),cl(a,e)||tp(i)},getConflictingClassGroupIds:(i,a)=>{const c=r[i]||[];return a&&n[i]?[...c,...n[i]]:c}}},cl=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?cl(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(yi);return(i=e.validators.find(({validator:a})=>a(o)))==null?void 0:i.classGroupId},ma=/^\[(.+)\]$/,tp=t=>{if(ma.test(t)){const e=ma.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},rp=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return sp(Object.entries(t.classGroups),r).forEach(([o,i])=>{No(i,n,o,e)}),n},No=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:ga(e,s);o.classGroupId=r;return}if(typeof s=="function"){if(np(s)){No(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,i])=>{No(i,ga(e,o),r,n)})})},ga=(t,e)=>{let r=t;return e.split(yi).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},np=t=>t.isThemeGetter,sp=(t,e)=>e?t.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,a])=>[e+i,a])):o);return[r,s]}):t,op=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(o,i)=>{r.set(o,i),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return s(o,i),i},set(o,i){r.has(o)?r.set(o,i):s(o,i)}}},ll="!",ip=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],o=e.length,i=a=>{const c=[];let u=0,l=0,m;for(let x=0;x<a.length;x++){let E=a[x];if(u===0){if(E===s&&(n||a.slice(x,x+o)===e)){c.push(a.slice(l,x)),l=x+o;continue}if(E==="/"){m=x;continue}}E==="["?u++:E==="]"&&u--}const y=c.length===0?a:a.substring(l),f=y.startsWith(ll),b=f?y.substring(1):y,v=m&&m>l?m-l:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:b,maybePostfixModifierPosition:v}};return r?a=>r({className:a,parseClassName:i}):i},ap=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},cp=t=>({cache:op(t.cacheSize),parseClassName:ip(t),...ep(t)}),lp=/\s+/,up=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,o=[],i=t.trim().split(lp);let a="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:f}=r(u);let b=!!f,v=n(b?y.substring(0,f):y);if(!v){if(!b){a=u+(a.length>0?" "+a:a);continue}if(v=n(y),!v){a=u+(a.length>0?" "+a:a);continue}b=!1}const x=ap(l).join(":"),E=m?x+ll:x,T=E+v;if(o.includes(T))continue;o.push(T);const S=s(v,b);for(let C=0;C<S.length;++C){const A=S[C];o.push(E+A)}a=u+(a.length>0?" "+a:a)}return a};function dp(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=ul(e))&&(n&&(n+=" "),n+=r);return n}const ul=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=ul(t[n]))&&(r&&(r+=" "),r+=e);return r};function hp(t,...e){let r,n,s,o=i;function i(c){const u=e.reduce((l,m)=>m(l),t());return r=cp(u),n=r.cache.get,s=r.cache.set,o=a,a(c)}function a(c){const u=n(c);if(u)return u;const l=up(c,r);return s(c,l),l}return function(){return o(dp.apply(null,arguments))}}const ge=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},dl=/^\[(?:([a-z-]+):)?(.+)\]$/i,fp=/^\d+\/\d+$/,pp=new Set(["px","full","screen"]),mp=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gp=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yp=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,vp=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wp=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pt=t=>zr(t)||pp.has(t)||fp.test(t),zt=t=>on(t,"length",Rp),zr=t=>!!t&&!Number.isNaN(Number(t)),co=t=>on(t,"number",zr),fn=t=>!!t&&Number.isInteger(Number(t)),bp=t=>t.endsWith("%")&&zr(t.slice(0,-1)),re=t=>dl.test(t),qt=t=>mp.test(t),xp=new Set(["length","size","percentage"]),_p=t=>on(t,xp,hl),Ep=t=>on(t,"position",hl),Sp=new Set(["image","url"]),Cp=t=>on(t,Sp,kp),Tp=t=>on(t,"",Ap),pn=()=>!0,on=(t,e,r)=>{const n=dl.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},Rp=t=>gp.test(t)&&!yp.test(t),hl=()=>!1,Ap=t=>vp.test(t),kp=t=>wp.test(t),Pp=()=>{const t=ge("colors"),e=ge("spacing"),r=ge("blur"),n=ge("brightness"),s=ge("borderColor"),o=ge("borderRadius"),i=ge("borderSpacing"),a=ge("borderWidth"),c=ge("contrast"),u=ge("grayscale"),l=ge("hueRotate"),m=ge("invert"),y=ge("gap"),f=ge("gradientColorStops"),b=ge("gradientColorStopPositions"),v=ge("inset"),x=ge("margin"),E=ge("opacity"),T=ge("padding"),S=ge("saturate"),C=ge("scale"),A=ge("sepia"),O=ge("skew"),I=ge("space"),P=ge("translate"),D=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",re,e],F=()=>[re,e],Y=()=>["",Pt,zt],L=()=>["auto",zr,re],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",re],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[zr,re];return{cacheSize:500,separator:":",theme:{colors:[pn],spacing:[Pt,zt],blur:["none","",qt,re],brightness:ce(),borderColor:[t],borderRadius:["none","","full",qt,re],borderSpacing:F(),borderWidth:Y(),contrast:ce(),grayscale:M(),hueRotate:ce(),invert:M(),gap:F(),gradientColorStops:[t],gradientColorStopPositions:[bp,zt],inset:U(),margin:U(),opacity:ce(),padding:F(),saturate:ce(),scale:ce(),sepia:M(),skew:ce(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",re]}],container:["container"],columns:[{columns:[qt]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),re]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fn,re]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",re]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",fn,re]}],"grid-cols":[{"grid-cols":[pn]}],"col-start-end":[{col:["auto",{span:["full",fn,re]},re]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[pn]}],"row-start-end":[{row:["auto",{span:[fn,re]},re]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",re]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",re,e]}],"min-w":[{"min-w":[re,e,"min","max","fit"]}],"max-w":[{"max-w":[re,e,"none","full","min","max","fit","prose",{screen:[qt]},qt]}],h:[{h:[re,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[re,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[re,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[re,e,"auto","min","max","fit"]}],"font-size":[{text:["base",qt,zt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",co]}],"font-family":[{font:[pn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",re]}],"line-clamp":[{"line-clamp":["none",zr,co]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pt,re]}],"list-image":[{"list-image":["none",re]}],"list-style-type":[{list:["none","disc","decimal",re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pt,zt]}],"underline-offset":[{"underline-offset":["auto",Pt,re]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),Ep]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_p]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Cp]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Pt,re]}],"outline-w":[{outline:[Pt,zt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Pt,zt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",qt,Tp]}],"shadow-color":[{shadow:[pn]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",qt,re]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[l]}],invert:[{invert:[m]}],saturate:[{saturate:[S]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[l]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",re]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",re]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[fn,re]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",re]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",re]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",re]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Pt,zt,co]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Op=hp(Pp);function be(...t){return Op(Nc(t))}function RE(t){if(t.length===0)return null;const e=new Date,r=new Date(e.getFullYear(),e.getMonth()+1,1),n=new Date(r),o=(5-n.getDay()+7)%7;n.setDate(n.getDate()+o);const i=new Date(n);i.setDate(i.getDate()+14);let a=t[0],c=1/0;return t.forEach(u=>{const l=new Date(u),m=Math.abs(l.getTime()-i.getTime());m<c&&(c=m,a=u)}),a}function AE(t,e=""){return t==null||t==="NaN"||t===""?"-":typeof t=="number"?e.includes("Pct")||e.includes("Prob")||e==="ImpliedVolatility"||e==="Mean_Accuracy"||e==="AllMedianIV_Maximum100DaysToExp"||e==="TodayStockMedianIV_Maximum100DaysToExp"||e==="WorstHistoricalDecline"||e==="BadHistoricalDecline"||e==="ImpliedVolatilityUntilExpiry"||e==="Historical100DaysWorstDecline"||e==="Historical50DaysWorstDecline"||e==="2008_100DaysWorstDecline"||e==="2008_50DaysWorstDecline"||e==="Annualized_ROM_Pct"||e==="Event_Buffer"||e==="Final_SRI"||e==="SRI_Base"?`${(t*100).toLocaleString("sv-SE",{minimumFractionDigits:2,maximumFractionDigits:2})}%`:e==="Premium"||e==="Underlying_Value"||e==="PotentialLossAtLowerBound"||e==="EstTotalMargin"||e==="Est_Margin_SEK"||e==="Net_Premium_After_Costs"||e==="Margin_A_Broker_Proxy"||e==="Margin_B_Historical_Floor"||e==="Margin_Floor_15pct"||e==="OTM_Amount"||e==="DaysToExpiry"||e==="X-Day"||e.includes("Number")||Math.abs(t)>=1e3?Math.round(t).toLocaleString("sv-SE"):e.includes("Loss")||e.includes("Price")||e.includes("Bid")||e.includes("Value")?t.toLocaleString("sv-SE",{minimumFractionDigits:2,maximumFractionDigits:2}):t.toLocaleString("sv-SE",{minimumFractionDigits:2,maximumFractionDigits:2}):String(t)}const Ip=Wf,fl=p.forwardRef(({className:t,...e},r)=>g.jsx(el,{ref:r,className:be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));fl.displayName=el.displayName;const jp=gi("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),pl=p.forwardRef(({className:t,variant:e,...r},n)=>g.jsx(tl,{ref:n,className:be(jp({variant:e}),t),...r}));pl.displayName=tl.displayName;const Np=p.forwardRef(({className:t,...e},r)=>g.jsx(sl,{ref:r,className:be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Np.displayName=sl.displayName;const ml=p.forwardRef(({className:t,...e},r)=>g.jsx(ol,{ref:r,className:be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:g.jsx(al,{className:"h-4 w-4"})}));ml.displayName=ol.displayName;const gl=p.forwardRef(({className:t,...e},r)=>g.jsx(rl,{ref:r,className:be("text-sm font-semibold",t),...e}));gl.displayName=rl.displayName;const yl=p.forwardRef(({className:t,...e},r)=>g.jsx(nl,{ref:r,className:be("text-sm opacity-90",t),...e}));yl.displayName=nl.displayName;function Dp(){const{toasts:t}=qh();return g.jsxs(Ip,{children:[t.map(function({id:e,title:r,description:n,action:s,...o}){return g.jsxs(pl,{...o,children:[g.jsxs("div",{className:"grid gap-1",children:[r&&g.jsx(gl,{children:r}),n&&g.jsx(yl,{children:n})]}),s,g.jsx(ml,{})]},e)}),g.jsx(fl,{})]})}var ps=["light","dark"],vi="(prefers-color-scheme: dark)",Mp=typeof window>"u",wi=p.createContext(void 0),$p={setTheme:t=>{},themes:[]},vl=()=>{var t;return(t=p.useContext(wi))!=null?t:$p},Lp=t=>p.useContext(wi)?t.children:p.createElement(Bp,{...t}),Fp=["light","dark"],Bp=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:s="theme",themes:o=Fp,defaultTheme:i=r?"system":"light",attribute:a="data-theme",value:c,children:u,nonce:l})=>{let[m,y]=p.useState(()=>ya(s,i)),[f,b]=p.useState(()=>ya(s)),v=c?Object.values(c):o,x=p.useCallback(C=>{let A=C;if(!A)return;C==="system"&&r&&(A=va());let O=c?c[A]:A,I=e?Vp():null,P=document.documentElement;if(a==="class"?(P.classList.remove(...v),O&&P.classList.add(O)):O?P.setAttribute(a,O):P.removeAttribute(a),n){let D=ps.includes(i)?i:null,B=ps.includes(A)?A:D;P.style.colorScheme=B}I==null||I()},[]),E=p.useCallback(C=>{let A=typeof C=="function"?C(C):C;y(A);try{localStorage.setItem(s,A)}catch{}},[t]),T=p.useCallback(C=>{let A=va(C);b(A),m==="system"&&r&&!t&&x("system")},[m,t]);p.useEffect(()=>{let C=window.matchMedia(vi);return C.addListener(T),T(C),()=>C.removeListener(T)},[T]),p.useEffect(()=>{let C=A=>{if(A.key!==s)return;let O=A.newValue||i;E(O)};return window.addEventListener("storage",C),()=>window.removeEventListener("storage",C)},[E]),p.useEffect(()=>{x(t??m)},[t,m]);let S=p.useMemo(()=>({theme:m,setTheme:E,forcedTheme:t,resolvedTheme:m==="system"?f:m,themes:r?[...o,"system"]:o,systemTheme:r?f:void 0}),[m,E,t,f,r,o]);return p.createElement(wi.Provider,{value:S},p.createElement(Up,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:r,enableColorScheme:n,storageKey:s,themes:o,defaultTheme:i,attribute:a,value:c,children:u,attrs:v,nonce:l}),u)},Up=p.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:o,value:i,attrs:a,nonce:c})=>{let u=o==="system",l=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,m=s?ps.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=(b,v=!1,x=!0)=>{let E=i?i[b]:b,T=v?b+"|| ''":`'${E}'`,S="";return s&&x&&!v&&ps.includes(b)&&(S+=`d.style.colorScheme = '${b}';`),r==="class"?v||E?S+=`c.add(${T})`:S+="null":E&&(S+=`d[s](n,${T})`),S},f=t?`!function(){${l}${y(t)}}()`:n?`!function(){try{${l}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${vi}',m=window.matchMedia(t);if(m.media!==t||m.matches){${y("dark")}}else{${y("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${y(i?"x[e]":"e",!0)}}${u?"":"else{"+y(o,!1,!1)+"}"}${m}}catch(e){}}()`:`!function(){try{${l}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${y(i?"x[e]":"e",!0)}}else{${y(o,!1,!1)};}${m}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})}),ya=(t,e)=>{if(Mp)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||e},Vp=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},va=t=>(t||(t=window.matchMedia(vi)),t.matches?"dark":"light"),Wp=t=>{switch(t){case"success":return Kp;case"info":return Gp;case"warning":return Hp;case"error":return Jp;default:return null}},zp=Array(12).fill(0),qp=({visible:t,className:e})=>$.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},$.createElement("div",{className:"sonner-spinner"},zp.map((r,n)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Kp=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Hp=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Gp=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Jp=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Yp=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Qp=()=>{let[t,e]=$.useState(document.hidden);return $.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},Do=1,Xp=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Do++,o=this.toasts.find(a=>a.id===s),i=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:r}),{...a,...t,id:s,dismissible:i,title:r}):a):this.addToast({title:r,...n,dismissible:i,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),s=r!==void 0,o,i=n.then(async c=>{if(o=["resolve",c],$.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(em(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,l=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:r,type:"error",message:u,description:l})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,l=typeof e.description=="function"?await e.description(c):e.description;this.create({id:r,type:"success",message:u,description:l})}}).catch(async c=>{if(o=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,l=typeof e.description=="function"?await e.description(c):e.description;this.create({id:r,type:"error",message:u,description:l})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=e.finally)==null||c.call(e)}),a=()=>new Promise((c,u)=>i.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:a}:Object.assign(r,{unwrap:a})},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||Do++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},We=new Xp,Zp=(t,e)=>{let r=(e==null?void 0:e.id)||Do++;return We.addToast({title:t,...e,id:r}),r},em=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",tm=Zp,rm=()=>We.toasts,nm=()=>We.getActiveToasts(),ct=Object.assign(tm,{success:We.success,info:We.info,warning:We.warning,error:We.error,custom:We.custom,message:We.message,promise:We.promise,dismiss:We.dismiss,loading:We.loading},{getHistory:rm,getToasts:nm});function sm(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}sm(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Jn(t){return t.label!==void 0}var om=3,im="32px",am="16px",wa=4e3,cm=356,lm=14,um=20,dm=200;function it(...t){return t.filter(Boolean).join(" ")}function hm(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var fm=t=>{var e,r,n,s,o,i,a,c,u,l,m;let{invert:y,toast:f,unstyled:b,interacting:v,setHeights:x,visibleToasts:E,heights:T,index:S,toasts:C,expanded:A,removeToast:O,defaultRichColors:I,closeButton:P,style:D,cancelButtonStyle:B,actionButtonStyle:U,className:F="",descriptionClassName:Y="",duration:L,position:X,gap:z,loadingIcon:H,expandByDefault:V,classNames:M,icons:Z,closeButtonAriaLabel:ce="Close toast",pauseWhenPageIsHidden:ee}=t,[se,K]=$.useState(null),[ae,Ae]=$.useState(null),[oe,Je]=$.useState(!1),[Se,ze]=$.useState(!1),[$e,gt]=$.useState(!1),[tt,Tr]=$.useState(!1),[Rr,rt]=$.useState(!1),[kt,or]=$.useState(0),[Ft,Ar]=$.useState(0),ir=$.useRef(f.duration||L||wa),zn=$.useRef(null),yt=$.useRef(null),kr=S===0,Ye=S+1<=E,Ie=f.type,Bt=f.dismissible!==!1,vt=f.className||"",Zs=f.descriptionClassName||"",w=$.useMemo(()=>T.findIndex(te=>te.toastId===f.id)||0,[T,f.id]),d=$.useMemo(()=>{var te;return(te=f.closeButton)!=null?te:P},[f.closeButton,P]),h=$.useMemo(()=>f.duration||L||wa,[f.duration,L]),_=$.useRef(0),R=$.useRef(0),k=$.useRef(0),N=$.useRef(null),[ne,ye]=X.split("-"),he=$.useMemo(()=>T.reduce((te,de,ve)=>ve>=w?te:te+de.height,0),[T,w]),me=Qp(),ue=f.invert||y,eo=Ie==="loading";R.current=$.useMemo(()=>w*z+he,[w,he]),$.useEffect(()=>{ir.current=h},[h]),$.useEffect(()=>{Je(!0)},[]),$.useEffect(()=>{let te=yt.current;if(te){let de=te.getBoundingClientRect().height;return Ar(de),x(ve=>[{toastId:f.id,height:de,position:f.position},...ve]),()=>x(ve=>ve.filter(nt=>nt.toastId!==f.id))}},[x,f.id]),$.useLayoutEffect(()=>{if(!oe)return;let te=yt.current,de=te.style.height;te.style.height="auto";let ve=te.getBoundingClientRect().height;te.style.height=de,Ar(ve),x(nt=>nt.find(st=>st.toastId===f.id)?nt.map(st=>st.toastId===f.id?{...st,height:ve}:st):[{toastId:f.id,height:ve,position:f.position},...nt])},[oe,f.title,f.description,x,f.id]);let Ut=$.useCallback(()=>{ze(!0),or(R.current),x(te=>te.filter(de=>de.toastId!==f.id)),setTimeout(()=>{O(f)},dm)},[f,O,x,R]);$.useEffect(()=>{if(f.promise&&Ie==="loading"||f.duration===1/0||f.type==="loading")return;let te;return A||v||ee&&me?(()=>{if(k.current<_.current){let de=new Date().getTime()-_.current;ir.current=ir.current-de}k.current=new Date().getTime()})():ir.current!==1/0&&(_.current=new Date().getTime(),te=setTimeout(()=>{var de;(de=f.onAutoClose)==null||de.call(f,f),Ut()},ir.current)),()=>clearTimeout(te)},[A,v,f,Ie,ee,me,Ut]),$.useEffect(()=>{f.delete&&Ut()},[Ut,f.delete]);function Th(){var te,de,ve;return Z!=null&&Z.loading?$.createElement("div",{className:it(M==null?void 0:M.loader,(te=f==null?void 0:f.classNames)==null?void 0:te.loader,"sonner-loader"),"data-visible":Ie==="loading"},Z.loading):H?$.createElement("div",{className:it(M==null?void 0:M.loader,(de=f==null?void 0:f.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":Ie==="loading"},H):$.createElement(qp,{className:it(M==null?void 0:M.loader,(ve=f==null?void 0:f.classNames)==null?void 0:ve.loader),visible:Ie==="loading"})}return $.createElement("li",{tabIndex:0,ref:yt,className:it(F,vt,M==null?void 0:M.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,M==null?void 0:M.default,M==null?void 0:M[Ie],(r=f==null?void 0:f.classNames)==null?void 0:r[Ie]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:I,"data-styled":!(f.jsx||f.unstyled||b),"data-mounted":oe,"data-promise":!!f.promise,"data-swiped":Rr,"data-removed":Se,"data-visible":Ye,"data-y-position":ne,"data-x-position":ye,"data-index":S,"data-front":kr,"data-swiping":$e,"data-dismissible":Bt,"data-type":Ie,"data-invert":ue,"data-swipe-out":tt,"data-swipe-direction":ae,"data-expanded":!!(A||V&&oe),style:{"--index":S,"--toasts-before":S,"--z-index":C.length-S,"--offset":`${Se?kt:R.current}px`,"--initial-height":V?"auto":`${Ft}px`,...D,...f.style},onDragEnd:()=>{gt(!1),K(null),N.current=null},onPointerDown:te=>{eo||!Bt||(zn.current=new Date,or(R.current),te.target.setPointerCapture(te.pointerId),te.target.tagName!=="BUTTON"&&(gt(!0),N.current={x:te.clientX,y:te.clientY}))},onPointerUp:()=>{var te,de,ve,nt;if(tt||!Bt)return;N.current=null;let st=Number(((te=yt.current)==null?void 0:te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Vt=Number(((de=yt.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ar=new Date().getTime()-((ve=zn.current)==null?void 0:ve.getTime()),ot=se==="x"?st:Vt,Wt=Math.abs(ot)/ar;if(Math.abs(ot)>=um||Wt>.11){or(R.current),(nt=f.onDismiss)==null||nt.call(f,f),Ae(se==="x"?st>0?"right":"left":Vt>0?"down":"up"),Ut(),Tr(!0),rt(!1);return}gt(!1),K(null)},onPointerMove:te=>{var de,ve,nt,st;if(!N.current||!Bt||((de=window.getSelection())==null?void 0:de.toString().length)>0)return;let Vt=te.clientY-N.current.y,ar=te.clientX-N.current.x,ot=(ve=t.swipeDirections)!=null?ve:hm(X);!se&&(Math.abs(ar)>1||Math.abs(Vt)>1)&&K(Math.abs(ar)>Math.abs(Vt)?"x":"y");let Wt={x:0,y:0};se==="y"?(ot.includes("top")||ot.includes("bottom"))&&(ot.includes("top")&&Vt<0||ot.includes("bottom")&&Vt>0)&&(Wt.y=Vt):se==="x"&&(ot.includes("left")||ot.includes("right"))&&(ot.includes("left")&&ar<0||ot.includes("right")&&ar>0)&&(Wt.x=ar),(Math.abs(Wt.x)>0||Math.abs(Wt.y)>0)&&rt(!0),(nt=yt.current)==null||nt.style.setProperty("--swipe-amount-x",`${Wt.x}px`),(st=yt.current)==null||st.style.setProperty("--swipe-amount-y",`${Wt.y}px`)}},d&&!f.jsx?$.createElement("button",{"aria-label":ce,"data-disabled":eo,"data-close-button":!0,onClick:eo||!Bt?()=>{}:()=>{var te;Ut(),(te=f.onDismiss)==null||te.call(f,f)},className:it(M==null?void 0:M.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},(o=Z==null?void 0:Z.close)!=null?o:Yp):null,f.jsx||p.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:$.createElement($.Fragment,null,Ie||f.icon||f.promise?$.createElement("div",{"data-icon":"",className:it(M==null?void 0:M.icon,(i=f==null?void 0:f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Th():null,f.type!=="loading"?f.icon||(Z==null?void 0:Z[Ie])||Wp(Ie):null):null,$.createElement("div",{"data-content":"",className:it(M==null?void 0:M.content,(a=f==null?void 0:f.classNames)==null?void 0:a.content)},$.createElement("div",{"data-title":"",className:it(M==null?void 0:M.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?$.createElement("div",{"data-description":"",className:it(Y,Zs,M==null?void 0:M.description,(u=f==null?void 0:f.classNames)==null?void 0:u.description)},typeof f.description=="function"?f.description():f.description):null),p.isValidElement(f.cancel)?f.cancel:f.cancel&&Jn(f.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||B,onClick:te=>{var de,ve;Jn(f.cancel)&&Bt&&((ve=(de=f.cancel).onClick)==null||ve.call(de,te),Ut())},className:it(M==null?void 0:M.cancelButton,(l=f==null?void 0:f.classNames)==null?void 0:l.cancelButton)},f.cancel.label):null,p.isValidElement(f.action)?f.action:f.action&&Jn(f.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||U,onClick:te=>{var de,ve;Jn(f.action)&&((ve=(de=f.action).onClick)==null||ve.call(de,te),!te.defaultPrevented&&Ut())},className:it(M==null?void 0:M.actionButton,(m=f==null?void 0:f.classNames)==null?void 0:m.actionButton)},f.action.label):null))};function ba(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function pm(t,e){let r={};return[t,e].forEach((n,s)=>{let o=s===1,i=o?"--mobile-offset":"--offset",a=o?am:im;function c(u){["top","right","bottom","left"].forEach(l=>{r[`${i}-${l}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${i}-${u}`]=a:r[`${i}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(a)}),r}var mm=p.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:i,className:a,offset:c,mobileOffset:u,theme:l="light",richColors:m,duration:y,style:f,visibleToasts:b=om,toastOptions:v,dir:x=ba(),gap:E=lm,loadingIcon:T,icons:S,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:A}=t,[O,I]=$.useState([]),P=$.useMemo(()=>Array.from(new Set([n].concat(O.filter(ee=>ee.position).map(ee=>ee.position)))),[O,n]),[D,B]=$.useState([]),[U,F]=$.useState(!1),[Y,L]=$.useState(!1),[X,z]=$.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=$.useRef(null),V=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=$.useRef(null),Z=$.useRef(!1),ce=$.useCallback(ee=>{I(se=>{var K;return(K=se.find(ae=>ae.id===ee.id))!=null&&K.delete||We.dismiss(ee.id),se.filter(({id:ae})=>ae!==ee.id)})},[]);return $.useEffect(()=>We.subscribe(ee=>{if(ee.dismiss){I(se=>se.map(K=>K.id===ee.id?{...K,delete:!0}:K));return}setTimeout(()=>{jc.flushSync(()=>{I(se=>{let K=se.findIndex(ae=>ae.id===ee.id);return K!==-1?[...se.slice(0,K),{...se[K],...ee},...se.slice(K+1)]:[ee,...se]})})})}),[]),$.useEffect(()=>{if(l!=="system"){z(l);return}if(l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;let ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:se})=>{z(se?"dark":"light")})}catch{ee.addListener(({matches:K})=>{try{z(K?"dark":"light")}catch(ae){console.error(ae)}})}},[l]),$.useEffect(()=>{O.length<=1&&F(!1)},[O]),$.useEffect(()=>{let ee=se=>{var K,ae;s.every(Ae=>se[Ae]||se.code===Ae)&&(F(!0),(K=H.current)==null||K.focus()),se.code==="Escape"&&(document.activeElement===H.current||(ae=H.current)!=null&&ae.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[s]),$.useEffect(()=>{if(H.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,Z.current=!1)}},[H.current]),$.createElement("section",{ref:e,"aria-label":`${C} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((ee,se)=>{var K;let[ae,Ae]=ee.split("-");return O.length?$.createElement("ol",{key:ee,dir:x==="auto"?ba():x,tabIndex:-1,ref:H,className:a,"data-sonner-toaster":!0,"data-theme":X,"data-y-position":ae,"data-lifted":U&&O.length>1&&!o,"data-x-position":Ae,style:{"--front-toast-height":`${((K=D[0])==null?void 0:K.height)||0}px`,"--width":`${cm}px`,"--gap":`${E}px`,...f,...pm(c,u)},onBlur:oe=>{Z.current&&!oe.currentTarget.contains(oe.relatedTarget)&&(Z.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:oe=>{oe.target instanceof HTMLElement&&oe.target.dataset.dismissible==="false"||Z.current||(Z.current=!0,M.current=oe.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{Y||F(!1)},onDragEnd:()=>F(!1),onPointerDown:oe=>{oe.target instanceof HTMLElement&&oe.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},O.filter(oe=>!oe.position&&se===0||oe.position===ee).map((oe,Je)=>{var Se,ze;return $.createElement(fm,{key:oe.id,icons:S,index:Je,toast:oe,defaultRichColors:m,duration:(Se=v==null?void 0:v.duration)!=null?Se:y,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:r,visibleToasts:b,closeButton:(ze=v==null?void 0:v.closeButton)!=null?ze:i,interacting:Y,position:ee,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:ce,toasts:O.filter($e=>$e.position==oe.position),heights:D.filter($e=>$e.position==oe.position),setHeights:B,expandByDefault:o,gap:E,loadingIcon:T,expanded:U,pauseWhenPageIsHidden:A,swipeDirections:t.swipeDirections})})):null}))});const gm=({...t})=>{const{theme:e="system"}=vl();return g.jsx(mm,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var ym=ui[" useId ".trim().toString()]||(()=>{}),vm=0;function xr(t){const[e,r]=p.useState(ym());return Nt(()=>{r(n=>n??String(vm++))},[t]),e?`radix-${e}`:""}const wm=["top","right","bottom","left"],rr=Math.min,Ke=Math.max,ms=Math.round,Yn=Math.floor,Ct=t=>({x:t,y:t}),bm={left:"right",right:"left",bottom:"top",top:"bottom"},xm={start:"end",end:"start"};function Mo(t,e,r){return Ke(t,rr(e,r))}function Dt(t,e){return typeof t=="function"?t(e):t}function Mt(t){return t.split("-")[0]}function an(t){return t.split("-")[1]}function bi(t){return t==="x"?"y":"x"}function xi(t){return t==="y"?"height":"width"}const _m=new Set(["top","bottom"]);function St(t){return _m.has(Mt(t))?"y":"x"}function _i(t){return bi(St(t))}function Em(t,e,r){r===void 0&&(r=!1);const n=an(t),s=_i(t),o=xi(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=gs(i)),[i,gs(i)]}function Sm(t){const e=gs(t);return[$o(t),e,$o(e)]}function $o(t){return t.replace(/start|end/g,e=>xm[e])}const xa=["left","right"],_a=["right","left"],Cm=["top","bottom"],Tm=["bottom","top"];function Rm(t,e,r){switch(t){case"top":case"bottom":return r?e?_a:xa:e?xa:_a;case"left":case"right":return e?Cm:Tm;default:return[]}}function Am(t,e,r,n){const s=an(t);let o=Rm(Mt(t),r==="start",n);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map($o)))),o}function gs(t){return t.replace(/left|right|bottom|top/g,e=>bm[e])}function km(t){return{top:0,right:0,bottom:0,left:0,...t}}function wl(t){return typeof t!="number"?km(t):{top:t,right:t,bottom:t,left:t}}function ys(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function Ea(t,e,r){let{reference:n,floating:s}=t;const o=St(e),i=_i(e),a=xi(i),c=Mt(e),u=o==="y",l=n.x+n.width/2-s.width/2,m=n.y+n.height/2-s.height/2,y=n[a]/2-s[a]/2;let f;switch(c){case"top":f={x:l,y:n.y-s.height};break;case"bottom":f={x:l,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:m};break;case"left":f={x:n.x-s.width,y:m};break;default:f={x:n.x,y:n.y}}switch(an(e)){case"start":f[i]-=y*(r&&u?-1:1);break;case"end":f[i]+=y*(r&&u?-1:1);break}return f}const Pm=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:i}=r,a=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:l,y:m}=Ea(u,n,c),y=n,f={},b=0;for(let v=0;v<a.length;v++){const{name:x,fn:E}=a[v],{x:T,y:S,data:C,reset:A}=await E({x:l,y:m,initialPlacement:n,placement:y,strategy:s,middlewareData:f,rects:u,platform:i,elements:{reference:t,floating:e}});l=T??l,m=S??m,f={...f,[x]:{...f[x],...C}},A&&b<=50&&(b++,typeof A=="object"&&(A.placement&&(y=A.placement),A.rects&&(u=A.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):A.rects),{x:l,y:m}=Ea(u,y,c)),v=-1)}return{x:l,y:m,placement:y,strategy:s,middlewareData:f}};async function xn(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:o,rects:i,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:l="viewport",elementContext:m="floating",altBoundary:y=!1,padding:f=0}=Dt(e,t),b=wl(f),x=a[y?m==="floating"?"reference":"floating":m],E=ys(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(x)))==null||r?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:l,strategy:c})),T=m==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),C=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},A=ys(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:S,strategy:c}):T);return{top:(E.top-A.top+b.top)/C.y,bottom:(A.bottom-E.bottom+b.bottom)/C.y,left:(E.left-A.left+b.left)/C.x,right:(A.right-E.right+b.right)/C.x}}const Om=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:o,platform:i,elements:a,middlewareData:c}=e,{element:u,padding:l=0}=Dt(t,e)||{};if(u==null)return{};const m=wl(l),y={x:r,y:n},f=_i(s),b=xi(f),v=await i.getDimensions(u),x=f==="y",E=x?"top":"left",T=x?"bottom":"right",S=x?"clientHeight":"clientWidth",C=o.reference[b]+o.reference[f]-y[f]-o.floating[b],A=y[f]-o.reference[f],O=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let I=O?O[S]:0;(!I||!await(i.isElement==null?void 0:i.isElement(O)))&&(I=a.floating[S]||o.floating[b]);const P=C/2-A/2,D=I/2-v[b]/2-1,B=rr(m[E],D),U=rr(m[T],D),F=B,Y=I-v[b]-U,L=I/2-v[b]/2+P,X=Mo(F,L,Y),z=!c.arrow&&an(s)!=null&&L!==X&&o.reference[b]/2-(L<F?B:U)-v[b]/2<0,H=z?L<F?L-F:L-Y:0;return{[f]:y[f]+H,data:{[f]:X,centerOffset:L-X-H,...z&&{alignmentOffset:H}},reset:z}}}),Im=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:l=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...x}=Dt(t,e);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const E=Mt(s),T=St(a),S=Mt(a)===a,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),A=y||(S||!v?[gs(a)]:Sm(a)),O=b!=="none";!y&&O&&A.push(...Am(a,v,b,C));const I=[a,...A],P=await xn(e,x),D=[];let B=((n=o.flip)==null?void 0:n.overflows)||[];if(l&&D.push(P[E]),m){const L=Em(s,i,C);D.push(P[L[0]],P[L[1]])}if(B=[...B,{placement:s,overflows:D}],!D.every(L=>L<=0)){var U,F;const L=(((U=o.flip)==null?void 0:U.index)||0)+1,X=I[L];if(X&&(!(m==="alignment"?T!==St(X):!1)||B.every(V=>St(V.placement)===T?V.overflows[0]>0:!0)))return{data:{index:L,overflows:B},reset:{placement:X}};let z=(F=B.filter(H=>H.overflows[0]<=0).sort((H,V)=>H.overflows[1]-V.overflows[1])[0])==null?void 0:F.placement;if(!z)switch(f){case"bestFit":{var Y;const H=(Y=B.filter(V=>{if(O){const M=St(V.placement);return M===T||M==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(M=>M>0).reduce((M,Z)=>M+Z,0)]).sort((V,M)=>V[1]-M[1])[0])==null?void 0:Y[0];H&&(z=H);break}case"initialPlacement":z=a;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function Sa(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ca(t){return wm.some(e=>t[e]>=0)}const jm=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=Dt(t,e);switch(n){case"referenceHidden":{const o=await xn(e,{...s,elementContext:"reference"}),i=Sa(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ca(i)}}}case"escaped":{const o=await xn(e,{...s,altBoundary:!0}),i=Sa(o,r.floating);return{data:{escapedOffsets:i,escaped:Ca(i)}}}default:return{}}}}},bl=new Set(["left","top"]);async function Nm(t,e){const{placement:r,platform:n,elements:s}=t,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=Mt(r),a=an(r),c=St(r)==="y",u=bl.has(i)?-1:1,l=o&&c?-1:1,m=Dt(e,t);let{mainAxis:y,crossAxis:f,alignmentAxis:b}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return a&&typeof b=="number"&&(f=a==="end"?b*-1:b),c?{x:f*l,y:y*u}:{x:y*u,y:f*l}}const Dm=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:o,placement:i,middlewareData:a}=e,c=await Nm(e,t);return i===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},Mm=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:x=>{let{x:E,y:T}=x;return{x:E,y:T}}},...c}=Dt(t,e),u={x:r,y:n},l=await xn(e,c),m=St(Mt(s)),y=bi(m);let f=u[y],b=u[m];if(o){const x=y==="y"?"top":"left",E=y==="y"?"bottom":"right",T=f+l[x],S=f-l[E];f=Mo(T,f,S)}if(i){const x=m==="y"?"top":"left",E=m==="y"?"bottom":"right",T=b+l[x],S=b-l[E];b=Mo(T,b,S)}const v=a.fn({...e,[y]:f,[m]:b});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[y]:o,[m]:i}}}}}},$m=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:o,middlewareData:i}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=Dt(t,e),l={x:r,y:n},m=St(s),y=bi(m);let f=l[y],b=l[m];const v=Dt(a,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const S=y==="y"?"height":"width",C=o.reference[y]-o.floating[S]+x.mainAxis,A=o.reference[y]+o.reference[S]-x.mainAxis;f<C?f=C:f>A&&(f=A)}if(u){var E,T;const S=y==="y"?"width":"height",C=bl.has(Mt(s)),A=o.reference[m]-o.floating[S]+(C&&((E=i.offset)==null?void 0:E[m])||0)+(C?0:x.crossAxis),O=o.reference[m]+o.reference[S]+(C?0:((T=i.offset)==null?void 0:T[m])||0)-(C?x.crossAxis:0);b<A?b=A:b>O&&(b=O)}return{[y]:f,[m]:b}}}},Lm=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:o,platform:i,elements:a}=e,{apply:c=()=>{},...u}=Dt(t,e),l=await xn(e,u),m=Mt(s),y=an(s),f=St(s)==="y",{width:b,height:v}=o.floating;let x,E;m==="top"||m==="bottom"?(x=m,E=y===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(E=m,x=y==="end"?"top":"bottom");const T=v-l.top-l.bottom,S=b-l.left-l.right,C=rr(v-l[x],T),A=rr(b-l[E],S),O=!e.middlewareData.shift;let I=C,P=A;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(P=S),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(I=T),O&&!y){const B=Ke(l.left,0),U=Ke(l.right,0),F=Ke(l.top,0),Y=Ke(l.bottom,0);f?P=b-2*(B!==0||U!==0?B+U:Ke(l.left,l.right)):I=v-2*(F!==0||Y!==0?F+Y:Ke(l.top,l.bottom))}await c({...e,availableWidth:P,availableHeight:I});const D=await i.getDimensions(a.floating);return b!==D.width||v!==D.height?{reset:{rects:!0}}:{}}}};function js(){return typeof window<"u"}function cn(t){return xl(t)?(t.nodeName||"").toLowerCase():"#document"}function He(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function At(t){var e;return(e=(xl(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function xl(t){return js()?t instanceof Node||t instanceof He(t).Node:!1}function ft(t){return js()?t instanceof Element||t instanceof He(t).Element:!1}function Tt(t){return js()?t instanceof HTMLElement||t instanceof He(t).HTMLElement:!1}function Ta(t){return!js()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof He(t).ShadowRoot}const Fm=new Set(["inline","contents"]);function Fn(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=pt(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!Fm.has(s)}const Bm=new Set(["table","td","th"]);function Um(t){return Bm.has(cn(t))}const Vm=[":popover-open",":modal"];function Ns(t){return Vm.some(e=>{try{return t.matches(e)}catch{return!1}})}const Wm=["transform","translate","scale","rotate","perspective"],zm=["transform","translate","scale","rotate","perspective","filter"],qm=["paint","layout","strict","content"];function Ei(t){const e=Si(),r=ft(t)?pt(t):t;return Wm.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||zm.some(n=>(r.willChange||"").includes(n))||qm.some(n=>(r.contain||"").includes(n))}function Km(t){let e=nr(t);for(;Tt(e)&&!rn(e);){if(Ei(e))return e;if(Ns(e))return null;e=nr(e)}return null}function Si(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Hm=new Set(["html","body","#document"]);function rn(t){return Hm.has(cn(t))}function pt(t){return He(t).getComputedStyle(t)}function Ds(t){return ft(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function nr(t){if(cn(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ta(t)&&t.host||At(t);return Ta(e)?e.host:e}function _l(t){const e=nr(t);return rn(e)?t.ownerDocument?t.ownerDocument.body:t.body:Tt(e)&&Fn(e)?e:_l(e)}function _n(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=_l(t),o=s===((n=t.ownerDocument)==null?void 0:n.body),i=He(s);if(o){const a=Lo(i);return e.concat(i,i.visualViewport||[],Fn(s)?s:[],a&&r?_n(a):[])}return e.concat(s,_n(s,[],r))}function Lo(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function El(t){const e=pt(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Tt(t),o=s?t.offsetWidth:r,i=s?t.offsetHeight:n,a=ms(r)!==o||ms(n)!==i;return a&&(r=o,n=i),{width:r,height:n,$:a}}function Ci(t){return ft(t)?t:t.contextElement}function qr(t){const e=Ci(t);if(!Tt(e))return Ct(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:o}=El(e);let i=(o?ms(r.width):r.width)/n,a=(o?ms(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Gm=Ct(0);function Sl(t){const e=He(t);return!Si()||!e.visualViewport?Gm:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Jm(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==He(t)?!1:e}function _r(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),o=Ci(t);let i=Ct(1);e&&(n?ft(n)&&(i=qr(n)):i=qr(t));const a=Jm(o,r,n)?Sl(o):Ct(0);let c=(s.left+a.x)/i.x,u=(s.top+a.y)/i.y,l=s.width/i.x,m=s.height/i.y;if(o){const y=He(o),f=n&&ft(n)?He(n):n;let b=y,v=Lo(b);for(;v&&n&&f!==b;){const x=qr(v),E=v.getBoundingClientRect(),T=pt(v),S=E.left+(v.clientLeft+parseFloat(T.paddingLeft))*x.x,C=E.top+(v.clientTop+parseFloat(T.paddingTop))*x.y;c*=x.x,u*=x.y,l*=x.x,m*=x.y,c+=S,u+=C,b=He(v),v=Lo(b)}}return ys({width:l,height:m,x:c,y:u})}function Ms(t,e){const r=Ds(t).scrollLeft;return e?e.left+r:_r(At(t)).left+r}function Cl(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-Ms(t,r),s=r.top+e.scrollTop;return{x:n,y:s}}function Ym(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const o=s==="fixed",i=At(n),a=e?Ns(e.floating):!1;if(n===i||a&&o)return r;let c={scrollLeft:0,scrollTop:0},u=Ct(1);const l=Ct(0),m=Tt(n);if((m||!m&&!o)&&((cn(n)!=="body"||Fn(i))&&(c=Ds(n)),Tt(n))){const f=_r(n);u=qr(n),l.x=f.x+n.clientLeft,l.y=f.y+n.clientTop}const y=i&&!m&&!o?Cl(i,c):Ct(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+l.x+y.x,y:r.y*u.y-c.scrollTop*u.y+l.y+y.y}}function Qm(t){return Array.from(t.getClientRects())}function Xm(t){const e=At(t),r=Ds(t),n=t.ownerDocument.body,s=Ke(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=Ke(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Ms(t);const a=-r.scrollTop;return pt(n).direction==="rtl"&&(i+=Ke(e.clientWidth,n.clientWidth)-s),{width:s,height:o,x:i,y:a}}const Ra=25;function Zm(t,e){const r=He(t),n=At(t),s=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,a=0,c=0;if(s){o=s.width,i=s.height;const l=Si();(!l||l&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}const u=Ms(n);if(u<=0){const l=n.ownerDocument,m=l.body,y=getComputedStyle(m),f=l.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,b=Math.abs(n.clientWidth-m.clientWidth-f);b<=Ra&&(o-=b)}else u<=Ra&&(o+=u);return{width:o,height:i,x:a,y:c}}const eg=new Set(["absolute","fixed"]);function tg(t,e){const r=_r(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,o=Tt(t)?qr(t):Ct(1),i=t.clientWidth*o.x,a=t.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:i,height:a,x:c,y:u}}function Aa(t,e,r){let n;if(e==="viewport")n=Zm(t,r);else if(e==="document")n=Xm(At(t));else if(ft(e))n=tg(e,r);else{const s=Sl(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ys(n)}function Tl(t,e){const r=nr(t);return r===e||!ft(r)||rn(r)?!1:pt(r).position==="fixed"||Tl(r,e)}function rg(t,e){const r=e.get(t);if(r)return r;let n=_n(t,[],!1).filter(a=>ft(a)&&cn(a)!=="body"),s=null;const o=pt(t).position==="fixed";let i=o?nr(t):t;for(;ft(i)&&!rn(i);){const a=pt(i),c=Ei(i);!c&&a.position==="fixed"&&(s=null),(o?!c&&!s:!c&&a.position==="static"&&!!s&&eg.has(s.position)||Fn(i)&&!c&&Tl(t,i))?n=n.filter(l=>l!==i):s=a,i=nr(i)}return e.set(t,n),n}function ng(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const i=[...r==="clippingAncestors"?Ns(e)?[]:rg(e,this._c):[].concat(r),n],a=i[0],c=i.reduce((u,l)=>{const m=Aa(e,l,s);return u.top=Ke(m.top,u.top),u.right=rr(m.right,u.right),u.bottom=rr(m.bottom,u.bottom),u.left=Ke(m.left,u.left),u},Aa(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function sg(t){const{width:e,height:r}=El(t);return{width:e,height:r}}function og(t,e,r){const n=Tt(e),s=At(e),o=r==="fixed",i=_r(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const c=Ct(0);function u(){c.x=Ms(s)}if(n||!n&&!o)if((cn(e)!=="body"||Fn(s))&&(a=Ds(e)),n){const f=_r(e,!0,o,e);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else s&&u();o&&!n&&s&&u();const l=s&&!n&&!o?Cl(s,a):Ct(0),m=i.left+a.scrollLeft-c.x-l.x,y=i.top+a.scrollTop-c.y-l.y;return{x:m,y,width:i.width,height:i.height}}function lo(t){return pt(t).position==="static"}function ka(t,e){if(!Tt(t)||pt(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return At(t)===r&&(r=r.ownerDocument.body),r}function Rl(t,e){const r=He(t);if(Ns(t))return r;if(!Tt(t)){let s=nr(t);for(;s&&!rn(s);){if(ft(s)&&!lo(s))return s;s=nr(s)}return r}let n=ka(t,e);for(;n&&Um(n)&&lo(n);)n=ka(n,e);return n&&rn(n)&&lo(n)&&!Ei(n)?r:n||Km(t)||r}const ig=async function(t){const e=this.getOffsetParent||Rl,r=this.getDimensions,n=await r(t.floating);return{reference:og(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function ag(t){return pt(t).direction==="rtl"}const cg={convertOffsetParentRelativeRectToViewportRelativeRect:Ym,getDocumentElement:At,getClippingRect:ng,getOffsetParent:Rl,getElementRects:ig,getClientRects:Qm,getDimensions:sg,getScale:qr,isElement:ft,isRTL:ag};function Al(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function lg(t,e){let r=null,n;const s=At(t);function o(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function i(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),o();const u=t.getBoundingClientRect(),{left:l,top:m,width:y,height:f}=u;if(a||e(),!y||!f)return;const b=Yn(m),v=Yn(s.clientWidth-(l+y)),x=Yn(s.clientHeight-(m+f)),E=Yn(l),S={rootMargin:-b+"px "+-v+"px "+-x+"px "+-E+"px",threshold:Ke(0,rr(1,c))||1};let C=!0;function A(O){const I=O[0].intersectionRatio;if(I!==c){if(!C)return i();I?i(!1,I):n=setTimeout(()=>{i(!1,1e-7)},1e3)}I===1&&!Al(u,t.getBoundingClientRect())&&i(),C=!1}try{r=new IntersectionObserver(A,{...S,root:s.ownerDocument})}catch{r=new IntersectionObserver(A,S)}r.observe(t)}return i(!0),o}function ug(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Ci(t),l=s||o?[...u?_n(u):[],..._n(e)]:[];l.forEach(E=>{s&&E.addEventListener("scroll",r,{passive:!0}),o&&E.addEventListener("resize",r)});const m=u&&a?lg(u,r):null;let y=-1,f=null;i&&(f=new ResizeObserver(E=>{let[T]=E;T&&T.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var S;(S=f)==null||S.observe(e)})),r()}),u&&!c&&f.observe(u),f.observe(e));let b,v=c?_r(t):null;c&&x();function x(){const E=_r(t);v&&!Al(v,E)&&r(),v=E,b=requestAnimationFrame(x)}return r(),()=>{var E;l.forEach(T=>{s&&T.removeEventListener("scroll",r),o&&T.removeEventListener("resize",r)}),m==null||m(),(E=f)==null||E.disconnect(),f=null,c&&cancelAnimationFrame(b)}}const dg=Dm,hg=Mm,fg=Im,pg=Lm,mg=jm,Pa=Om,gg=$m,yg=(t,e,r)=>{const n=new Map,s={platform:cg,...r},o={...s.platform,_c:n};return Pm(t,e,{...s,platform:o})};var vg=typeof document<"u",wg=function(){},us=vg?p.useLayoutEffect:wg;function vs(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!vs(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&t.$$typeof)&&!vs(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function kl(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Oa(t,e){const r=kl(t);return Math.round(e*r)/r}function uo(t){const e=p.useRef(t);return us(()=>{e.current=t}),e}function bg(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:c,open:u}=t,[l,m]=p.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[y,f]=p.useState(n);vs(y,n)||f(n);const[b,v]=p.useState(null),[x,E]=p.useState(null),T=p.useCallback(V=>{V!==O.current&&(O.current=V,v(V))},[]),S=p.useCallback(V=>{V!==I.current&&(I.current=V,E(V))},[]),C=o||b,A=i||x,O=p.useRef(null),I=p.useRef(null),P=p.useRef(l),D=c!=null,B=uo(c),U=uo(s),F=uo(u),Y=p.useCallback(()=>{if(!O.current||!I.current)return;const V={placement:e,strategy:r,middleware:y};U.current&&(V.platform=U.current),yg(O.current,I.current,V).then(M=>{const Z={...M,isPositioned:F.current!==!1};L.current&&!vs(P.current,Z)&&(P.current=Z,Rs.flushSync(()=>{m(Z)}))})},[y,e,r,U,F]);us(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,m(V=>({...V,isPositioned:!1})))},[u]);const L=p.useRef(!1);us(()=>(L.current=!0,()=>{L.current=!1}),[]),us(()=>{if(C&&(O.current=C),A&&(I.current=A),C&&A){if(B.current)return B.current(C,A,Y);Y()}},[C,A,Y,B,D]);const X=p.useMemo(()=>({reference:O,floating:I,setReference:T,setFloating:S}),[T,S]),z=p.useMemo(()=>({reference:C,floating:A}),[C,A]),H=p.useMemo(()=>{const V={position:r,left:0,top:0};if(!z.floating)return V;const M=Oa(z.floating,l.x),Z=Oa(z.floating,l.y);return a?{...V,transform:"translate("+M+"px, "+Z+"px)",...kl(z.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:M,top:Z}},[r,a,z.floating,l.x,l.y]);return p.useMemo(()=>({...l,update:Y,refs:X,elements:z,floatingStyles:H}),[l,Y,X,z,H])}const xg=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Pa({element:n.current,padding:s}).fn(r):{}:n?Pa({element:n,padding:s}).fn(r):{}}}},_g=(t,e)=>({...dg(t),options:[t,e]}),Eg=(t,e)=>({...hg(t),options:[t,e]}),Sg=(t,e)=>({...gg(t),options:[t,e]}),Cg=(t,e)=>({...fg(t),options:[t,e]}),Tg=(t,e)=>({...pg(t),options:[t,e]}),Rg=(t,e)=>({...mg(t),options:[t,e]}),Ag=(t,e)=>({...xg(t),options:[t,e]});var kg="Arrow",Pl=p.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...o}=t;return g.jsx(le.svg,{...o,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});Pl.displayName=kg;var Pg=Pl;function Ol(t){const[e,r]=p.useState(void 0);return Nt(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,a=u.blockSize}else i=t.offsetWidth,a=t.offsetHeight;r({width:i,height:a})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Ti="Popper",[Il,$s]=$t(Ti),[Og,jl]=Il(Ti),Nl=t=>{const{__scopePopper:e,children:r}=t,[n,s]=p.useState(null);return g.jsx(Og,{scope:e,anchor:n,onAnchorChange:s,children:r})};Nl.displayName=Ti;var Dl="PopperAnchor",Ml=p.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,o=jl(Dl,r),i=p.useRef(null),a=fe(e,i),c=p.useRef(null);return p.useEffect(()=>{const u=c.current;c.current=(n==null?void 0:n.current)||i.current,u!==c.current&&o.onAnchorChange(c.current)}),n?null:g.jsx(le.div,{...s,ref:a})});Ml.displayName=Dl;var Ri="PopperContent",[Ig,jg]=Il(Ri),$l=p.forwardRef((t,e)=>{var oe,Je,Se,ze,$e,gt;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:l=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:f="optimized",onPlaced:b,...v}=t,x=jl(Ri,r),[E,T]=p.useState(null),S=fe(e,tt=>T(tt)),[C,A]=p.useState(null),O=Ol(C),I=(O==null?void 0:O.width)??0,P=(O==null?void 0:O.height)??0,D=n+(o!=="center"?"-"+o:""),B=typeof l=="number"?l:{top:0,right:0,bottom:0,left:0,...l},U=Array.isArray(u)?u:[u],F=U.length>0,Y={padding:B,boundary:U.filter(Dg),altBoundary:F},{refs:L,floatingStyles:X,placement:z,isPositioned:H,middlewareData:V}=bg({strategy:"fixed",placement:D,whileElementsMounted:(...tt)=>ug(...tt,{animationFrame:f==="always"}),elements:{reference:x.anchor},middleware:[_g({mainAxis:s+P,alignmentAxis:i}),c&&Eg({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Sg():void 0,...Y}),c&&Cg({...Y}),Tg({...Y,apply:({elements:tt,rects:Tr,availableWidth:Rr,availableHeight:rt})=>{const{width:kt,height:or}=Tr.reference,Ft=tt.floating.style;Ft.setProperty("--radix-popper-available-width",`${Rr}px`),Ft.setProperty("--radix-popper-available-height",`${rt}px`),Ft.setProperty("--radix-popper-anchor-width",`${kt}px`),Ft.setProperty("--radix-popper-anchor-height",`${or}px`)}}),C&&Ag({element:C,padding:a}),Mg({arrowWidth:I,arrowHeight:P}),y&&Rg({strategy:"referenceHidden",...Y})]}),[M,Z]=Bl(z),ce=Ge(b);Nt(()=>{H&&(ce==null||ce())},[H,ce]);const ee=(oe=V.arrow)==null?void 0:oe.x,se=(Je=V.arrow)==null?void 0:Je.y,K=((Se=V.arrow)==null?void 0:Se.centerOffset)!==0,[ae,Ae]=p.useState();return Nt(()=>{E&&Ae(window.getComputedStyle(E).zIndex)},[E]),g.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:H?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[(ze=V.transformOrigin)==null?void 0:ze.x,($e=V.transformOrigin)==null?void 0:$e.y].join(" "),...((gt=V.hide)==null?void 0:gt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:g.jsx(Ig,{scope:r,placedSide:M,onArrowChange:A,arrowX:ee,arrowY:se,shouldHideArrow:K,children:g.jsx(le.div,{"data-side":M,"data-align":Z,...v,ref:S,style:{...v.style,animation:H?void 0:"none"}})})})});$l.displayName=Ri;var Ll="PopperArrow",Ng={top:"bottom",right:"left",bottom:"top",left:"right"},Fl=p.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,o=jg(Ll,n),i=Ng[o.placedSide];return g.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:g.jsx(Pg,{...s,ref:r,style:{...s.style,display:"block"}})})});Fl.displayName=Ll;function Dg(t){return t!==null}var Mg=t=>({name:"transformOrigin",options:t,fn(e){var x,E,T;const{placement:r,rects:n,middlewareData:s}=e,i=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,l]=Bl(r),m={start:"0%",center:"50%",end:"100%"}[l],y=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,f=(((T=s.arrow)==null?void 0:T.y)??0)+c/2;let b="",v="";return u==="bottom"?(b=i?m:`${y}px`,v=`${-c}px`):u==="top"?(b=i?m:`${y}px`,v=`${n.floating.height+c}px`):u==="right"?(b=`${-c}px`,v=i?m:`${f}px`):u==="left"&&(b=`${n.floating.width+c}px`,v=i?m:`${f}px`),{data:{x:b,y:v}}}});function Bl(t){const[e,r="center"]=t.split("-");return[e,r]}var Ul=Nl,Vl=Ml,Wl=$l,zl=Fl,$g=Symbol("radix.slottable");function Lg(t){const e=({children:r})=>g.jsx(g.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=$g,e}var[Ls]=$t("Tooltip",[$s]),Fs=$s(),ql="TooltipProvider",Fg=700,Fo="tooltip.open",[Bg,Ai]=Ls(ql),Kl=t=>{const{__scopeTooltip:e,delayDuration:r=Fg,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:o}=t,i=p.useRef(!0),a=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),g.jsx(Bg,{scope:e,isOpenDelayedRef:i,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:p.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:o})};Kl.displayName=ql;var En="Tooltip",[Ug,Bs]=Ls(En),Hl=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:s,onOpenChange:o,disableHoverableContent:i,delayDuration:a}=t,c=Ai(En,t.__scopeTooltip),u=Fs(e),[l,m]=p.useState(null),y=xr(),f=p.useRef(0),b=i??c.disableHoverableContent,v=a??c.delayDuration,x=p.useRef(!1),[E,T]=sn({prop:n,defaultProp:s??!1,onChange:I=>{I?(c.onOpen(),document.dispatchEvent(new CustomEvent(Fo))):c.onClose(),o==null||o(I)},caller:En}),S=p.useMemo(()=>E?x.current?"delayed-open":"instant-open":"closed",[E]),C=p.useCallback(()=>{window.clearTimeout(f.current),f.current=0,x.current=!1,T(!0)},[T]),A=p.useCallback(()=>{window.clearTimeout(f.current),f.current=0,T(!1)},[T]),O=p.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{x.current=!0,T(!0),f.current=0},v)},[v,T]);return p.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),g.jsx(Ul,{...u,children:g.jsx(Ug,{scope:e,contentId:y,open:E,stateAttribute:S,trigger:l,onTriggerChange:m,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?O():C()},[c.isOpenDelayedRef,O,C]),onTriggerLeave:p.useCallback(()=>{b?A():(window.clearTimeout(f.current),f.current=0)},[A,b]),onOpen:C,onClose:A,disableHoverableContent:b,children:r})})};Hl.displayName=En;var Bo="TooltipTrigger",Gl=p.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Bs(Bo,r),o=Ai(Bo,r),i=Fs(r),a=p.useRef(null),c=fe(e,a,s.onTriggerChange),u=p.useRef(!1),l=p.useRef(!1),m=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),g.jsx(Vl,{asChild:!0,...i,children:g.jsx(le.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:W(t.onPointerMove,y=>{y.pointerType!=="touch"&&!l.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),l.current=!0)}),onPointerLeave:W(t.onPointerLeave,()=>{s.onTriggerLeave(),l.current=!1}),onPointerDown:W(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:W(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:W(t.onBlur,s.onClose),onClick:W(t.onClick,s.onClose)})})});Gl.displayName=Bo;var Vg="TooltipPortal",[kE,Wg]=Ls(Vg,{forceMount:void 0}),nn="TooltipContent",Jl=p.forwardRef((t,e)=>{const r=Wg(nn,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...o}=t,i=Bs(nn,t.__scopeTooltip);return g.jsx(Rt,{present:n||i.open,children:i.disableHoverableContent?g.jsx(Yl,{side:s,...o,ref:e}):g.jsx(zg,{side:s,...o,ref:e})})}),zg=p.forwardRef((t,e)=>{const r=Bs(nn,t.__scopeTooltip),n=Ai(nn,t.__scopeTooltip),s=p.useRef(null),o=fe(e,s),[i,a]=p.useState(null),{trigger:c,onClose:u}=r,l=s.current,{onPointerInTransitChange:m}=n,y=p.useCallback(()=>{a(null),m(!1)},[m]),f=p.useCallback((b,v)=>{const x=b.currentTarget,E={x:b.clientX,y:b.clientY},T=Jg(E,x.getBoundingClientRect()),S=Yg(E,T),C=Qg(v.getBoundingClientRect()),A=Zg([...S,...C]);a(A),m(!0)},[m]);return p.useEffect(()=>()=>y(),[y]),p.useEffect(()=>{if(c&&l){const b=x=>f(x,l),v=x=>f(x,c);return c.addEventListener("pointerleave",b),l.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",b),l.removeEventListener("pointerleave",v)}}},[c,l,f,y]),p.useEffect(()=>{if(i){const b=v=>{const x=v.target,E={x:v.clientX,y:v.clientY},T=(c==null?void 0:c.contains(x))||(l==null?void 0:l.contains(x)),S=!Xg(E,i);T?y():S&&(y(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,l,i,u,y]),g.jsx(Yl,{...t,ref:o})}),[qg,Kg]=Ls(En,{isInside:!1}),Hg=Lg("TooltipContent"),Yl=p.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...a}=t,c=Bs(nn,r),u=Fs(r),{onClose:l}=c;return p.useEffect(()=>(document.addEventListener(Fo,l),()=>document.removeEventListener(Fo,l)),[l]),p.useEffect(()=>{if(c.trigger){const m=y=>{const f=y.target;f!=null&&f.contains(c.trigger)&&l()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,l]),g.jsx($n,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:l,children:g.jsxs(Wl,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(Hg,{children:n}),g.jsx(qg,{scope:r,isInside:!0,children:g.jsx(Cf,{id:c.contentId,role:"tooltip",children:s||n})})]})})});Jl.displayName=nn;var Ql="TooltipArrow",Gg=p.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Fs(r);return Kg(Ql,r).isInside?null:g.jsx(zl,{...s,...n,ref:e})});Gg.displayName=Ql;function Jg(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(r,n,s,o)){case o:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Yg(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function Qg(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function Xg(t,e){const{x:r,y:n}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const a=e[o],c=e[i],u=a.x,l=a.y,m=c.x,y=c.y;l>n!=y>n&&r<(m-u)*(n-l)/(y-l)+u&&(s=!s)}return s}function Zg(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),ey(e)}function ey(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const o=e[e.length-1],i=e[e.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var ty=Kl,ry=Hl,ny=Gl,Xl=Jl;const sy=ty,PE=ry,OE=ny,oy=p.forwardRef(({className:t,sideOffset:e=4,...r},n)=>g.jsx(Xl,{ref:n,sideOffset:e,className:be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));oy.displayName=Xl.displayName;var Us=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},iy={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Yt,li,Sc,ay=(Sc=class{constructor(){ie(this,Yt,iy);ie(this,li,!1)}setTimeoutProvider(t){Q(this,Yt,t)}setTimeout(t,e){return j(this,Yt).setTimeout(t,e)}clearTimeout(t){j(this,Yt).clearTimeout(t)}setInterval(t,e){return j(this,Yt).setInterval(t,e)}clearInterval(t){j(this,Yt).clearInterval(t)}},Yt=new WeakMap,li=new WeakMap,Sc),Uo=new ay;function cy(t){setTimeout(t,0)}var Vs=typeof window>"u"||"Deno"in globalThis;function lt(){}function ly(t,e){return typeof t=="function"?t(e):t}function uy(t){return typeof t=="number"&&t>=0&&t!==1/0}function dy(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Vo(t,e){return typeof t=="function"?t(e):t}function hy(t,e){return typeof t=="function"?t(e):t}function Ia(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:i,stale:a}=t;if(i){if(n){if(e.queryHash!==ki(i,e.options))return!1}else if(!Cn(e.queryKey,i))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||o&&!o(e))}function ja(t,e){const{exact:r,status:n,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Sn(e.options.mutationKey)!==Sn(o))return!1}else if(!Cn(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function ki(t,e){return((e==null?void 0:e.queryKeyHashFn)||Sn)(t)}function Sn(t){return JSON.stringify(t,(e,r)=>Wo(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Cn(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Cn(t[r],e[r])):!1}var fy=Object.prototype.hasOwnProperty;function Zl(t,e,r=0){if(t===e)return t;if(r>500)return e;const n=Na(t)&&Na(e);if(!n&&!(Wo(t)&&Wo(e)))return e;const o=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),a=i.length,c=n?new Array(a):{};let u=0;for(let l=0;l<a;l++){const m=n?l:i[l],y=t[m],f=e[m];if(y===f){c[m]=y,(n?l<o:fy.call(t,m))&&u++;continue}if(y===null||f===null||typeof y!="object"||typeof f!="object"){c[m]=f;continue}const b=Zl(y,f,r+1);c[m]=b,b===y&&u++}return o===a&&u===o?t:c}function IE(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Na(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Wo(t){if(!Da(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!Da(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Da(t){return Object.prototype.toString.call(t)==="[object Object]"}function py(t){return new Promise(e=>{Uo.setTimeout(e,t)})}function my(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Zl(t,e):e}function gy(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function yy(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Pi=Symbol();function eu(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Pi?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function jE(t,e){return typeof t=="function"?t(...e):!!t}function vy(t,e,r){let n=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),n||(n=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),t}var mr,Qt,Gr,Cc,wy=(Cc=class extends Us{constructor(){super();ie(this,mr);ie(this,Qt);ie(this,Gr);Q(this,Gr,e=>{if(!Vs&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){j(this,Qt)||this.setEventListener(j(this,Gr))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,Qt))==null||e.call(this),Q(this,Qt,void 0))}setEventListener(e){var r;Q(this,Gr,e),(r=j(this,Qt))==null||r.call(this),Q(this,Qt,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){j(this,mr)!==e&&(Q(this,mr,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof j(this,mr)=="boolean"?j(this,mr):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},mr=new WeakMap,Qt=new WeakMap,Gr=new WeakMap,Cc),tu=new wy;function by(){let t,e;const r=new Promise((s,o)=>{t=s,e=o});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}var xy=cy;function _y(){let t=[],e=0,r=a=>{a()},n=a=>{a()},s=xy;const o=a=>{e?t.push(a):s(()=>{r(a)})},i=()=>{const a=t;t=[],a.length&&s(()=>{n(()=>{a.forEach(c=>{r(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||i()}return c},batchCalls:a=>(...c)=>{o(()=>{a(...c)})},schedule:o,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var Fe=_y(),Jr,Xt,Yr,Tc,Ey=(Tc=class extends Us{constructor(){super();ie(this,Jr,!0);ie(this,Xt);ie(this,Yr);Q(this,Yr,e=>{if(!Vs&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){j(this,Xt)||this.setEventListener(j(this,Yr))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,Xt))==null||e.call(this),Q(this,Xt,void 0))}setEventListener(e){var r;Q(this,Yr,e),(r=j(this,Xt))==null||r.call(this),Q(this,Xt,e(this.setOnline.bind(this)))}setOnline(e){j(this,Jr)!==e&&(Q(this,Jr,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return j(this,Jr)}},Jr=new WeakMap,Xt=new WeakMap,Yr=new WeakMap,Tc),ws=new Ey;function Sy(t){return Math.min(1e3*2**t,3e4)}function ru(t){return(t??"online")==="online"?ws.isOnline():!0}var zo=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function nu(t){let e=!1,r=0,n;const s=by(),o=()=>s.status!=="pending",i=v=>{var x;if(!o()){const E=new zo(v);y(E),(x=t.onCancel)==null||x.call(t,E)}},a=()=>{e=!0},c=()=>{e=!1},u=()=>tu.isFocused()&&(t.networkMode==="always"||ws.isOnline())&&t.canRun(),l=()=>ru(t.networkMode)&&t.canRun(),m=v=>{o()||(n==null||n(),s.resolve(v))},y=v=>{o()||(n==null||n(),s.reject(v))},f=()=>new Promise(v=>{var x;n=E=>{(o()||u())&&v(E)},(x=t.onPause)==null||x.call(t)}).then(()=>{var v;n=void 0,o()||(v=t.onContinue)==null||v.call(t)}),b=()=>{if(o())return;let v;const x=r===0?t.initialPromise:void 0;try{v=x??t.fn()}catch(E){v=Promise.reject(E)}Promise.resolve(v).then(m).catch(E=>{var O;if(o())return;const T=t.retry??(Vs?0:3),S=t.retryDelay??Sy,C=typeof S=="function"?S(r,E):S,A=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,E);if(e||!A){y(E);return}r++,(O=t.onFail)==null||O.call(t,r,E),py(C).then(()=>u()?void 0:f()).then(()=>{e?y(E):b()})})};return{promise:s,status:()=>s.status,cancel:i,continue:()=>(n==null||n(),s),cancelRetry:a,continueRetry:c,canStart:l,start:()=>(l()?b():f().then(b),s)}}var gr,Rc,su=(Rc=class{constructor(){ie(this,gr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),uy(this.gcTime)&&Q(this,gr,Uo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Vs?1/0:5*60*1e3))}clearGcTimeout(){j(this,gr)&&(Uo.clearTimeout(j(this,gr)),Q(this,gr,void 0))}},gr=new WeakMap,Rc),yr,Qr,Xe,vr,Re,Nn,wr,ut,Ot,Ac,Cy=(Ac=class extends su{constructor(e){super();ie(this,ut);ie(this,yr);ie(this,Qr);ie(this,Xe);ie(this,vr);ie(this,Re);ie(this,Nn);ie(this,wr);Q(this,wr,!1),Q(this,Nn,e.defaultOptions),this.setOptions(e.options),this.observers=[],Q(this,vr,e.client),Q(this,Xe,j(this,vr).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Q(this,yr,$a(this.options)),this.state=e.state??j(this,yr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=j(this,Re))==null?void 0:e.promise}setOptions(e){if(this.options={...j(this,Nn),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=$a(this.options);r.data!==void 0&&(this.setState(Ma(r.data,r.dataUpdatedAt)),Q(this,yr,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,Xe).remove(this)}setData(e,r){const n=my(this.state.data,e,this.options);return je(this,ut,Ot).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){je(this,ut,Ot).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=j(this,Re))==null?void 0:n.promise;return(s=j(this,Re))==null||s.cancel(e),r?r.then(lt).catch(lt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,yr))}isActive(){return this.observers.some(e=>hy(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pi||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Vo(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!dy(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=j(this,Re))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=j(this,Re))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),j(this,Xe).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(j(this,Re)&&(j(this,wr)?j(this,Re).cancel({revert:!0}):j(this,Re).cancelRetry()),this.scheduleGc()),j(this,Xe).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||je(this,ut,Ot).call(this,{type:"invalidate"})}async fetch(e,r){var c,u,l,m,y,f,b,v,x,E,T,S;if(this.state.fetchStatus!=="idle"&&((c=j(this,Re))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(j(this,Re))return j(this,Re).continueRetry(),j(this,Re).promise}if(e&&this.setOptions(e),!this.options.queryFn){const C=this.observers.find(A=>A.options.queryFn);C&&this.setOptions(C.options)}const n=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Q(this,wr,!0),n.signal)})},o=()=>{const C=eu(this.options,r),O=(()=>{const I={client:j(this,vr),queryKey:this.queryKey,meta:this.meta};return s(I),I})();return Q(this,wr,!1),this.options.persister?this.options.persister(C,O,this):C(O)},a=(()=>{const C={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:j(this,vr),state:this.state,fetchFn:o};return s(C),C})();(u=this.options.behavior)==null||u.onFetch(a,this),Q(this,Qr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((l=a.fetchOptions)==null?void 0:l.meta))&&je(this,ut,Ot).call(this,{type:"fetch",meta:(m=a.fetchOptions)==null?void 0:m.meta}),Q(this,Re,nu({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof zo&&C.revert&&this.setState({...j(this,Qr),fetchStatus:"idle"}),n.abort()},onFail:(C,A)=>{je(this,ut,Ot).call(this,{type:"failed",failureCount:C,error:A})},onPause:()=>{je(this,ut,Ot).call(this,{type:"pause"})},onContinue:()=>{je(this,ut,Ot).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await j(this,Re).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(f=(y=j(this,Xe).config).onSuccess)==null||f.call(y,C,this),(v=(b=j(this,Xe).config).onSettled)==null||v.call(b,C,this.state.error,this),C}catch(C){if(C instanceof zo){if(C.silent)return j(this,Re).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw je(this,ut,Ot).call(this,{type:"error",error:C}),(E=(x=j(this,Xe).config).onError)==null||E.call(x,C,this),(S=(T=j(this,Xe).config).onSettled)==null||S.call(T,this.state.data,C,this),C}finally{this.scheduleGc()}}},yr=new WeakMap,Qr=new WeakMap,Xe=new WeakMap,vr=new WeakMap,Re=new WeakMap,Nn=new WeakMap,wr=new WeakMap,ut=new WeakSet,Ot=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Ty(n.data,this.options),fetchMeta:e.meta??null};case"success":const s={...n,...Ma(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Q(this,Qr,e.manual?s:void 0),s;case"error":const o=e.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Fe.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),j(this,Xe).notify({query:this,type:"updated",action:e})})},Ac);function Ty(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ru(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Ma(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function $a(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function La(t){return{onFetch:(e,r)=>{var l,m,y,f,b;const n=e.options,s=(y=(m=(l=e.fetchOptions)==null?void 0:l.meta)==null?void 0:m.fetchMore)==null?void 0:y.direction,o=((f=e.state.data)==null?void 0:f.pages)||[],i=((b=e.state.data)==null?void 0:b.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=S=>{vy(S,()=>e.signal,()=>v=!0)},E=eu(e.options,e.fetchOptions),T=async(S,C,A)=>{if(v)return Promise.reject();if(C==null&&S.pages.length)return Promise.resolve(S);const I=(()=>{const U={client:e.client,queryKey:e.queryKey,pageParam:C,direction:A?"backward":"forward",meta:e.options.meta};return x(U),U})(),P=await E(I),{maxPages:D}=e.options,B=A?yy:gy;return{pages:B(S.pages,P,D),pageParams:B(S.pageParams,C,D)}};if(s&&o.length){const S=s==="backward",C=S?Ry:Fa,A={pages:o,pageParams:i},O=C(n,A);a=await T(A,O,S)}else{const S=t??o.length;do{const C=c===0?i[0]??n.initialPageParam:Fa(n,a);if(c>0&&C==null)break;a=await T(a,C),c++}while(c<S)}return a};e.options.persister?e.fetchFn=()=>{var v,x;return(x=(v=e.options).persister)==null?void 0:x.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function Fa(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function Ry(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Dn,wt,De,br,bt,Kt,kc,Ay=(kc=class extends su{constructor(e){super();ie(this,bt);ie(this,Dn);ie(this,wt);ie(this,De);ie(this,br);Q(this,Dn,e.client),this.mutationId=e.mutationId,Q(this,De,e.mutationCache),Q(this,wt,[]),this.state=e.state||ky(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){j(this,wt).includes(e)||(j(this,wt).push(e),this.clearGcTimeout(),j(this,De).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Q(this,wt,j(this,wt).filter(r=>r!==e)),this.scheduleGc(),j(this,De).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){j(this,wt).length||(this.state.status==="pending"?this.scheduleGc():j(this,De).remove(this))}continue(){var e;return((e=j(this,br))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,c,u,l,m,y,f,b,v,x,E,T,S,C,A,O,I;const r=()=>{je(this,bt,Kt).call(this,{type:"continue"})},n={client:j(this,Dn),meta:this.options.meta,mutationKey:this.options.mutationKey};Q(this,br,nu({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(P,D)=>{je(this,bt,Kt).call(this,{type:"failed",failureCount:P,error:D})},onPause:()=>{je(this,bt,Kt).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,De).canRun(this)}));const s=this.state.status==="pending",o=!j(this,br).canStart();try{if(s)r();else{je(this,bt,Kt).call(this,{type:"pending",variables:e,isPaused:o}),j(this,De).config.onMutate&&await j(this,De).config.onMutate(e,this,n);const D=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,e,n));D!==this.state.context&&je(this,bt,Kt).call(this,{type:"pending",context:D,variables:e,isPaused:o})}const P=await j(this,br).start();return await((u=(c=j(this,De).config).onSuccess)==null?void 0:u.call(c,P,e,this.state.context,this,n)),await((m=(l=this.options).onSuccess)==null?void 0:m.call(l,P,e,this.state.context,n)),await((f=(y=j(this,De).config).onSettled)==null?void 0:f.call(y,P,null,this.state.variables,this.state.context,this,n)),await((v=(b=this.options).onSettled)==null?void 0:v.call(b,P,null,e,this.state.context,n)),je(this,bt,Kt).call(this,{type:"success",data:P}),P}catch(P){try{await((E=(x=j(this,De).config).onError)==null?void 0:E.call(x,P,e,this.state.context,this,n))}catch(D){Promise.reject(D)}try{await((S=(T=this.options).onError)==null?void 0:S.call(T,P,e,this.state.context,n))}catch(D){Promise.reject(D)}try{await((A=(C=j(this,De).config).onSettled)==null?void 0:A.call(C,void 0,P,this.state.variables,this.state.context,this,n))}catch(D){Promise.reject(D)}try{await((I=(O=this.options).onSettled)==null?void 0:I.call(O,void 0,P,e,this.state.context,n))}catch(D){Promise.reject(D)}throw je(this,bt,Kt).call(this,{type:"error",error:P}),P}finally{j(this,De).runNext(this)}}},Dn=new WeakMap,wt=new WeakMap,De=new WeakMap,br=new WeakMap,bt=new WeakSet,Kt=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Fe.batch(()=>{j(this,wt).forEach(n=>{n.onMutationUpdate(e)}),j(this,De).notify({mutation:this,type:"updated",action:e})})},kc);function ky(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var jt,dt,Mn,Pc,Py=(Pc=class extends Us{constructor(e={}){super();ie(this,jt);ie(this,dt);ie(this,Mn);this.config=e,Q(this,jt,new Set),Q(this,dt,new Map),Q(this,Mn,0)}build(e,r,n){const s=new Ay({client:e,mutationCache:this,mutationId:++qn(this,Mn)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){j(this,jt).add(e);const r=Qn(e);if(typeof r=="string"){const n=j(this,dt).get(r);n?n.push(e):j(this,dt).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(j(this,jt).delete(e)){const r=Qn(e);if(typeof r=="string"){const n=j(this,dt).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&j(this,dt).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Qn(e);if(typeof r=="string"){const n=j(this,dt).get(r),s=n==null?void 0:n.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=Qn(e);if(typeof r=="string"){const s=(n=j(this,dt).get(r))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Fe.batch(()=>{j(this,jt).forEach(e=>{this.notify({type:"removed",mutation:e})}),j(this,jt).clear(),j(this,dt).clear()})}getAll(){return Array.from(j(this,jt))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>ja(r,n))}findAll(e={}){return this.getAll().filter(r=>ja(e,r))}notify(e){Fe.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Fe.batch(()=>Promise.all(e.map(r=>r.continue().catch(lt))))}},jt=new WeakMap,dt=new WeakMap,Mn=new WeakMap,Pc);function Qn(t){var e;return(e=t.options.scope)==null?void 0:e.id}var xt,Oc,Oy=(Oc=class extends Us{constructor(e={}){super();ie(this,xt);this.config=e,Q(this,xt,new Map)}build(e,r,n){const s=r.queryKey,o=r.queryHash??ki(s,r);let i=this.get(o);return i||(i=new Cy({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){j(this,xt).has(e.queryHash)||(j(this,xt).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=j(this,xt).get(e.queryHash);r&&(e.destroy(),r===e&&j(this,xt).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return j(this,xt).get(e)}getAll(){return[...j(this,xt).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>Ia(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>Ia(e,n)):r}notify(e){Fe.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Fe.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fe.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},xt=new WeakMap,Oc),xe,Zt,er,Xr,Zr,tr,en,tn,Ic,Iy=(Ic=class{constructor(t={}){ie(this,xe);ie(this,Zt);ie(this,er);ie(this,Xr);ie(this,Zr);ie(this,tr);ie(this,en);ie(this,tn);Q(this,xe,t.queryCache||new Oy),Q(this,Zt,t.mutationCache||new Py),Q(this,er,t.defaultOptions||{}),Q(this,Xr,new Map),Q(this,Zr,new Map),Q(this,tr,0)}mount(){qn(this,tr)._++,j(this,tr)===1&&(Q(this,en,tu.subscribe(async t=>{t&&(await this.resumePausedMutations(),j(this,xe).onFocus())})),Q(this,tn,ws.subscribe(async t=>{t&&(await this.resumePausedMutations(),j(this,xe).onOnline())})))}unmount(){var t,e;qn(this,tr)._--,j(this,tr)===0&&((t=j(this,en))==null||t.call(this),Q(this,en,void 0),(e=j(this,tn))==null||e.call(this),Q(this,tn,void 0))}isFetching(t){return j(this,xe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return j(this,Zt).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=j(this,xe).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=j(this,xe).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Vo(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return j(this,xe).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=j(this,xe).get(n.queryHash),o=s==null?void 0:s.state.data,i=ly(e,o);if(i!==void 0)return j(this,xe).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(t,e,r){return Fe.batch(()=>j(this,xe).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=j(this,xe).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=j(this,xe);Fe.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=j(this,xe);return Fe.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=Fe.batch(()=>j(this,xe).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(lt).catch(lt)}invalidateQueries(t,e={}){return Fe.batch(()=>(j(this,xe).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=Fe.batch(()=>j(this,xe).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(lt)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(lt)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=j(this,xe).build(this,e);return r.isStaleByTime(Vo(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(lt).catch(lt)}fetchInfiniteQuery(t){return t.behavior=La(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(lt).catch(lt)}ensureInfiniteQueryData(t){return t.behavior=La(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ws.isOnline()?j(this,Zt).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,xe)}getMutationCache(){return j(this,Zt)}getDefaultOptions(){return j(this,er)}setDefaultOptions(t){Q(this,er,t)}setQueryDefaults(t,e){j(this,Xr).set(Sn(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...j(this,Xr).values()],r={};return e.forEach(n=>{Cn(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){j(this,Zr).set(Sn(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...j(this,Zr).values()],r={};return e.forEach(n=>{Cn(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...j(this,er).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ki(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Pi&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...j(this,er).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){j(this,xe).clear(),j(this,Zt).clear()}},xe=new WeakMap,Zt=new WeakMap,er=new WeakMap,Xr=new WeakMap,Zr=new WeakMap,tr=new WeakMap,en=new WeakMap,tn=new WeakMap,Ic),ou=p.createContext(void 0),NE=t=>{const e=p.useContext(ou);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},jy=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx(ou.Provider,{value:t,children:e})),_t=function(){return _t=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_t.apply(this,arguments)};function ln(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function Ny(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{u(n.next(l))}catch(m){i(m)}}function c(l){try{u(n.throw(l))}catch(m){i(m)}}function u(l){l.done?o(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function Dy(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}const My=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Oi extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class $y extends Oi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ba extends Oi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ua extends Oi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qo;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(qo||(qo={}));class Ly{constructor(e,{headers:r={},customFetch:n,region:s=qo.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=My(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ny(this,arguments,void 0,function*(r,n={}){var s;let o,i;try{const{headers:a,method:c,body:u,signal:l,timeout:m}=n;let y={},{region:f}=n;f||(f=this.region);const b=new URL(`${this.url}/${r}`);f&&f!=="any"&&(y["x-region"]=f,b.searchParams.set("forceFunctionRegion",f));let v;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(y["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(y["Content-Type"]="application/json",v=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?v=JSON.stringify(u):v=u;let x=l;m&&(i=new AbortController,o=setTimeout(()=>i.abort(),m),l?(x=i.signal,l.addEventListener("abort",()=>i.abort())):x=i.signal);const E=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),a),body:v,signal:x}).catch(A=>{throw new $y(A)}),T=E.headers.get("x-relay-error");if(T&&T==="true")throw new Ba(E);if(!E.ok)throw new Ua(E);let S=((s=E.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),C;return S==="application/json"?C=yield E.json():S==="application/octet-stream"||S==="application/pdf"?C=yield E.blob():S==="text/event-stream"?C=E:S==="multipart/form-data"?C=yield E.formData():C=yield E.text(),{data:C,error:null,response:E}}catch(a){return{data:null,error:a,response:a instanceof Ua||a instanceof Ba?a.context:void 0}}finally{o&&clearTimeout(o)}})}}var Fy=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},By=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let i=null,a=null,c=null,u=o.status,l=o.statusText;if(o.ok){var m,y;if(r.method!=="HEAD"){var f;const E=await o.text();E===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((f=r.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=E:a=JSON.parse(E))}const v=(m=r.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),x=(y=o.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");v&&x&&x.length>1&&(c=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(i={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,u=406,l="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var b;const v=await o.text();try{i=JSON.parse(v),Array.isArray(i)&&o.status===404&&(a=[],i=null,u=200,l="OK")}catch{o.status===404&&v===""?(u=204,l="No Content"):i={message:v}}if(i&&r.isMaybeSingle&&(!(i==null||(b=i.details)===null||b===void 0)&&b.includes("0 rows"))&&(i=null,u=200,l="OK"),i&&r.shouldThrowOnError)throw new Fy(i)}return{error:i,data:a,count:c,status:u,statusText:l}});return this.shouldThrowOnError||(s=s.catch(o=>{var i;let a="";const c=o==null?void 0:o.cause;if(c){var u,l,m,y;const b=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",v=(l=c==null?void 0:c.code)!==null&&l!==void 0?l:"";a=`${(m=o==null?void 0:o.name)!==null&&m!==void 0?m:"FetchError"}: ${o==null?void 0:o.message}`,a+=`

Caused by: ${(y=c==null?void 0:c.name)!==null&&y!==void 0?y:"Error"}: ${b}`,v&&(a+=` (${v})`),c!=null&&c.stack&&(a+=`
${c.stack}`)}else{var f;a=(f=o==null?void 0:o.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},Uy=class extends By{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const o=s?`${s}.order`:"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:o="text"}={}){var i;const a=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Va=new RegExp("[,()]");var Br=class extends Uy{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Va.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Va.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},Vy=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:n}=e??{},s=r?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",i),n&&c.append("Prefer",`count=${n}`),new Br({method:s,url:a,headers:c,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const s="POST",{url:o,headers:i}=this.cloneRequestState();if(e&&i.append("Prefer",`count=${e}`),r||i.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);o.searchParams.set("columns",c.join(","))}}return new Br({method:s,url:o,headers:i,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var o;const i="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((l,m)=>l.concat(Object.keys(m)),[]);if(u.length>0){const l=[...new Set(u)].map(m=>`"${m}"`);a.searchParams.set("columns",l.join(","))}}return new Br({method:i,url:a,headers:c,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var r;const n="PATCH",{url:s,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Br({method:n,url:s,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new Br({method:r,url:n,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Wy=class iu{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Vy(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new iu(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:o}={}){var i;let a;const c=new URL(`${this.url}/rpc/${e}`);let u;const l=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(l)),m=n&&Object.values(r).some(l);m?(a="POST",u=r):n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([f,b])=>b!==void 0).map(([f,b])=>[f,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([f,b])=>{c.searchParams.append(f,b)})):(a="POST",u=r);const y=new Headers(this.headers);return m?y.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&y.set("Prefer",`count=${o}`),new Br({method:a,url:c,headers:y,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};const ho=globalThis||void 0||self;class zy{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof ho<"u"&&typeof ho.WebSocket<"u")return{type:"native",constructor:ho.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const qy="2.93.1",Ky=`realtime-js/${qy}`,Hy="1.0.0",au="2.0.0",Wa=au,Ko=1e4,Gy=1e3,Jy=100;var Gt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Gt||(Gt={}));var Te;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Te||(Te={}));var ht;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ht||(ht={}));var Ho;(function(t){t.websocket="websocket"})(Ho||(Ho={}));var hr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(hr||(hr={}));class Yy{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},i=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(e,r,n){var s,o;const i=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",c=(o=e.join_ref)!==null&&o!==void 0?o:"",u=e.payload.event,l=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(l).length===0?"":JSON.stringify(l);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+i.length+u.length+m.length,f=new ArrayBuffer(this.HEADER_LENGTH+y);let b=new DataView(f),v=0;b.setUint8(v++,this.KINDS.userBroadcastPush),b.setUint8(v++,c.length),b.setUint8(v++,a.length),b.setUint8(v++,i.length),b.setUint8(v++,u.length),b.setUint8(v++,m.length),b.setUint8(v++,r),Array.from(c,E=>b.setUint8(v++,E.charCodeAt(0))),Array.from(a,E=>b.setUint8(v++,E.charCodeAt(0))),Array.from(i,E=>b.setUint8(v++,E.charCodeAt(0))),Array.from(u,E=>b.setUint8(v++,E.charCodeAt(0))),Array.from(m,E=>b.setUint8(v++,E.charCodeAt(0)));var x=new Uint8Array(f.byteLength+n.byteLength);return x.set(new Uint8Array(f),0),x.set(new Uint8Array(n),f.byteLength),x.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,o,i,a,c]=n;return r({join_ref:s,ref:o,topic:i,event:a,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),o=r.getUint8(2),i=r.getUint8(3),a=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(e.slice(c,c+s));c=c+s;const l=n.decode(e.slice(c,c+o));c=c+o;const m=n.decode(e.slice(c,c+i));c=c+i;const y=e.slice(c,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(n.decode(y)):y,b={type:this.BROADCAST_EVENT,event:l,payload:f};return i>0&&(b.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class cu{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pe||(pe={}));const za=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,i)=>(o[i]=Qy(i,t,e,s),o),{}):{}},Qy=(t,e,r,n)=>{const s=e.find(a=>a.name===t),o=s==null?void 0:s.type,i=r[t];return o&&!n.includes(o)?lu(o,i):Go(i)},lu=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return tv(e,r)}switch(t){case pe.bool:return Xy(e);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return Zy(e);case pe.json:case pe.jsonb:return ev(e);case pe.timestamp:return rv(e);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return Go(e);default:return Go(e)}},Go=t=>t,Xy=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Zy=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ev=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},tv=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const i=t.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>lu(e,a))}return t},rv=t=>typeof t=="string"?t.replace(" ","T"):t,uu=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class fo{constructor(e,r,n={},s=Ko){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qa;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(qa||(qa={}));class wn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wn.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=wn.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=wn.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const o=this.cloneDeep(e),i=this.transformState(r),a={},c={};return this.map(o,(u,l)=>{i[u]||(c[u]=l)}),this.map(i,(u,l)=>{const m=o[u];if(m){const y=l.map(x=>x.presence_ref),f=m.map(x=>x.presence_ref),b=l.filter(x=>f.indexOf(x.presence_ref)<0),v=m.filter(x=>y.indexOf(x.presence_ref)<0);b.length>0&&(a[u]=b),v.length>0&&(c[u]=v)}else a[u]=l}),this.syncDiff(o,{joins:a,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(a,c)=>{var u;const l=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),l.length>0){const m=e[a].map(f=>f.presence_ref),y=l.filter(f=>m.indexOf(f.presence_ref)<0);e[a].unshift(...y)}n(a,l,c)}),this.map(i,(a,c)=>{let u=e[a];if(!u)return;const l=c.map(m=>m.presence_ref);u=u.filter(m=>l.indexOf(m.presence_ref)<0),e[a]=u,s(a,u,c),u.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ka;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ka||(Ka={}));var bn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(bn||(bn={}));var It;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(It||(It={}));class Wr{constructor(e,r={config:{}},n){var s,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new fo(this,ht.join,this.params,this.timeout),this.rejoinTimer=new cu(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ht.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new wn(this),this.broadcastEndpointURL=uu(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Te.closed){const{config:{broadcast:i,presence:a,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],l=!!this.bindings[bn.PRESENCE]&&this.bindings[bn.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},y={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(It.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(It.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e==null||e(It.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,x=(b=v==null?void 0:v.length)!==null&&b!==void 0?b:0,E=[];for(let T=0;T<x;T++){const S=v[T],{filter:{event:C,schema:A,table:O,filter:I}}=S,P=f&&f[T];if(P&&P.event===C&&Wr.isFilterValueEqual(P.schema,A)&&Wr.isFilterValueEqual(P.table,O)&&Wr.isFilterValueEqual(P.filter,I))E.push(Object.assign(Object.assign({},S),{id:P.id}));else{this.unsubscribe(),this.state=Te.errored,e==null||e(It.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(It.SUBSCRIBED);return}}).receive("error",f=>{this.state=Te.errored,e==null||e(It.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(It.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Te.joined&&e===bn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const i={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{const u=await a.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:i}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Te.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ht.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new fo(this,ht.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Te.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new fo(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Jy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,o;const i=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:l}=ht;if(n&&[a,c,u,l].indexOf(i)>=0&&n!==this._joinRef())return;let y=this._onMessage(i,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var b,v,x;return((b=f.filter)===null||b===void 0?void 0:b.event)==="*"||((x=(v=f.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===i}).map(f=>f.callback(y,n)):(o=this.bindings[i])===null||o===void 0||o.filter(f=>{var b,v,x,E,T,S;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){const C=f.id,A=(b=f.filter)===null||b===void 0?void 0:b.event;return C&&((v=r.ids)===null||v===void 0?void 0:v.includes(C))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const C=(T=(E=f==null?void 0:f.filter)===null||E===void 0?void 0:E.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return C==="*"||C===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:v,table:x,commit_timestamp:E,type:T,errors:S}=b;y=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:E,eventType:T,new:{},old:{},errors:S}),this._getPayloadRecords(b))}f.callback(y,n)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Wr.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ht.close,{},e)}_onError(e){this._on(ht.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=za(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=za(e.columns,e.old_record)),r}}const po=()=>{},Xn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},nv=[1e3,2e3,5e3,1e4],sv=1e4,ov=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class iv{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ko,this.transport=null,this.heartbeatIntervalMs=Xn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=po,this.ref=0,this.reconnectTimer=null,this.vsn=Wa,this.logger=po,this.conn=null,this.sendBuffer=[],this.serializer=new Yy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Ho.websocket}`,this.httpEndpoint=uu(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Gt.connecting:return hr.Connecting;case Gt.open:return hr.Open;case Gt.closing:return hr.Closing;default:return hr.Closed}}isConnected(){return this.connectionState()===hr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new Wr(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:s,ref:o}=e,i=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Gy,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Xn.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(l){this.log("error","error in heartbeat callback",l)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:o,ref:i}=r,a=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${s} ${a}`.trim(),o),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Gt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gt.open||this.conn.readyState===Gt.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ht.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([ov],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const o={access_token:r,version:Ky};r&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(ht.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new cu(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,o,i,a,c,u,l,m,y,f;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Ko,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Xn.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:po,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:Wa,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:b=>nv[b-1]||sv,this.vsn){case Hy:this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:(b,v)=>v(JSON.stringify(b)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:(b,v)=>v(JSON.parse(b));break;case au:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var du={},Ws={};Ws.byteLength=lv;Ws.toByteArray=dv;Ws.fromByteArray=pv;var Et=[],Qe=[],av=typeof Uint8Array<"u"?Uint8Array:Array,mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Pr=0,cv=mo.length;Pr<cv;++Pr)Et[Pr]=mo[Pr],Qe[mo.charCodeAt(Pr)]=Pr;Qe[45]=62;Qe[95]=63;function hu(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function lv(t){var e=hu(t),r=e[0],n=e[1];return(r+n)*3/4-n}function uv(t,e,r){return(e+r)*3/4-r}function dv(t){var e,r=hu(t),n=r[0],s=r[1],o=new av(uv(t,n,s)),i=0,a=s>0?n-4:n,c;for(c=0;c<a;c+=4)e=Qe[t.charCodeAt(c)]<<18|Qe[t.charCodeAt(c+1)]<<12|Qe[t.charCodeAt(c+2)]<<6|Qe[t.charCodeAt(c+3)],o[i++]=e>>16&255,o[i++]=e>>8&255,o[i++]=e&255;return s===2&&(e=Qe[t.charCodeAt(c)]<<2|Qe[t.charCodeAt(c+1)]>>4,o[i++]=e&255),s===1&&(e=Qe[t.charCodeAt(c)]<<10|Qe[t.charCodeAt(c+1)]<<4|Qe[t.charCodeAt(c+2)]>>2,o[i++]=e>>8&255,o[i++]=e&255),o}function hv(t){return Et[t>>18&63]+Et[t>>12&63]+Et[t>>6&63]+Et[t&63]}function fv(t,e,r){for(var n,s=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),s.push(hv(n));return s.join("")}function pv(t){for(var e,r=t.length,n=r%3,s=[],o=16383,i=0,a=r-n;i<a;i+=o)s.push(fv(t,i,i+o>a?a:i+o));return n===1?(e=t[r-1],s.push(Et[e>>2]+Et[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(Et[e>>10]+Et[e>>4&63]+Et[e<<2&63]+"=")),s.join("")}var Ii={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ii.read=function(t,e,r,n,s){var o,i,a=s*8-n-1,c=(1<<a)-1,u=c>>1,l=-7,m=r?s-1:0,y=r?-1:1,f=t[e+m];for(m+=y,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=o*256+t[e+m],m+=y,l-=8);for(i=o&(1<<-l)-1,o>>=-l,l+=n;l>0;i=i*256+t[e+m],m+=y,l-=8);if(o===0)o=1-u;else{if(o===c)return i?NaN:(f?-1:1)*(1/0);i=i+Math.pow(2,n),o=o-u}return(f?-1:1)*i*Math.pow(2,o-n)};Ii.write=function(t,e,r,n,s,o){var i,a,c,u=o*8-s-1,l=(1<<u)-1,m=l>>1,y=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,i=l):(i=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-i))<1&&(i--,c*=2),i+m>=1?e+=y/c:e+=y*Math.pow(2,1-m),e*c>=2&&(i++,c/=2),i+m>=l?(a=0,i=l):i+m>=1?(a=(e*c-1)*Math.pow(2,s),i=i+m):(a=e*Math.pow(2,m-1)*Math.pow(2,s),i=0));s>=8;t[r+f]=a&255,f+=b,a/=256,s-=8);for(i=i<<s|a,u+=s;u>0;t[r+f]=i&255,f+=b,i/=256,u-=8);t[r+f-b]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Ws,r=Ii,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=A,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s;const{Uint8Array:o,ArrayBuffer:i,SharedArrayBuffer:a}=globalThis;l.TYPED_ARRAY_SUPPORT=c(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const w=new o(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,o.prototype),Object.setPrototypeOf(w,d),w.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(w){if(w>s)throw new RangeError('The value "'+w+'" is invalid for option "size"');const d=new o(w);return Object.setPrototypeOf(d,l.prototype),d}function l(w,d,h){if(typeof w=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(w)}return m(w,d,h)}l.poolSize=8192;function m(w,d,h){if(typeof w=="string")return v(w,d);if(i.isView(w))return E(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(Ye(w,i)||w&&Ye(w.buffer,i)||typeof a<"u"&&(Ye(w,a)||w&&Ye(w.buffer,a)))return T(w,d,h);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=w.valueOf&&w.valueOf();if(_!=null&&_!==w)return l.from(_,d,h);const R=S(w);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return l.from(w[Symbol.toPrimitive]("string"),d,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}l.from=function(w,d,h){return m(w,d,h)},Object.setPrototypeOf(l.prototype,o.prototype),Object.setPrototypeOf(l,o);function y(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function f(w,d,h){return y(w),w<=0?u(w):d!==void 0?typeof h=="string"?u(w).fill(d,h):u(w).fill(d):u(w)}l.alloc=function(w,d,h){return f(w,d,h)};function b(w){return y(w),u(w<0?0:C(w)|0)}l.allocUnsafe=function(w){return b(w)},l.allocUnsafeSlow=function(w){return b(w)};function v(w,d){if((typeof d!="string"||d==="")&&(d="utf8"),!l.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const h=O(w,d)|0;let _=u(h);const R=_.write(w,d);return R!==h&&(_=_.slice(0,R)),_}function x(w){const d=w.length<0?0:C(w.length)|0,h=u(d);for(let _=0;_<d;_+=1)h[_]=w[_]&255;return h}function E(w){if(Ye(w,o)){const d=new o(w);return T(d.buffer,d.byteOffset,d.byteLength)}return x(w)}function T(w,d,h){if(d<0||w.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<d+(h||0))throw new RangeError('"length" is outside of buffer bounds');let _;return d===void 0&&h===void 0?_=new o(w):h===void 0?_=new o(w,d):_=new o(w,d,h),Object.setPrototypeOf(_,l.prototype),_}function S(w){if(l.isBuffer(w)){const d=C(w.length)|0,h=u(d);return h.length===0||w.copy(h,0,0,d),h}if(w.length!==void 0)return typeof w.length!="number"||Ie(w.length)?u(0):x(w);if(w.type==="Buffer"&&Array.isArray(w.data))return x(w.data)}function C(w){if(w>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return w|0}function A(w){return+w!=w&&(w=0),l.alloc(+w)}l.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==l.prototype},l.compare=function(d,h){if(Ye(d,o)&&(d=l.from(d,d.offset,d.byteLength)),Ye(h,o)&&(h=l.from(h,h.offset,h.byteLength)),!l.isBuffer(d)||!l.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===h)return 0;let _=d.length,R=h.length;for(let k=0,N=Math.min(_,R);k<N;++k)if(d[k]!==h[k]){_=d[k],R=h[k];break}return _<R?-1:R<_?1:0},l.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(d,h){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return l.alloc(0);let _;if(h===void 0)for(h=0,_=0;_<d.length;++_)h+=d[_].length;const R=l.allocUnsafe(h);let k=0;for(_=0;_<d.length;++_){let N=d[_];if(Ye(N,o))k+N.length>R.length?(l.isBuffer(N)||(N=l.from(N)),N.copy(R,k)):o.prototype.set.call(R,N,k);else if(l.isBuffer(N))N.copy(R,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=N.length}return R};function O(w,d){if(l.isBuffer(w))return w.length;if(i.isView(w)||Ye(w,i))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const h=w.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&h===0)return 0;let R=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return Ar(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return yt(w).length;default:if(R)return _?-1:Ar(w).length;d=(""+d).toLowerCase(),R=!0}}l.byteLength=O;function I(w,d,h){let _=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,d>>>=0,h<=d))return"";for(w||(w="utf8");;)switch(w){case"hex":return ee(this,d,h);case"utf8":case"utf-8":return H(this,d,h);case"ascii":return Z(this,d,h);case"latin1":case"binary":return ce(this,d,h);case"base64":return z(this,d,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,d,h);default:if(_)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),_=!0}}l.prototype._isBuffer=!0;function P(w,d,h){const _=w[d];w[d]=w[h],w[h]=_}l.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<d;h+=2)P(this,h,h+1);return this},l.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<d;h+=4)P(this,h,h+3),P(this,h+1,h+2);return this},l.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<d;h+=8)P(this,h,h+7),P(this,h+1,h+6),P(this,h+2,h+5),P(this,h+3,h+4);return this},l.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?H(this,0,d):I.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(d){if(!l.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:l.compare(this,d)===0},l.prototype.inspect=function(){let d="";const h=t.INSPECT_MAX_BYTES;return d=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(d+=" ... "),"<Buffer "+d+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(d,h,_,R,k){if(Ye(d,o)&&(d=l.from(d,d.offset,d.byteLength)),!l.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(h===void 0&&(h=0),_===void 0&&(_=d?d.length:0),R===void 0&&(R=0),k===void 0&&(k=this.length),h<0||_>d.length||R<0||k>this.length)throw new RangeError("out of range index");if(R>=k&&h>=_)return 0;if(R>=k)return-1;if(h>=_)return 1;if(h>>>=0,_>>>=0,R>>>=0,k>>>=0,this===d)return 0;let N=k-R,ne=_-h;const ye=Math.min(N,ne),he=this.slice(R,k),me=d.slice(h,_);for(let ue=0;ue<ye;++ue)if(he[ue]!==me[ue]){N=he[ue],ne=me[ue];break}return N<ne?-1:ne<N?1:0};function D(w,d,h,_,R){if(w.length===0)return-1;if(typeof h=="string"?(_=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Ie(h)&&(h=R?0:w.length-1),h<0&&(h=w.length+h),h>=w.length){if(R)return-1;h=w.length-1}else if(h<0)if(R)h=0;else return-1;if(typeof d=="string"&&(d=l.from(d,_)),l.isBuffer(d))return d.length===0?-1:B(w,d,h,_,R);if(typeof d=="number")return d=d&255,typeof o.prototype.indexOf=="function"?R?o.prototype.indexOf.call(w,d,h):o.prototype.lastIndexOf.call(w,d,h):B(w,[d],h,_,R);throw new TypeError("val must be string, number or Buffer")}function B(w,d,h,_,R){let k=1,N=w.length,ne=d.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(w.length<2||d.length<2)return-1;k=2,N/=2,ne/=2,h/=2}function ye(me,ue){return k===1?me[ue]:me.readUInt16BE(ue*k)}let he;if(R){let me=-1;for(he=h;he<N;he++)if(ye(w,he)===ye(d,me===-1?0:he-me)){if(me===-1&&(me=he),he-me+1===ne)return me*k}else me!==-1&&(he-=he-me),me=-1}else for(h+ne>N&&(h=N-ne),he=h;he>=0;he--){let me=!0;for(let ue=0;ue<ne;ue++)if(ye(w,he+ue)!==ye(d,ue)){me=!1;break}if(me)return he}return-1}l.prototype.includes=function(d,h,_){return this.indexOf(d,h,_)!==-1},l.prototype.indexOf=function(d,h,_){return D(this,d,h,_,!0)},l.prototype.lastIndexOf=function(d,h,_){return D(this,d,h,_,!1)};function U(w,d,h,_){h=Number(h)||0;const R=w.length-h;_?(_=Number(_),_>R&&(_=R)):_=R;const k=d.length;_>k/2&&(_=k/2);let N;for(N=0;N<_;++N){const ne=parseInt(d.substr(N*2,2),16);if(Ie(ne))return N;w[h+N]=ne}return N}function F(w,d,h,_){return kr(Ar(d,w.length-h),w,h,_)}function Y(w,d,h,_){return kr(ir(d),w,h,_)}function L(w,d,h,_){return kr(yt(d),w,h,_)}function X(w,d,h,_){return kr(zn(d,w.length-h),w,h,_)}l.prototype.write=function(d,h,_,R){if(h===void 0)R="utf8",_=this.length,h=0;else if(_===void 0&&typeof h=="string")R=h,_=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(_)?(_=_>>>0,R===void 0&&(R="utf8")):(R=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-h;if((_===void 0||_>k)&&(_=k),d.length>0&&(_<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");let N=!1;for(;;)switch(R){case"hex":return U(this,d,h,_);case"utf8":case"utf-8":return F(this,d,h,_);case"ascii":case"latin1":case"binary":return Y(this,d,h,_);case"base64":return L(this,d,h,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,d,h,_);default:if(N)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),N=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(w,d,h){return d===0&&h===w.length?e.fromByteArray(w):e.fromByteArray(w.slice(d,h))}function H(w,d,h){h=Math.min(w.length,h);const _=[];let R=d;for(;R<h;){const k=w[R];let N=null,ne=k>239?4:k>223?3:k>191?2:1;if(R+ne<=h){let ye,he,me,ue;switch(ne){case 1:k<128&&(N=k);break;case 2:ye=w[R+1],(ye&192)===128&&(ue=(k&31)<<6|ye&63,ue>127&&(N=ue));break;case 3:ye=w[R+1],he=w[R+2],(ye&192)===128&&(he&192)===128&&(ue=(k&15)<<12|(ye&63)<<6|he&63,ue>2047&&(ue<55296||ue>57343)&&(N=ue));break;case 4:ye=w[R+1],he=w[R+2],me=w[R+3],(ye&192)===128&&(he&192)===128&&(me&192)===128&&(ue=(k&15)<<18|(ye&63)<<12|(he&63)<<6|me&63,ue>65535&&ue<1114112&&(N=ue))}}N===null?(N=65533,ne=1):N>65535&&(N-=65536,_.push(N>>>10&1023|55296),N=56320|N&1023),_.push(N),R+=ne}return M(_)}const V=4096;function M(w){const d=w.length;if(d<=V)return String.fromCharCode.apply(String,w);let h="",_=0;for(;_<d;)h+=String.fromCharCode.apply(String,w.slice(_,_+=V));return h}function Z(w,d,h){let _="";h=Math.min(w.length,h);for(let R=d;R<h;++R)_+=String.fromCharCode(w[R]&127);return _}function ce(w,d,h){let _="";h=Math.min(w.length,h);for(let R=d;R<h;++R)_+=String.fromCharCode(w[R]);return _}function ee(w,d,h){const _=w.length;(!d||d<0)&&(d=0),(!h||h<0||h>_)&&(h=_);let R="";for(let k=d;k<h;++k)R+=Bt[w[k]];return R}function se(w,d,h){const _=w.slice(d,h);let R="";for(let k=0;k<_.length-1;k+=2)R+=String.fromCharCode(_[k]+_[k+1]*256);return R}l.prototype.slice=function(d,h){const _=this.length;d=~~d,h=h===void 0?_:~~h,d<0?(d+=_,d<0&&(d=0)):d>_&&(d=_),h<0?(h+=_,h<0&&(h=0)):h>_&&(h=_),h<d&&(h=d);const R=this.subarray(d,h);return Object.setPrototypeOf(R,l.prototype),R};function K(w,d,h){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+d>h)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(d,h,_){d=d>>>0,h=h>>>0,_||K(d,h,this.length);let R=this[d],k=1,N=0;for(;++N<h&&(k*=256);)R+=this[d+N]*k;return R},l.prototype.readUintBE=l.prototype.readUIntBE=function(d,h,_){d=d>>>0,h=h>>>0,_||K(d,h,this.length);let R=this[d+--h],k=1;for(;h>0&&(k*=256);)R+=this[d+--h]*k;return R},l.prototype.readUint8=l.prototype.readUInt8=function(d,h){return d=d>>>0,h||K(d,1,this.length),this[d]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(d,h){return d=d>>>0,h||K(d,2,this.length),this[d]|this[d+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(d,h){return d=d>>>0,h||K(d,2,this.length),this[d]<<8|this[d+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(d,h){return d=d>>>0,h||K(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(d,h){return d=d>>>0,h||K(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},l.prototype.readBigUInt64LE=vt(function(d){d=d>>>0,rt(d,"offset");const h=this[d],_=this[d+7];(h===void 0||_===void 0)&&kt(d,this.length-8);const R=h+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,k=this[++d]+this[++d]*2**8+this[++d]*2**16+_*2**24;return BigInt(R)+(BigInt(k)<<BigInt(32))}),l.prototype.readBigUInt64BE=vt(function(d){d=d>>>0,rt(d,"offset");const h=this[d],_=this[d+7];(h===void 0||_===void 0)&&kt(d,this.length-8);const R=h*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],k=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+_;return(BigInt(R)<<BigInt(32))+BigInt(k)}),l.prototype.readIntLE=function(d,h,_){d=d>>>0,h=h>>>0,_||K(d,h,this.length);let R=this[d],k=1,N=0;for(;++N<h&&(k*=256);)R+=this[d+N]*k;return k*=128,R>=k&&(R-=Math.pow(2,8*h)),R},l.prototype.readIntBE=function(d,h,_){d=d>>>0,h=h>>>0,_||K(d,h,this.length);let R=h,k=1,N=this[d+--R];for(;R>0&&(k*=256);)N+=this[d+--R]*k;return k*=128,N>=k&&(N-=Math.pow(2,8*h)),N},l.prototype.readInt8=function(d,h){return d=d>>>0,h||K(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},l.prototype.readInt16LE=function(d,h){d=d>>>0,h||K(d,2,this.length);const _=this[d]|this[d+1]<<8;return _&32768?_|4294901760:_},l.prototype.readInt16BE=function(d,h){d=d>>>0,h||K(d,2,this.length);const _=this[d+1]|this[d]<<8;return _&32768?_|4294901760:_},l.prototype.readInt32LE=function(d,h){return d=d>>>0,h||K(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},l.prototype.readInt32BE=function(d,h){return d=d>>>0,h||K(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},l.prototype.readBigInt64LE=vt(function(d){d=d>>>0,rt(d,"offset");const h=this[d],_=this[d+7];(h===void 0||_===void 0)&&kt(d,this.length-8);const R=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(_<<24);return(BigInt(R)<<BigInt(32))+BigInt(h+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),l.prototype.readBigInt64BE=vt(function(d){d=d>>>0,rt(d,"offset");const h=this[d],_=this[d+7];(h===void 0||_===void 0)&&kt(d,this.length-8);const R=(h<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(R)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+_)}),l.prototype.readFloatLE=function(d,h){return d=d>>>0,h||K(d,4,this.length),r.read(this,d,!0,23,4)},l.prototype.readFloatBE=function(d,h){return d=d>>>0,h||K(d,4,this.length),r.read(this,d,!1,23,4)},l.prototype.readDoubleLE=function(d,h){return d=d>>>0,h||K(d,8,this.length),r.read(this,d,!0,52,8)},l.prototype.readDoubleBE=function(d,h){return d=d>>>0,h||K(d,8,this.length),r.read(this,d,!1,52,8)};function ae(w,d,h,_,R,k){if(!l.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>R||d<k)throw new RangeError('"value" argument is out of bounds');if(h+_>w.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(d,h,_,R){if(d=+d,h=h>>>0,_=_>>>0,!R){const ne=Math.pow(2,8*_)-1;ae(this,d,h,_,ne,0)}let k=1,N=0;for(this[h]=d&255;++N<_&&(k*=256);)this[h+N]=d/k&255;return h+_},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(d,h,_,R){if(d=+d,h=h>>>0,_=_>>>0,!R){const ne=Math.pow(2,8*_)-1;ae(this,d,h,_,ne,0)}let k=_-1,N=1;for(this[h+k]=d&255;--k>=0&&(N*=256);)this[h+k]=d/N&255;return h+_},l.prototype.writeUint8=l.prototype.writeUInt8=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,1,255,0),this[h]=d&255,h+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,2,65535,0),this[h]=d&255,this[h+1]=d>>>8,h+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,2,65535,0),this[h]=d>>>8,this[h+1]=d&255,h+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,4,4294967295,0),this[h+3]=d>>>24,this[h+2]=d>>>16,this[h+1]=d>>>8,this[h]=d&255,h+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,4,4294967295,0),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=d&255,h+4};function Ae(w,d,h,_,R){Rr(d,_,R,w,h,7);let k=Number(d&BigInt(4294967295));w[h++]=k,k=k>>8,w[h++]=k,k=k>>8,w[h++]=k,k=k>>8,w[h++]=k;let N=Number(d>>BigInt(32)&BigInt(4294967295));return w[h++]=N,N=N>>8,w[h++]=N,N=N>>8,w[h++]=N,N=N>>8,w[h++]=N,h}function oe(w,d,h,_,R){Rr(d,_,R,w,h,7);let k=Number(d&BigInt(4294967295));w[h+7]=k,k=k>>8,w[h+6]=k,k=k>>8,w[h+5]=k,k=k>>8,w[h+4]=k;let N=Number(d>>BigInt(32)&BigInt(4294967295));return w[h+3]=N,N=N>>8,w[h+2]=N,N=N>>8,w[h+1]=N,N=N>>8,w[h]=N,h+8}l.prototype.writeBigUInt64LE=vt(function(d,h=0){return Ae(this,d,h,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=vt(function(d,h=0){return oe(this,d,h,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(d,h,_,R){if(d=+d,h=h>>>0,!R){const ye=Math.pow(2,8*_-1);ae(this,d,h,_,ye-1,-ye)}let k=0,N=1,ne=0;for(this[h]=d&255;++k<_&&(N*=256);)d<0&&ne===0&&this[h+k-1]!==0&&(ne=1),this[h+k]=(d/N>>0)-ne&255;return h+_},l.prototype.writeIntBE=function(d,h,_,R){if(d=+d,h=h>>>0,!R){const ye=Math.pow(2,8*_-1);ae(this,d,h,_,ye-1,-ye)}let k=_-1,N=1,ne=0;for(this[h+k]=d&255;--k>=0&&(N*=256);)d<0&&ne===0&&this[h+k+1]!==0&&(ne=1),this[h+k]=(d/N>>0)-ne&255;return h+_},l.prototype.writeInt8=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,1,127,-128),d<0&&(d=255+d+1),this[h]=d&255,h+1},l.prototype.writeInt16LE=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,2,32767,-32768),this[h]=d&255,this[h+1]=d>>>8,h+2},l.prototype.writeInt16BE=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,2,32767,-32768),this[h]=d>>>8,this[h+1]=d&255,h+2},l.prototype.writeInt32LE=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,4,2147483647,-2147483648),this[h]=d&255,this[h+1]=d>>>8,this[h+2]=d>>>16,this[h+3]=d>>>24,h+4},l.prototype.writeInt32BE=function(d,h,_){return d=+d,h=h>>>0,_||ae(this,d,h,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=d&255,h+4},l.prototype.writeBigInt64LE=vt(function(d,h=0){return Ae(this,d,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=vt(function(d,h=0){return oe(this,d,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Je(w,d,h,_,R,k){if(h+_>w.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function Se(w,d,h,_,R){return d=+d,h=h>>>0,R||Je(w,d,h,4),r.write(w,d,h,_,23,4),h+4}l.prototype.writeFloatLE=function(d,h,_){return Se(this,d,h,!0,_)},l.prototype.writeFloatBE=function(d,h,_){return Se(this,d,h,!1,_)};function ze(w,d,h,_,R){return d=+d,h=h>>>0,R||Je(w,d,h,8),r.write(w,d,h,_,52,8),h+8}l.prototype.writeDoubleLE=function(d,h,_){return ze(this,d,h,!0,_)},l.prototype.writeDoubleBE=function(d,h,_){return ze(this,d,h,!1,_)},l.prototype.copy=function(d,h,_,R){if(!l.isBuffer(d))throw new TypeError("argument should be a Buffer");if(_||(_=0),!R&&R!==0&&(R=this.length),h>=d.length&&(h=d.length),h||(h=0),R>0&&R<_&&(R=_),R===_||d.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),d.length-h<R-_&&(R=d.length-h+_);const k=R-_;return this===d&&typeof o.prototype.copyWithin=="function"?this.copyWithin(h,_,R):o.prototype.set.call(d,this.subarray(_,R),h),k},l.prototype.fill=function(d,h,_,R){if(typeof d=="string"){if(typeof h=="string"?(R=h,h=0,_=this.length):typeof _=="string"&&(R=_,_=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!l.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(d.length===1){const N=d.charCodeAt(0);(R==="utf8"&&N<128||R==="latin1")&&(d=N)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(h<0||this.length<h||this.length<_)throw new RangeError("Out of range index");if(_<=h)return this;h=h>>>0,_=_===void 0?this.length:_>>>0,d||(d=0);let k;if(typeof d=="number")for(k=h;k<_;++k)this[k]=d;else{const N=l.isBuffer(d)?d:l.from(d,R),ne=N.length;if(ne===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(k=0;k<_-h;++k)this[k+h]=N[k%ne]}return this};const $e={};function gt(w,d,h){$e[w]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}gt("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),gt("ERR_INVALID_ARG_TYPE",function(w,d){return`The "${w}" argument must be of type number. Received type ${typeof d}`},TypeError),gt("ERR_OUT_OF_RANGE",function(w,d,h){let _=`The value of "${w}" is out of range.`,R=h;return Number.isInteger(h)&&Math.abs(h)>2**32?R=tt(String(h)):typeof h=="bigint"&&(R=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(R=tt(R)),R+="n"),_+=` It must be ${d}. Received ${R}`,_},RangeError);function tt(w){let d="",h=w.length;const _=w[0]==="-"?1:0;for(;h>=_+4;h-=3)d=`_${w.slice(h-3,h)}${d}`;return`${w.slice(0,h)}${d}`}function Tr(w,d,h){rt(d,"offset"),(w[d]===void 0||w[d+h]===void 0)&&kt(d,w.length-(h+1))}function Rr(w,d,h,_,R,k){if(w>h||w<d){const N=typeof d=="bigint"?"n":"";let ne;throw d===0||d===BigInt(0)?ne=`>= 0${N} and < 2${N} ** ${(k+1)*8}${N}`:ne=`>= -(2${N} ** ${(k+1)*8-1}${N}) and < 2 ** ${(k+1)*8-1}${N}`,new $e.ERR_OUT_OF_RANGE("value",ne,w)}Tr(_,R,k)}function rt(w,d){if(typeof w!="number")throw new $e.ERR_INVALID_ARG_TYPE(d,"number",w)}function kt(w,d,h){throw Math.floor(w)!==w?(rt(w,h),new $e.ERR_OUT_OF_RANGE("offset","an integer",w)):d<0?new $e.ERR_BUFFER_OUT_OF_BOUNDS:new $e.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,w)}const or=/[^+/0-9A-Za-z-_]/g;function Ft(w){if(w=w.split("=")[0],w=w.trim().replace(or,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function Ar(w,d){d=d||1/0;let h;const _=w.length;let R=null;const k=[];for(let N=0;N<_;++N){if(h=w.charCodeAt(N),h>55295&&h<57344){if(!R){if(h>56319){(d-=3)>-1&&k.push(239,191,189);continue}else if(N+1===_){(d-=3)>-1&&k.push(239,191,189);continue}R=h;continue}if(h<56320){(d-=3)>-1&&k.push(239,191,189),R=h;continue}h=(R-55296<<10|h-56320)+65536}else R&&(d-=3)>-1&&k.push(239,191,189);if(R=null,h<128){if((d-=1)<0)break;k.push(h)}else if(h<2048){if((d-=2)<0)break;k.push(h>>6|192,h&63|128)}else if(h<65536){if((d-=3)<0)break;k.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((d-=4)<0)break;k.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return k}function ir(w){const d=[];for(let h=0;h<w.length;++h)d.push(w.charCodeAt(h)&255);return d}function zn(w,d){let h,_,R;const k=[];for(let N=0;N<w.length&&!((d-=2)<0);++N)h=w.charCodeAt(N),_=h>>8,R=h%256,k.push(R),k.push(_);return k}function yt(w){return e.toByteArray(Ft(w))}function kr(w,d,h,_){let R;for(R=0;R<_&&!(R+h>=d.length||R>=w.length);++R)d[R+h]=w[R];return R}function Ye(w,d){return w instanceof d||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===d.name}function Ie(w){return w!==w}const Bt=function(){const w="0123456789abcdef",d=new Array(256);for(let h=0;h<16;++h){const _=h*16;for(let R=0;R<16;++R)d[_+R]=w[h]+w[R]}return d}();function vt(w){return typeof BigInt>"u"?Zs:w}function Zs(){throw new Error("BigInt not supported")}})(du);const Ha=du.Buffer;var Tn=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function mv(t,e,r){const n=new URL(e,t);if(r)for(const[s,o]of Object.entries(r))o!==void 0&&n.searchParams.set(s,o);return n.toString()}async function gv(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function yv(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:o,headers:i}){const a=mv(t.baseUrl,n,s),c=await gv(t.auth),u=await e(a,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...c,...i},body:o?JSON.stringify(o):void 0}),l=await u.text(),m=(u.headers.get("content-type")||"").includes("application/json"),y=m&&l?JSON.parse(l):l;if(!u.ok){const f=m?y:void 0,b=f==null?void 0:f.error;throw new Tn((b==null?void 0:b.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:f})}return{status:u.status,headers:u.headers,data:y}}}}function Zn(t){return t.join("")}var vv=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Zn(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zn(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zn(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zn(t.namespace)}`}),!0}catch(e){if(e instanceof Tn&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Tn&&r.status===409)return;throw r}}};function Or(t){return t.join("")}var wv=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Or(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Or(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Or(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Or(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Or(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Or(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Tn&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Tn&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},bv=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=yv({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new vv(this.client,e),this.tableOps=new wv(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},zs=class extends Error{constructor(t,e="storage",r,n){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function qs(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var es=class extends zs{constructor(t,e,r,n="storage"){super(t,n,e,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},fu=class extends zs{constructor(t,e,r="storage"){super(t,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const xv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_v=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Jo=t=>{if(Array.isArray(t))return t.map(r=>Jo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Jo(n)}),e},Ev=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Rn(t){"@babel/helpers - typeof";return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(t)}function Sv(t,e){if(Rn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cv(t){var e=Sv(t,"string");return Rn(e)=="symbol"?e:e+""}function Tv(t,e,r){return(e=Cv(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ga(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ga(Object(r),!0).forEach(function(n){Tv(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ga(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const Ja=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Rv=async(t,e,r,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t,o=s.status||500;if(typeof s.json=="function")s.json().then(i=>{const a=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||o+"";e(new es(Ja(i),o,a,n))}).catch(()=>{if(n==="vectors"){const i=o+"";e(new es(s.statusText||`HTTP ${o} error`,o,i,n))}else{const i=o+"";e(new es(s.statusText||`HTTP ${o} error`,o,i,n))}});else{const i=o+"";e(new es(s.statusText||`HTTP ${o} error`,o,i,n))}}else e(new fu(Ja(t),t,n))},Av=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!n?J(J({},s),r):(_v(n)?(s.headers=J({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),J(J({},s),r))};async function mn(t,e,r,n,s,o,i){return new Promise((a,c)=>{t(r,Av(e,n,s,o)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(i==="vectors"){const l=u.headers.get("content-type");if(!l||!l.includes("application/json"))return{}}return u.json()}).then(u=>a(u)).catch(u=>Rv(u,c,n,i))})}function kv(t="storage"){return{get:async(e,r,n,s)=>mn(e,"GET",r,n,s,void 0,t),post:async(e,r,n,s,o)=>mn(e,"POST",r,s,o,n,t),put:async(e,r,n,s,o)=>mn(e,"PUT",r,s,o,n,t),head:async(e,r,n,s)=>mn(e,"HEAD",r,J(J({},n),{},{noResolveJson:!0}),s,void 0,t),remove:async(e,r,n,s,o)=>mn(e,"DELETE",r,s,o,n,t)}}const Pv=kv("storage"),{get:An,post:we,put:Yo,head:Ov,remove:ji}=Pv;var un=class{constructor(t,e={},r,n="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=xv(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qs(r))return{data:null,error:r};throw r}}},Iv=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(qs(e))return{data:null,error:e};throw e}}};let pu;pu=Symbol.toStringTag;var jv=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[pu]="BlobDownloadBuilder",this.promise=null}asStream(){return new Iv(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(qs(e))return{data:null,error:e};throw e}}};const Nv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ya={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Dv=class extends un{constructor(t,e={},r,n){super(t,e,n,"storage"),this.bucketId=r}async uploadOrUpdate(t,e,r,n){var s=this;return s.handleOperation(async()=>{let o;const i=J(J({},Ya),n);let a=J(J({},s.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",s.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",i.cacheControl),c&&!o.has("metadata")&&o.append("metadata",s.encodeMetadata(c))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,c&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!i.duplex&&(i.duplex="half")),n!=null&&n.headers&&(a=J(J({},a),n.headers));const u=s._removeEmptyFolders(e),l=s._getFinalPath(u),m=await(t=="PUT"?Yo:we)(s.fetch,`${s.url}/object/${l}`,o,J({headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{path:u,id:m.Id,fullPath:m.Key}})}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var s=this;const o=s._removeEmptyFolders(t),i=s._getFinalPath(o),a=new URL(s.url+`/object/upload/sign/${i}`);return a.searchParams.set("token",e),s.handleOperation(async()=>{let c;const u=J({upsert:Ya.upsert},n),l=J(J({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType),{path:o,fullPath:(await Yo(s.fetch,a.toString(),c,{headers:l})).Key}})}async createSignedUploadUrl(t,e){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(t);const s=J({},r.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const o=await we(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(r.url+o.url),a=i.searchParams.get("token");if(!a)throw new zs("No token returned by API");return{signedUrl:i.toString(),path:t,token:a}})}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;return n.handleOperation(async()=>await we(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(t,e,r){var n=this;return n.handleOperation(async()=>({path:(await we(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(t,e,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(t),o=await we(n.fetch,`${n.url}/object/sign/${s}`,J({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${o.signedURL}${i}`)}})}async createSignedUrls(t,e,r){var n=this;return n.handleOperation(async()=>{const s=await we(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(i=>J(J({},i),{},{signedUrl:i.signedURL?encodeURI(`${n.url}${i.signedURL}${o}`):null}))})}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=n?`?${n}`:"",o=this._getFinalPath(t),i=()=>An(this.fetch,`${this.url}/${r}/${o}${s}`,{headers:this.headers,noResolveJson:!0});return new jv(i,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);return e.handleOperation(async()=>Jo(await An(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})))}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await Ov(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(qs(n)&&n instanceof fu){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});i!==""&&n.push(i);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await ji(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,r){var n=this;return n.handleOperation(async()=>{const s=J(J(J({},Nv),e),{},{prefix:t||""});return await we(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(t,e){var r=this;return r.handleOperation(async()=>{const n=J({},t);return await we(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Ha<"u"?Ha.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Mv="2.93.1",Bn={"X-Client-Info":`storage-js/${Mv}`};var $v=class extends un{constructor(t,e={},r,n){const s=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const o=s.href.replace(/\/$/,""),i=J(J({},Bn),e);super(o,i,r,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=e.listBucketOptionsToQueryString(t);return await An(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await An(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var r=this;return r.handleOperation(async()=>await we(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async updateBucket(t,e){var r=this;return r.handleOperation(async()=>await Yo(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await ji(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Lv=class extends un{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=J(J({},Bn),e);super(n,s,r,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return await An(e.fetch,s,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await ji(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!Ev(t))throw new zs("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new bv({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,o){const i=s[o];return typeof i!="function"?i:async(...a)=>{try{return{data:await i.apply(s,a),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}},Fv=class extends un{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=J(J({},Bn),{},{"Content-Type":"application/json"},e);super(n,s,r,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var r=this;return r.handleOperation(async()=>await we(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var r=this;return r.handleOperation(async()=>await we(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{})}},Bv=class extends un{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=J(J({},Bn),{},{"Content-Type":"application/json"},e);super(n,s,r,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await we(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await we(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await we(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},Uv=class extends un{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=J(J({},Bn),{},{"Content-Type":"application/json"},e);super(n,s,r,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await we(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Vv=class extends Uv{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Wv(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},Wv=class extends Fv{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new zv(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},zv=class extends Bv{constructor(t,e,r,n,s){super(t,e,s),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,J(J({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},qv=class extends $v{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new Dv(this.url,this.headers,t,this.fetch)}get vectors(){return new Vv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Lv(this.url+"/iceberg",this.headers,this.fetch)}};const mu="2.93.1",Ur=30*1e3,Qo=3,go=Qo*Ur,Kv="http://localhost:9999",Hv="supabase.auth.token",Gv={"X-Client-Info":`gotrue-js/${mu}`},Xo="X-Supabase-Api-Version",gu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Yv=10*60*1e3;class kn extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Qv extends kn{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Xv(t){return q(t)&&t.name==="AuthApiError"}class fr extends kn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Lt extends kn{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class qe extends Lt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yo(t){return q(t)&&t.name==="AuthSessionMissingError"}class Ir extends Lt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ts extends Lt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class rs extends Lt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zv(t){return q(t)&&t.name==="AuthImplicitGrantRedirectError"}class Qa extends Lt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ew extends Lt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Zo extends Lt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function vo(t){return q(t)&&t.name==="AuthRetryableFetchError"}class Xa extends Lt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ei extends Lt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const bs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Za=` 	
\r=`.split(""),tw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Za.length;e+=1)t[Za[e].charCodeAt(0)]=-2;for(let e=0;e<bs.length;e+=1)t[bs[e].charCodeAt(0)]=e;return t})();function ec(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(bs[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(bs[n]),e.queuedBits-=6}}function yu(t,e,r){const n=tw[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function tc(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{sw(i,n,r)};for(let i=0;i<t.length;i+=1)yu(t.charCodeAt(i),s,o);return e.join("")}function rw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nw(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}rw(n,e)}}function sw(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Kr(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)yu(t.charCodeAt(s),r,n);return new Uint8Array(e)}function ow(t){const e=[];return nw(t,r=>e.push(r)),new Uint8Array(e)}function pr(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>ec(s,r,n)),ec(null,r,n),e.join("")}function iw(t){return Math.round(Date.now()/1e3)+t}function aw(){return Symbol("auth-callback")}const Oe=()=>typeof window<"u"&&typeof document<"u",cr={tested:!1,writable:!1},vu=()=>{if(!Oe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cr.tested)return cr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),cr.tested=!0,cr.writable=!0}catch{cr.tested=!0,cr.writable=!1}return cr.writable};function cw(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const wu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},lr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Pe=async(t,e)=>{await t.removeItem(e)};class Ks{constructor(){this.promise=new Ks.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Ks.promiseConstructor=Promise;function ns(t){const e=t.split(".");if(e.length!==3)throw new ei("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Jv.test(e[n]))throw new ei("JWT not in base64url format");return{header:JSON.parse(tc(e[0])),payload:JSON.parse(tc(e[1])),signature:Kr(e[2]),raw:{header:e[0],payload:e[1]}}}async function uw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function dw(t,e){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){n(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function hw(t){return("0"+t.toString(16)).substr(-2)}function fw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,hw).join("")}async function pw(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function mw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await pw(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jr(t,e,r=!1){const n=fw();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Vr(t,`${e}-code-verifier`,s);const o=await mw(n);return[o,n===o?"plain":"s256"]}const gw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yw(t){const e=t.headers.get(Xo);if(!e||!e.match(gw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ww(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nr(t){if(!bw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wo(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xw(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function rc(t){return JSON.parse(JSON.stringify(t))}const ur=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_w=[502,503,504];async function nc(t){var e;if(!lw(t))throw new Zo(ur(t),0);if(_w.includes(t.status))throw new Zo(ur(t),t.status);let r;try{r=await t.json()}catch(o){throw new fr(ur(o),o)}let n;const s=yw(t);if(s&&s.getTime()>=gu["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Xa(ur(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new qe}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Xa(ur(r),t.status,r.weak_password.reasons);throw new Qv(ur(r),t.status||500,n)}const Ew=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function G(t,e,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Xo]||(o[Xo]=gu["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Sw(t,e,r+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Sw(t,e,r,n,s,o){const i=Ew(e,n,s,o);let a;try{a=await t(r,Object.assign({},i))}catch(c){throw console.error(c),new Zo(ur(c),0)}if(a.ok||await nc(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(c){await nc(c)}}function at(t){var e;let r=null;Rw(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=iw(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function sc(t){const e=at(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Jt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Cw(t){return{data:t,error:null}}function Tw(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=t,i=ln(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:a,user:c},error:null}}function oc(t){return t}function Rw(t){return t.access_token&&t.refresh_token&&t.expires_in}const bo=["global","local","others"];class Aw{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=wu(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=bo[0]){if(bo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bo.join(", ")}`);try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Jt})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ln(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Tw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jt})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,o,i,a,c;try{const u={nextPage:null,lastPage:0,total:0},l=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:oc});if(l.error)throw l.error;const m=await l.json(),y=(i=l.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(y)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(q(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Nr(e);try{return await G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jt})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Nr(e);try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Jt})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Nr(e);try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Jt})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Nr(e.userId);try{const{data:r,error:n}=await G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(q(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Nr(e.userId),Nr(e.id);try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,o,i,a,c;try{const u={nextPage:null,lastPage:0,total:0},l=await G(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:oc});if(l.error)throw l.error;const m=await l.json(),y=(i=l.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(y)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(q(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await G(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await G(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await G(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await G(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await G(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(q(r))return{data:null,error:r};throw r}}}function ic(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Dr={debug:!!(globalThis&&vu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class kw extends bu{}async function Pw(t,e,r){Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new kw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Dr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Ow(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xu(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Iw(t){return parseInt(t,16)}function jw(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Nw(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:i,notBefore:a,requestId:c,resources:u,scheme:l,uri:m,version:y}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=xu(t.address),b=l?`${l}://${n}`:n,v=t.statement?`${t.statement}
`:"",x=`${b} wants you to sign in with your Ethereum account:
${f}

${v}`;let E=`URI: ${m}
Version: ${y}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(s&&(E+=`
Expiration Time: ${s.toISOString()}`),a&&(E+=`
Not Before: ${a.toISOString()}`),c&&(E+=`
Request ID: ${c}`),u){let T=`
Resources:`;for(const S of u){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);T+=`
- ${S}`}E+=T}return`${x}
${E}`}class Ce extends Error{constructor({message:e,code:r,cause:n,name:s}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=s??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class xs extends Ce{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Dw({error:t,options:e}){var r,n,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ce({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ce({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ce({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ce({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ce({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ce({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Ce({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ce({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(_u(i)){if(o.rp.id!==i)return new Ce({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ce({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ce({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ce({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ce({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Mw({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ce({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ce({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(_u(n)){if(r.rpId!==n)return new Ce({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ce({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ce({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ce({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class $w{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Lw=new $w;function Fw(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=ln(t,["challenge","user","excludeCredentials"]),o=Kr(e).buffer,i=Object.assign(Object.assign({},r),{id:Kr(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:o,user:i});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Kr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Bw(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=ln(t,["challenge","allowCredentials"]),s=Kr(e).buffer,o=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let i=0;i<r.length;i++){const a=r[i];o.allowCredentials[i]=Object.assign(Object.assign({},a),{id:Kr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function Uw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:pr(new Uint8Array(t.response.attestationObject)),clientDataJSON:pr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Vw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:pr(new Uint8Array(s.authenticatorData)),clientDataJSON:pr(new Uint8Array(s.clientDataJSON)),signature:pr(new Uint8Array(s.signature)),userHandle:s.userHandle?pr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function _u(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ac(){var t,e;return!!(Oe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Ww(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xs("Browser returned unexpected credential type",e)}:{data:null,error:new xs("Empty credential response",e)}}catch(e){return{data:null,error:Dw({error:e,options:t})}}}async function zw(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xs("Browser returned unexpected credential type",e)}:{data:null,error:new xs("Empty credential response",e)}}catch(e){return{data:null,error:Mw({error:e,options:t})}}}const qw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Kw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function _s(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const o in s){const i=s[o];if(i!==void 0)if(Array.isArray(i))n[o]=i;else if(r(i))n[o]=i;else if(e(i)){const a=n[o];e(a)?n[o]=_s(a,i):n[o]=_s(i)}else n[o]=i}return n}function Hw(t,e){return _s(qw,t,e||{})}function Gw(t,e){return _s(Kw,t,e||{})}class Jw{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},o){try{const{data:i,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!i)return{data:null,error:a};const c=s??Lw.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=Hw(i.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:l,error:m}=await Ww({publicKey:u,signal:c});return l?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:l}},error:null}:{data:null,error:m}}case"request":{const u=Gw(i.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:l,error:m}=await zw(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return l?{data:{factorId:e,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:l}},error:null}:{data:null,error:m}}}}catch(i){return q(i)?{data:null,error:i}:{data:null,error:new fr("Unexpected error in challenge",i)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new kn("rpId is required for WebAuthn authentication")};try{if(!ac())return{data:null,error:new fr("Browser does not support WebAuthn",null)};const{data:i,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:o});if(!i)return{data:null,error:a};const{webauthn:c}=i;return this._verify({factorId:e,challengeId:i.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(i){return q(i)?{data:null,error:i}:{data:null,error:new fr("Unexpected error in authenticate",i)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!r)return{data:null,error:new kn("rpId is required for WebAuthn registration")};try{if(!ac())return{data:null,error:new fr("Browser does not support WebAuthn",null)};const{data:i,error:a}=await this._enroll({friendlyName:e});if(!i)return await this.client.mfa.listFactors().then(l=>{var m;return(m=l.data)===null||m===void 0?void 0:m.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(l=>l?this.client.mfa.unenroll({factorId:l==null?void 0:l.id}):void 0),{data:null,error:a};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:o});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return q(i)?{data:null,error:i}:{data:null,error:new fr("Unexpected error in register",i)}}}}Ow();const Yw={url:Kv,storageKey:Hv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function cc(t,e,r){return await r()}const Mr={};class Pn{get jwks(){var e,r;return(r=(e=Mr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Mr[this.storageKey]=Object.assign(Object.assign({},Mr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Mr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mr[this.storageKey]=Object.assign(Object.assign({},Mr[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},Yw),e);if(this.storageKey=o.storageKey,this.instanceID=(r=Pn.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Pn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Oe()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Aw({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=wu(o.fetch),this.lock=o.lock||cc,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Oe()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Pw:this.lock=cc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Jw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:vu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ic(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=ic(this.memoryStorage)),Oe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i);try{await this._notifyAllSubscribers(i.data.event,i.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(i=>{this._debug("#initialize()","error",i)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mu}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Oe()&&(r=cw(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Oe()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Zv(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return q(r)?this._returnResult({error:r}):this._returnResult({error:new fr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const o=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:at}),{data:i,error:a}=o;if(a||!i)return this._returnResult({data:{user:null,session:null},error:a});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(q(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,n,s;try{let o;if("email"in e){const{email:l,password:m,options:y}=e;let f=null,b=null;this.flowType==="pkce"&&([f,b]=await jr(this.storage,this.storageKey)),o=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:l,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:f,code_challenge_method:b},xform:at})}else if("phone"in e){const{phone:l,password:m,options:y}=e;o=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:l,password:m,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:at})}else throw new ts("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return await Pe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(o){if(await Pe(this.storage,`${this.storageKey}-code-verifier`),q(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:i,options:a}=e;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:sc})}else if("phone"in e){const{phone:o,password:i,options:a}=e;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:sc})}else throw new ts("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const o=new Ir;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(q(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,o,i,a,c,u,l,m,y;let f,b;if("message"in e)f=e.message,b=e.signature;else{const{chain:v,wallet:x,statement:E,options:T}=e;let S;if(Oe())if(typeof x=="object")S=x;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")S=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const C=new URL((r=T==null?void 0:T.url)!==null&&r!==void 0?r:window.location.href),A=await S.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=xu(A[0]);let I=(n=T==null?void 0:T.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!I){const D=await S.request({method:"eth_chainId"});I=Iw(D)}const P={domain:C.host,address:O,statement:E,uri:C.href,version:"1",chainId:I,nonce:(s=T==null?void 0:T.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(o=T==null?void 0:T.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(a=T==null?void 0:T.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(c=T==null?void 0:T.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=T==null?void 0:T.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(l=T==null?void 0:T.signInWithEthereum)===null||l===void 0?void 0:l.resources};f=Nw(P),b=await S.request({method:"personal_sign",params:[jw(f),O]})}try{const{data:v,error:x}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:b},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:at});if(x)throw x;if(!v||!v.session||!v.user){const E=new Ir;return this._returnResult({data:{user:null,session:null},error:E})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(q(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var r,n,s,o,i,a,c,u,l,m,y,f;let b,v;if("message"in e)b=e.message,v=e.signature;else{const{chain:x,wallet:E,statement:T,options:S}=e;let C;if(Oe())if(typeof E=="object")C=E;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))C=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=E}const A=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const O=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),T?{statement:T}:null));let I;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")I=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)I=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)b=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),v=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${A.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(n=S==null?void 0:S.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((i=S==null?void 0:S.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((m=(l=S==null?void 0:S.signInWithSolana)===null||l===void 0?void 0:l.resources)===null||m===void 0)&&m.length?["Resources",...S.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const O=await C.signMessage(new TextEncoder().encode(b),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=O}}try{const{data:x,error:E}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:pr(v)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:at});if(E)throw E;if(!x||!x.session||!x.user){const T=new Ir;return this._returnResult({data:{user:null,session:null},error:T})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:E})}catch(x){if(q(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const r=await lr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new ew;const{data:o,error:i}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:at});if(await Pe(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!o||!o.session||!o.user){const a=new Ir;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(await Pe(this.storage,`${this.storageKey}-code-verifier`),q(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=e,a=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:at}),{data:c,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const l=new Ir;return this._returnResult({data:{user:null,session:null},error:l})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(q(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,o,i;try{if("email"in e){const{email:a,options:c}=e;let u=null,l=null;this.flowType==="pkce"&&([u,l]=await jr(this.storage,this.storageKey));const{error:m}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:l},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:l}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:l})}throw new ts("You must provide either an email or phone number.")}catch(a){if(await Pe(this.storage,`${this.storageKey}-code-verifier`),q(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:a}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:at});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,o,i;try{let a=null,c=null;this.flowType==="pkce"&&([a,c]=await jr(this.storage,this.storageKey));const u=await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:Cw});return!((o=u.data)===null||o===void 0)&&o.url&&Oe()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Pe(this.storage,`${this.storageKey}-code-verifier`),q(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new qe;const{error:s}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(q(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:o}=e,{error:i}=await G(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in e){const{phone:n,type:s,options:o}=e,{data:i,error:a}=await G(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a})}throw new ts("You must provide either an email or phone number and a type")}catch(r){if(q(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await lr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<go:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const i=await lr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=wo()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};e.user=xw(e.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jt}):await this._useSession(async r=>{var n,s,o;const{data:i,error:a}=r;if(a)throw a;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qe}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Jt})})}catch(r){if(q(r))return yo(r)&&(await this._removeSession(),await Pe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new qe;const i=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await jr(this.storage,this.storageKey));const{data:u,error:l}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:i.access_token,xform:Jt});if(l)throw l;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(n){if(await Pe(this.storage,`${this.storageKey}-code-verifier`),q(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qe;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=ns(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{data:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(q(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:a}=r;if(a)throw a;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new qe;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(q(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Oe())throw new rs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new rs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Qa("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qa("No code detected.");const{data:T,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:c,token_type:u}=e;if(!o||!a||!i||!u)throw new rs("No session defined in URL");const l=Math.round(Date.now()/1e3),m=parseInt(a);let y=l+m;c&&(y=parseInt(c));const f=y-l;f*1e3<=Ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${m}s`);const b=y-m;l-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,l):l-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,l);const{data:v,error:x}=await this._getUser(o);if(x)throw x;const E={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:m,expires_at:y,refresh_token:i,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:e.type},error:null})}catch(n){if(q(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await lr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o&&!yo(o))return this._returnResult({error:o});const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(Xv(a)&&(a.status===404||a.status===401||a.status===403)||yo(a)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Pe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=aw(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await jr(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await Pe(this.storage,`${this.storageKey}-code-verifier`),q(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,a,c,u,l;const{data:m,error:y}=o;if(y)throw y;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",f,{headers:this.headers,jwt:(l=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&l!==void 0?l:void 0})});if(s)throw s;return Oe()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(q(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:o}}=r;if(s)throw s;const{options:i,provider:a,token:c,access_token:u,nonce:l}=e,m=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:c,access_token:u,nonce:l,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:at}),{data:y,error:f}=m;return f?this._returnResult({data:{user:null,session:null},error:f}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Ir}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:f}))}catch(s){if(await Pe(this.storage,`${this.storageKey}-code-verifier`),q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await dw(async s=>(s>0&&await uw(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:at})),(s,o)=>{const i=200*Math.pow(2,s);return o&&vo(o)&&Date.now()+i-n<Ur})}catch(n){if(this._debug(r,"error",n),q(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Oe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await lr(this.storage,this.storageKey);if(s&&this.userStorage){let i=await lr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Vr(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:wo()}else if(s&&!s.user&&!s.user){const i=await lr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Pe(this.storage,this.storageKey+"-user"),await Vr(this.storage,this.storageKey,s)):s.user=wo()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<go;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${go}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),vo(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:a}=await this._getUser(s.access_token);!a&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ks;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new qe;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={data:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),q(o)){const i={data:null,error:o};return vo(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Pe(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Vr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=rc(s);await Vr(this.storage,this.storageKey,o)}else{const s=rc(r);await Vr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Pe(this.storage,this.storageKey),await Pe(this.storage,this.storageKey+"-code-verifier"),await Pe(this.storage,this.storageKey+"-user"),this.userStorage&&await Pe(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Oe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ur);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ur}ms, refresh threshold is ${Qo} ticks`),s<=Qo&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof bu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Oe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await jr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?this._returnResult({data:null,error:o}):await G(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await G(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Uw(e.webauthn.credential_response):Vw(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:c}=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:i,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:c}))})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return this._returnResult({data:null,error:o});const i=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(i.error)return i;const{data:a}=i;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Fw(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Bw(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var r,n,s,o;if(e)try{const{payload:f}=ns(e);let b=null;f.aal&&(b=f.aal);let v=b;const{data:{user:x},error:E}=await this.getUser(e);if(E)return this._returnResult({data:null,error:E});((n=(r=x==null?void 0:x.factors)===null||r===void 0?void 0:r.filter(C=>C.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(v="aal2");const S=f.amr||[];return{data:{currentLevel:b,nextLevel:v,currentAuthenticationMethods:S},error:null}}catch(f){if(q(f))return this._returnResult({data:null,error:f});throw f}const{data:{session:i},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=ns(i.access_token);let u=null;c.aal&&(u=c.aal);let l=u;((o=(s=i.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(l="aal2");const y=c.amr||[];return{data:{currentLevel:u,nextLevel:l,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await G(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new qe})})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new qe});const i=await G(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return i.data&&i.data.redirect_url&&Oe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new qe});const i=await G(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return i.data&&i.data.redirect_url&&Oe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await G(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new qe})})}catch(e){if(q(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await G(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new qe})})}catch(r){if(q(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+Yv>s)return n;const{data:o,error:i}=await G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:f,error:b}=await this.getSession();if(b||!f.session)return this._returnResult({data:null,error:b});n=f.session.access_token}const{header:s,payload:o,signature:i,raw:{header:a,payload:c}}=ns(n);r!=null&&r.allowExpired||vw(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:o,header:s,signature:i},error:null}}const l=ww(s.alg),m=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,m,i,ow(`${a}.${c}`)))throw new ei("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(q(n))return this._returnResult({data:null,error:n});throw n}}}Pn.nextInstanceID={};const Qw=Pn,Xw="2.93.1";let gn="";typeof Deno<"u"?gn="deno":typeof document<"u"?gn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gn="react-native":gn="node";function Zw(){const t=globalThis.process;if(t&&t.platform){const e=t.platform;if(e==="darwin")return"macOS";if(e==="win32")return"Windows";if(e==="linux")return"Linux";if(e==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const e=navigator.userAgentData.platform;if(e==="macOS")return"macOS";if(e==="Windows")return"Windows";if(e==="Linux")return"Linux";if(e==="Android")return"Android";if(e==="iOS")return"iOS"}return null}function eb(){const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node&&typeof window>"u")try{const r=globalThis.require;if(r)return r("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function tb(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node)return"node"}return null}function rb(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node)return e.node}return null}function nb(){const t={"X-Client-Info":`supabase-js-${gn}/${Xw}`},e=Zw();e&&(t["X-Supabase-Client-Platform"]=e);const r=eb();r&&(t["X-Supabase-Client-Platform-Version"]=r);const n=tb();n&&(t["X-Supabase-Client-Runtime"]=n);const s=rb();return s&&(t["X-Supabase-Client-Runtime-Version"]=s),t}const sb=nb(),ob={headers:sb},ib={schema:"public"},ab={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cb={};function On(t){"@babel/helpers - typeof";return On=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(t)}function lb(t,e){if(On(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(On(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ub(t){var e=lb(t,"string");return On(e)=="symbol"?e:e+""}function db(t,e,r){return(e=ub(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function _e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lc(Object(r),!0).forEach(function(n){db(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const hb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),fb=()=>Headers,pb=(t,e,r)=>{const n=hb(r),s=fb();return async(o,i)=>{var a;const c=(a=await e())!==null&&a!==void 0?a:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,_e(_e({},i),{},{headers:u}))}};function mb(t){return t.endsWith("/")?t:t+"/"}function gb(t,e){var r,n;const{db:s,auth:o,realtime:i,global:a}=t,{db:c,auth:u,realtime:l,global:m}=e,y={db:_e(_e({},c),s),auth:_e(_e({},u),o),realtime:_e(_e({},l),i),storage:{},global:_e(_e(_e({},m),a),{},{headers:_e(_e({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function yb(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(mb(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var vb=class extends Qw{constructor(t){super(t)}},wb=class{constructor(t,e,r){var n,s;this.supabaseUrl=t,this.supabaseKey=e;const o=yb(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const i=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:ib,realtime:cb,auth:_e(_e({},ab),{},{storageKey:i}),global:ob},c=gb(r??{},a);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(l,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=pb(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(_e({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(l=>this.realtime.setAuth(l)).catch(l=>console.warn("Failed to set initial Realtime auth token:",l)),this.rest=new Wy(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new qv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Ly(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:o,flowType:i,lock:a,debug:c,throwOnError:u},l,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vb({url:this.authUrl.href,headers:_e(_e({},y),l),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,flowType:i,lock:a,debug:c,throwOnError:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new iv(this.realtimeUrl.href,_e(_e({},t),{},{params:_e(_e({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const bb=(t,e,r)=>new wb(t,e,r);function xb(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}xb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _b="https://isaojcmuooftwhdnubhs.supabase.co",Eb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlzYW9qY211b29mdHdoZG51YmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4MjE4MTgsImV4cCI6MjA3MDM5NzgxOH0.cexAMM2q1sLCAIpRUe2L-NUhKFV5RUVaT2tR8nt-PjQ",Be=bb(_b,Eb,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Eu=p.createContext({user:null,session:null,loading:!0,signIn:async()=>({error:null}),signUp:async()=>({error:null}),signOut:async()=>{}}),Sb=({children:t})=>{const[e,r]=p.useState(null),[n,s]=p.useState(null),[o,i]=p.useState(!0);console.log("AuthProvider render - user:",e,"session:",n,"loading:",o),p.useEffect(()=>{const{data:{subscription:l}}=Be.auth.onAuthStateChange((y,f)=>{s(f),r((f==null?void 0:f.user)??null)}),m=setTimeout(()=>{console.warn("Auth session check timed out, continuing without session"),i(!1)},5e3);return Be.auth.getSession().then(({data:{session:y}})=>{clearTimeout(m),s(y),r((y==null?void 0:y.user)??null),i(!1)}).catch(y=>{clearTimeout(m),console.error("Failed to get session:",y),i(!1)}),()=>{clearTimeout(m),l.unsubscribe()}},[]);const a=async(l,m)=>{const{error:y}=await Be.auth.signInWithPassword({email:l,password:m});return{error:y}},c=async(l,m)=>{let y;window.location.hostname.includes("github.io")?y=`${window.location.origin}/put-options-se/#/auth/callback`:y=`${window.location.origin}/#/auth/callback`,console.log("SignUp redirect URL:",y);const{error:f}=await Be.auth.signUp({email:l,password:m,options:{emailRedirectTo:y}});return{error:f}},u=async()=>{await Be.auth.signOut()};return g.jsx(Eu.Provider,{value:{user:e,session:n,loading:o,signIn:a,signUp:c,signOut:u},children:t})},dn=()=>p.useContext(Eu),Cb=()=>{const{user:t}=dn(),[e,r]=p.useState([]),[n,s]=p.useState([]),[o,i]=p.useState({underlyingValue:1e5,transactionCost:150}),[a,c]=p.useState(!0);p.useEffect(()=>{if(!t){c(!1);return}u()},[t]);const u=async()=>{if(t)try{c(!0);const{data:f,error:b}=await Be.from("user_preferences").select("preference_type, preference_data").eq("user_id",t.id);if(b){console.error("Error loading preferences:",b);return}f==null||f.forEach(v=>{v.preference_type==="column_preferences"?r(v.preference_data):v.preference_type==="portfolio_column_preferences"?s(v.preference_data):v.preference_type==="calculation_settings"&&i(v.preference_data)})}catch(f){console.error("Error loading preferences:",f)}finally{c(!1)}};return{columnPreferences:e,portfolioColumnPreferences:n,calculationSettings:o,isLoading:a,saveColumnPreferences:async f=>{if(!t){console.log("User not authenticated, skipping column preferences save");return}try{const{error:b}=await Be.from("user_preferences").upsert({user_id:t.id,preference_type:"column_preferences",preference_data:f},{onConflict:"user_id,preference_type"});if(b){ct.error("Failed to save column preferences"),console.error("Error saving column preferences:",b);return}r(f),ct.success("Column preferences saved")}catch(b){ct.error("Failed to save column preferences"),console.error("Error saving column preferences:",b)}},savePortfolioColumnPreferences:async f=>{if(!t){console.log("User not authenticated, skipping portfolio column preferences save");return}try{const{error:b}=await Be.from("user_preferences").upsert({user_id:t.id,preference_type:"portfolio_column_preferences",preference_data:f},{onConflict:"user_id,preference_type"});if(b){ct.error("Failed to save portfolio column preferences"),console.error("Error saving portfolio column preferences:",b);return}s(f),ct.success("Portfolio column preferences saved")}catch(b){ct.error("Failed to save portfolio column preferences"),console.error("Error saving portfolio column preferences:",b)}},saveCalculationSettings:async f=>{if(!t){console.log("User not authenticated, skipping calculation settings save");return}try{const{error:b}=await Be.from("user_preferences").upsert({user_id:t.id,preference_type:"calculation_settings",preference_data:f},{onConflict:"user_id,preference_type"});if(b){ct.error("Failed to save calculation settings"),console.error("Error saving calculation settings:",b);return}i(f),ct.success("Calculation settings saved")}catch(b){ct.error("Failed to save calculation settings"),console.error("Error saving calculation settings:",b)}},refreshPreferences:u}},Su=p.createContext(void 0),Tb=()=>{const t=p.useContext(Su);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t},Rb=({children:t})=>{const{calculationSettings:e,saveCalculationSettings:r,isLoading:n}=Cb(),[s,o]=p.useState(1e5),[i,a]=p.useState(150),c=p.useRef(!1),u=p.useRef({underlyingValue:1e5,transactionCost:150}),l=p.useRef(!1);p.useEffect(()=>{if(!n&&(console.log("SettingsContext: useEffect running",{calculationSettings:e,underlyingValue:s,transactionCost:i,userUpdate:c.current,hasInitialized:l.current,lastUserValue:u.current}),!l.current||!c.current)){if(e.underlyingValue!==1e5||e.transactionCost!==150)e.underlyingValue!==s&&!c.current&&(console.log("SettingsContext: Initial sync - updating underlying value from DB:",e.underlyingValue),o(e.underlyingValue),u.current.underlyingValue=e.underlyingValue),e.transactionCost!==i&&!c.current&&(console.log("SettingsContext: Initial sync - updating transaction cost from DB:",e.transactionCost),a(e.transactionCost),u.current.transactionCost=e.transactionCost);else if(!l.current){const f=localStorage.getItem("underlyingValue");if(f){const v=parseInt(f,10);!isNaN(v)&&v>0&&v!==s&&(console.log("SettingsContext: Initial sync - updating underlying value from localStorage:",v),o(v),u.current.underlyingValue=v)}const b=localStorage.getItem("transactionCost");if(b){const v=parseInt(b,10);!isNaN(v)&&v>=0&&v!==i&&(console.log("SettingsContext: Initial sync - updating transaction cost from localStorage:",v),a(v),u.current.transactionCost=v)}}l.current=!0}},[e,n]);const m=f=>{console.log("SettingsContext: User setting underlying value to",f,"Previous value was:",s),c.current=!0,o(f),u.current.underlyingValue=f,localStorage.setItem("underlyingValue",f.toString()),r({underlyingValue:f,transactionCost:i}),console.log("SettingsContext: Updated both localStorage and database with underlying value:",f)},y=f=>{console.log("SettingsContext: User setting transaction cost to",f,"Previous value was:",i),c.current=!0,a(f),u.current.transactionCost=f,localStorage.setItem("transactionCost",f.toString()),r({underlyingValue:s,transactionCost:f}),console.log("SettingsContext: Updated both localStorage and database with transaction cost:",f)};return g.jsx(Su.Provider,{value:{underlyingValue:s,setUnderlyingValue:m,transactionCost:i,setTransactionCost:y},children:t})},Ve=({children:t})=>{const{session:e,loading:r}=dn(),n=di();return r?g.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:g.jsxs("div",{className:"flex flex-col items-center gap-3",children:[g.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):e?g.jsx(g.Fragment,{children:t}):g.jsx(kh,{to:"/auth",replace:!0,state:{from:n}})};var Ab=Symbol.for("react.lazy"),Es=ui[" use ".trim().toString()];function kb(t){return typeof t=="object"&&t!==null&&"then"in t}function Cu(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Ab&&"_payload"in t&&kb(t._payload)}function Tu(t){const e=Ob(t),r=p.forwardRef((n,s)=>{let{children:o,...i}=n;Cu(o)&&typeof Es=="function"&&(o=Es(o._payload));const a=p.Children.toArray(o),c=a.find(jb);if(c){const u=c.props.children,l=a.map(m=>m===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:m);return g.jsx(e,{...i,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,l):null})}return g.jsx(e,{...i,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}var Pb=Tu("Slot");function Ob(t){const e=p.forwardRef((r,n)=>{let{children:s,...o}=r;if(Cu(s)&&typeof Es=="function"&&(s=Es(s._payload)),p.isValidElement(s)){const i=Db(s),a=Nb(o,s.props);return s.type!==p.Fragment&&(a.ref=n?sr(n,i):i),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Ib=Symbol("radix.slottable");function jb(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ib}function Nb(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function Db(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const Mb=gi("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ze=p.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},o)=>{const i=n?Pb:"button";return g.jsx(i,{className:be(Mb({variant:e,size:r,className:t})),ref:o,...s})});Ze.displayName="Button";class $b extends p.Component{constructor(){super(...arguments);Ji(this,"state",{hasError:!1})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n)}render(){var r,n;return this.state.hasError?g.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:g.jsxs("div",{className:"text-center max-w-md",children:[g.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),g.jsx("p",{className:"text-muted-foreground mb-4",children:"The application encountered an error and couldn't render properly."}),g.jsxs("details",{className:"text-left text-sm bg-muted p-4 rounded mb-4",children:[g.jsx("summary",{className:"cursor-pointer font-medium",children:"Error details"}),g.jsxs("pre",{className:"mt-2 text-xs overflow-auto",children:[(r=this.state.error)==null?void 0:r.message,`
`,(n=this.state.error)==null?void 0:n.stack]})]}),g.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Reload Page"})]})}):this.props.children}}const Lb=10,Fb=5e3,Ru=()=>{const{user:t}=dn(),[e]=p.useState(()=>crypto.randomUUID()),r=p.useRef([]),n=p.useRef(null),s=p.useRef(new Date),o=p.useRef(new Date),i=p.useRef(!1),a=p.useRef(!1);p.useEffect(()=>{t&&!i.current&&(c(),i.current=!0)},[t]),p.useEffect(()=>{const P=()=>{t&&(f(),u())};return window.addEventListener("beforeunload",P),()=>{window.removeEventListener("beforeunload",P),t&&r.current.length>0&&f()}},[t]);const c=async()=>{if(t)try{await Be.from("user_analytics_sessions").insert({session_id:e,user_id:t.id,started_at:s.current.toISOString(),last_activity_at:new Date().toISOString(),user_agent:navigator.userAgent,referrer:document.referrer||null,entry_page:window.location.pathname}),v({event_type:"session_start",event_name:"session_started",event_data:{user_agent:navigator.userAgent,screen_resolution:`${window.screen.width}x${window.screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`}})}catch(P){console.error("Failed to initialize analytics session:",P)}},u=()=>{if(!t)return;const D={ended_at:new Date().toISOString(),exit_page:window.location.pathname},B=new Blob([JSON.stringify({session_id:e,...D})],{type:"application/json"});navigator.sendBeacon("/api/analytics/session-end",B)},l=p.useCallback(async()=>{if(!t)return;const P=new Date;o.current=P;try{await Be.from("user_analytics_sessions").update({last_activity_at:P.toISOString()}).eq("session_id",e)}catch(D){console.error("Failed to update session activity:",D)}},[t,e]),m=p.useCallback(async P=>{if(t)try{const{data:D}=await Be.from("user_analytics_sessions").select(P).eq("session_id",e).single();D&&await Be.from("user_analytics_sessions").update({[P]:(D[P]||0)+1}).eq("session_id",e)}catch(D){console.error(`Failed to increment ${P}:`,D)}},[t,e]),y=p.useCallback(async()=>{if(!t||r.current.length===0||a.current)return;a.current=!0;const P=[...r.current];r.current=[];try{const D=P.map(U=>({user_id:t.id,session_id:e,...U})),{error:B}=await Be.from("user_analytics_events").insert(D);B&&(console.error("Failed to flush analytics events:",B),r.current=[...P,...r.current])}catch(D){console.error("Failed to flush analytics events:",D),r.current=[...P,...r.current]}finally{a.current=!1}},[t,e]),f=()=>{if(!t||r.current.length===0)return;const P=[...r.current];r.current=[];const D=P.map(U=>({user_id:t.id,session_id:e,...U})),B=new Blob([JSON.stringify(D)],{type:"application/json"});navigator.sendBeacon("/api/analytics/events",B)},b=p.useCallback(()=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{y()},Fb)},[y]),v=p.useCallback(P=>{t&&(r.current.push({...P,page_path:P.page_path||window.location.pathname,page_title:P.page_title||document.title}),l(),r.current.length>=Lb?y():b())},[t,y,b,l]),x=p.useCallback(async P=>{if(t)try{await Be.from("user_analytics_events").insert({user_id:t.id,session_id:e,...P,page_path:P.page_path||window.location.pathname,page_title:P.page_title||document.title})}catch(D){console.error("Failed to track event immediately:",D)}},[t,e]),E=p.useCallback((P,D,B)=>{v({event_type:"page_view",event_name:"page_viewed",page_path:P,page_title:D,event_data:B}),m("pages_visited")},[v,m]),T=p.useCallback((P,D)=>{v({event_type:"interaction",event_name:P,event_data:D}),m("interactions_count")},[v,m]),S=p.useCallback((P,D)=>{v({event_type:"filter_change",event_name:P,event_data:D})},[v]),C=p.useCallback((P,D)=>{v({event_type:"table_action",event_name:P,event_data:D})},[v]),A=p.useCallback((P,D)=>{v({event_type:"chart_view",event_name:P,event_data:D})},[v]),O=p.useCallback((P,D)=>{v({event_type:"export",event_name:P,event_data:D})},[v]),I=p.useCallback((P,D)=>{x({event_type:"error",event_name:P,event_data:D})},[x]);return{trackEvent:v,trackEventImmediate:x,trackPageView:E,trackInteraction:T,trackFilterChange:S,trackTableAction:C,trackChartView:A,trackExport:O,trackError:I,sessionId:e}};var xo="focusScope.autoFocusOnMount",_o="focusScope.autoFocusOnUnmount",uc={bubbles:!1,cancelable:!0},Bb="FocusScope",Ni=p.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=t,[a,c]=p.useState(null),u=Ge(s),l=Ge(o),m=p.useRef(null),y=fe(e,v=>c(v)),f=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let v=function(S){if(f.paused||!a)return;const C=S.target;a.contains(C)?m.current=C:Ht(m.current,{select:!0})},x=function(S){if(f.paused||!a)return;const C=S.relatedTarget;C!==null&&(a.contains(C)||Ht(m.current,{select:!0}))},E=function(S){if(document.activeElement===document.body)for(const A of S)A.removedNodes.length>0&&Ht(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const T=new MutationObserver(E);return a&&T.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),T.disconnect()}}},[n,a,f.paused]),p.useEffect(()=>{if(a){hc.add(f);const v=document.activeElement;if(!a.contains(v)){const E=new CustomEvent(xo,uc);a.addEventListener(xo,u),a.dispatchEvent(E),E.defaultPrevented||(Ub(Kb(Au(a)),{select:!0}),document.activeElement===v&&Ht(a))}return()=>{a.removeEventListener(xo,u),setTimeout(()=>{const E=new CustomEvent(_o,uc);a.addEventListener(_o,l),a.dispatchEvent(E),E.defaultPrevented||Ht(v??document.body,{select:!0}),a.removeEventListener(_o,l),hc.remove(f)},0)}}},[a,u,l,f]);const b=p.useCallback(v=>{if(!r&&!n||f.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,E=document.activeElement;if(x&&E){const T=v.currentTarget,[S,C]=Vb(T);S&&C?!v.shiftKey&&E===C?(v.preventDefault(),r&&Ht(S,{select:!0})):v.shiftKey&&E===S&&(v.preventDefault(),r&&Ht(C,{select:!0})):E===T&&v.preventDefault()}},[r,n,f.paused]);return g.jsx(le.div,{tabIndex:-1,...i,ref:y,onKeyDown:b})});Ni.displayName=Bb;function Ub(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ht(n,{select:e}),document.activeElement!==r)return}function Vb(t){const e=Au(t),r=dc(e,t),n=dc(e.reverse(),t);return[r,n]}function Au(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function dc(t,e){for(const r of t)if(!Wb(r,{upTo:e}))return r}function Wb(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function zb(t){return t instanceof HTMLInputElement&&"select"in t}function Ht(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&zb(t)&&e&&t.select()}}var hc=qb();function qb(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=fc(t,e),t.unshift(e)},remove(e){var r;t=fc(t,e),(r=t[0])==null||r.resume()}}}function fc(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function Kb(t){return t.filter(e=>e.tagName!=="A")}var Eo=0;function ku(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??pc()),document.body.insertAdjacentElement("beforeend",t[1]??pc()),Eo++,()=>{Eo===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Eo--}},[])}function pc(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ds="right-scroll-bar-position",hs="width-before-scroll-bar",Hb="with-scroll-bars-hidden",Gb="--removed-body-scroll-bar-size";function So(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Jb(t,e){var r=p.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var Yb=typeof window<"u"?p.useLayoutEffect:p.useEffect,mc=new WeakMap;function Qb(t,e){var r=Jb(null,function(n){return t.forEach(function(s){return So(s,n)})});return Yb(function(){var n=mc.get(r);if(n){var s=new Set(n),o=new Set(t),i=r.current;s.forEach(function(a){o.has(a)||So(a,null)}),o.forEach(function(a){s.has(a)||So(a,i)})}mc.set(r,t)},[t]),r}function Xb(t){return t}function Zb(t,e){e===void 0&&(e=Xb);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(o){var i=e(o,n);return r.push(i),function(){r=r.filter(function(a){return a!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(a){return o(a)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var a=r;r=[],a.forEach(o),i=r}var c=function(){var l=i;i=[],l.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(l){i.push(l),u()},filter:function(l){return i=i.filter(l),r}}}};return s}function e0(t){t===void 0&&(t={});var e=Zb(null);return e.options=_t({async:!0,ssr:!1},t),e}var Pu=function(t){var e=t.sideCar,r=ln(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,_t({},r))};Pu.isSideCarExport=!0;function t0(t,e){return t.useMedium(e),Pu}var Ou=e0(),Co=function(){},Hs=p.forwardRef(function(t,e){var r=p.useRef(null),n=p.useState({onScrollCapture:Co,onWheelCapture:Co,onTouchMoveCapture:Co}),s=n[0],o=n[1],i=t.forwardProps,a=t.children,c=t.className,u=t.removeScrollBar,l=t.enabled,m=t.shards,y=t.sideCar,f=t.noRelative,b=t.noIsolation,v=t.inert,x=t.allowPinchZoom,E=t.as,T=E===void 0?"div":E,S=t.gapMode,C=ln(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=y,O=Qb([r,e]),I=_t(_t({},C),s);return p.createElement(p.Fragment,null,l&&p.createElement(A,{sideCar:Ou,removeScrollBar:u,shards:m,noRelative:f,noIsolation:b,inert:v,setCallbacks:o,allowPinchZoom:!!x,lockRef:r,gapMode:S}),i?p.cloneElement(p.Children.only(a),_t(_t({},I),{ref:O})):p.createElement(T,_t({},I,{className:c,ref:O}),a))});Hs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hs.classNames={fullWidth:hs,zeroRight:ds};var r0=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function n0(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=r0();return e&&t.setAttribute("nonce",e),t}function s0(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function o0(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var i0=function(){var t=0,e=null;return{add:function(r){t==0&&(e=n0())&&(s0(e,r),o0(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},a0=function(){var t=i0();return function(e,r){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},Iu=function(){var t=a0(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},c0={left:0,top:0,right:0,gap:0},To=function(t){return parseInt(t||"",10)||0},l0=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[To(r),To(n),To(s)]},u0=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return c0;var e=l0(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},d0=Iu(),Hr="data-scroll-locked",h0=function(t,e,r,n){var s=t.left,o=t.top,i=t.right,a=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(Hb,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Hr,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ds,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(hs,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(ds," .").concat(ds,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(hs," .").concat(hs,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Hr,`] {
    `).concat(Gb,": ").concat(a,`px;
  }
`)},gc=function(){var t=parseInt(document.body.getAttribute(Hr)||"0",10);return isFinite(t)?t:0},f0=function(){p.useEffect(function(){return document.body.setAttribute(Hr,(gc()+1).toString()),function(){var t=gc()-1;t<=0?document.body.removeAttribute(Hr):document.body.setAttribute(Hr,t.toString())}},[])},p0=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;f0();var o=p.useMemo(function(){return u0(s)},[s]);return p.createElement(d0,{styles:h0(o,!e,s,r?"":"!important")})},ti=!1;if(typeof window<"u")try{var ss=Object.defineProperty({},"passive",{get:function(){return ti=!0,!0}});window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{ti=!1}var $r=ti?{passive:!1}:!1,m0=function(t){return t.tagName==="TEXTAREA"},ju=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!m0(t)&&r[e]==="visible")},g0=function(t){return ju(t,"overflowY")},y0=function(t){return ju(t,"overflowX")},yc=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Nu(t,n);if(s){var o=Du(t,n),i=o[1],a=o[2];if(i>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},v0=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},w0=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},Nu=function(t,e){return t==="v"?g0(e):y0(e)},Du=function(t,e){return t==="v"?v0(e):w0(e)},b0=function(t,e){return t==="h"&&e==="rtl"?-1:1},x0=function(t,e,r,n,s){var o=b0(t,window.getComputedStyle(e).direction),i=o*n,a=r.target,c=e.contains(a),u=!1,l=i>0,m=0,y=0;do{if(!a)break;var f=Du(t,a),b=f[0],v=f[1],x=f[2],E=v-x-o*b;(b||E)&&Nu(t,a)&&(m+=E,y+=b);var T=a.parentNode;a=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(l&&Math.abs(m)<1||!l&&Math.abs(y)<1)&&(u=!0),u},os=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},vc=function(t){return[t.deltaX,t.deltaY]},wc=function(t){return t&&"current"in t?t.current:t},_0=function(t,e){return t[0]===e[0]&&t[1]===e[1]},E0=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},S0=0,Lr=[];function C0(t){var e=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(S0++)[0],o=p.useState(Iu)[0],i=p.useRef(t);p.useEffect(function(){i.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=Dy([t.lockRef.current],(t.shards||[]).map(wc),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var E=os(v),T=r.current,S="deltaX"in v?v.deltaX:T[0]-E[0],C="deltaY"in v?v.deltaY:T[1]-E[1],A,O=v.target,I=Math.abs(S)>Math.abs(C)?"h":"v";if("touches"in v&&I==="h"&&O.type==="range")return!1;var P=window.getSelection(),D=P&&P.anchorNode,B=D?D===O||D.contains(O):!1;if(B)return!1;var U=yc(I,O);if(!U)return!0;if(U?A=I:(A=I==="v"?"h":"v",U=yc(I,O)),!U)return!1;if(!n.current&&"changedTouches"in v&&(S||C)&&(n.current=A),!A)return!0;var F=n.current||A;return x0(F,x,v,F==="h"?S:C)},[]),c=p.useCallback(function(v){var x=v;if(!(!Lr.length||Lr[Lr.length-1]!==o)){var E="deltaY"in x?vc(x):os(x),T=e.current.filter(function(A){return A.name===x.type&&(A.target===x.target||x.target===A.shadowParent)&&_0(A.delta,E)})[0];if(T&&T.should){x.cancelable&&x.preventDefault();return}if(!T){var S=(i.current.shards||[]).map(wc).filter(Boolean).filter(function(A){return A.contains(x.target)}),C=S.length>0?a(x,S[0]):!i.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,E,T){var S={name:v,delta:x,target:E,should:T,shadowParent:T0(E)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(C){return C!==S})},1)},[]),l=p.useCallback(function(v){r.current=os(v),n.current=void 0},[]),m=p.useCallback(function(v){u(v.type,vc(v),v.target,a(v,t.lockRef.current))},[]),y=p.useCallback(function(v){u(v.type,os(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return Lr.push(o),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",c,$r),document.addEventListener("touchmove",c,$r),document.addEventListener("touchstart",l,$r),function(){Lr=Lr.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,$r),document.removeEventListener("touchmove",c,$r),document.removeEventListener("touchstart",l,$r)}},[]);var f=t.removeScrollBar,b=t.inert;return p.createElement(p.Fragment,null,b?p.createElement(o,{styles:E0(s)}):null,f?p.createElement(p0,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function T0(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const R0=t0(Ou,C0);var Di=p.forwardRef(function(t,e){return p.createElement(Hs,_t({},t,{ref:e,sideCar:R0}))});Di.classNames=Hs.classNames;var A0=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Fr=new WeakMap,is=new WeakMap,as={},Ro=0,Mu=function(t){return t&&(t.host||Mu(t.parentNode))},k0=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=Mu(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},P0=function(t,e,r,n){var s=k0(e,Array.isArray(t)?t:[t]);as[r]||(as[r]=new WeakMap);var o=as[r],i=[],a=new Set,c=new Set(s),u=function(m){!m||a.has(m)||(a.add(m),u(m.parentNode))};s.forEach(u);var l=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(y){if(a.has(y))l(y);else try{var f=y.getAttribute(n),b=f!==null&&f!=="false",v=(Fr.get(y)||0)+1,x=(o.get(y)||0)+1;Fr.set(y,v),o.set(y,x),i.push(y),v===1&&b&&is.set(y,!0),x===1&&y.setAttribute(r,"true"),b||y.setAttribute(n,"true")}catch(E){console.error("aria-hidden: cannot operate on ",y,E)}})};return l(e),a.clear(),Ro++,function(){i.forEach(function(m){var y=Fr.get(m)-1,f=o.get(m)-1;Fr.set(m,y),o.set(m,f),y||(is.has(m)||m.removeAttribute(n),is.delete(m)),f||m.removeAttribute(r)}),Ro--,Ro||(Fr=new WeakMap,Fr=new WeakMap,is=new WeakMap,as={})}},$u=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=A0(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),P0(n,s,r,"aria-hidden")):function(){return null}};function O0(t){const e=I0(t),r=p.forwardRef((n,s)=>{const{children:o,...i}=n,a=p.Children.toArray(o),c=a.find(N0);if(c){const u=c.props.children,l=a.map(m=>m===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:m);return g.jsx(e,{...i,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,l):null})}return g.jsx(e,{...i,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}function I0(t){const e=p.forwardRef((r,n)=>{const{children:s,...o}=r;if(p.isValidElement(s)){const i=M0(s),a=D0(o,s.props);return s.type!==p.Fragment&&(a.ref=n?sr(n,i):i),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var j0=Symbol("radix.slottable");function N0(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===j0}function D0(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function M0(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Gs="Dialog",[Lu]=$t(Gs),[$0,mt]=Lu(Gs),Fu=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:i=!0}=t,a=p.useRef(null),c=p.useRef(null),[u,l]=sn({prop:n,defaultProp:s??!1,onChange:o,caller:Gs});return g.jsx($0,{scope:e,triggerRef:a,contentRef:c,contentId:xr(),titleId:xr(),descriptionId:xr(),open:u,onOpenChange:l,onOpenToggle:p.useCallback(()=>l(m=>!m),[l]),modal:i,children:r})};Fu.displayName=Gs;var Bu="DialogTrigger",Uu=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mt(Bu,r),o=fe(e,s.triggerRef);return g.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Li(s.open),...n,ref:o,onClick:W(t.onClick,s.onOpenToggle)})});Uu.displayName=Bu;var Mi="DialogPortal",[L0,Vu]=Lu(Mi,{forceMount:void 0}),Wu=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,o=mt(Mi,e);return g.jsx(L0,{scope:e,forceMount:r,children:p.Children.map(n,i=>g.jsx(Rt,{present:r||o.open,children:g.jsx(Ps,{asChild:!0,container:s,children:i})}))})};Wu.displayName=Mi;var Ss="DialogOverlay",zu=p.forwardRef((t,e)=>{const r=Vu(Ss,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=mt(Ss,t.__scopeDialog);return o.modal?g.jsx(Rt,{present:n||o.open,children:g.jsx(B0,{...s,ref:e})}):null});zu.displayName=Ss;var F0=O0("DialogOverlay.RemoveScroll"),B0=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mt(Ss,r);return g.jsx(Di,{as:F0,allowPinchZoom:!0,shards:[s.contentRef],children:g.jsx(le.div,{"data-state":Li(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Er="DialogContent",qu=p.forwardRef((t,e)=>{const r=Vu(Er,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,o=mt(Er,t.__scopeDialog);return g.jsx(Rt,{present:n||o.open,children:o.modal?g.jsx(U0,{...s,ref:e}):g.jsx(V0,{...s,ref:e})})});qu.displayName=Er;var U0=p.forwardRef((t,e)=>{const r=mt(Er,t.__scopeDialog),n=p.useRef(null),s=fe(e,r.contentRef,n);return p.useEffect(()=>{const o=n.current;if(o)return $u(o)},[]),g.jsx(Ku,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:W(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:W(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&o.preventDefault()}),onFocusOutside:W(t.onFocusOutside,o=>o.preventDefault())})}),V0=p.forwardRef((t,e)=>{const r=mt(Er,t.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return g.jsx(Ku,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),Ku=p.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=t,a=mt(Er,r),c=p.useRef(null),u=fe(e,c);return ku(),g.jsxs(g.Fragment,{children:[g.jsx(Ni,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:g.jsx($n,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Li(a.open),...i,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(W0,{titleId:a.titleId}),g.jsx(q0,{contentRef:c,descriptionId:a.descriptionId})]})]})}),$i="DialogTitle",Hu=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mt($i,r);return g.jsx(le.h2,{id:s.titleId,...n,ref:e})});Hu.displayName=$i;var Gu="DialogDescription",Ju=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mt(Gu,r);return g.jsx(le.p,{id:s.descriptionId,...n,ref:e})});Ju.displayName=Gu;var Yu="DialogClose",Qu=p.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=mt(Yu,r);return g.jsx(le.button,{type:"button",...n,ref:e,onClick:W(t.onClick,()=>s.onOpenChange(!1))})});Qu.displayName=Yu;function Li(t){return t?"open":"closed"}var Xu="DialogTitleWarning",[ME,Zu]=Kh(Xu,{contentName:Er,titleName:$i,docsSlug:"dialog"}),W0=({titleId:t})=>{const e=Zu(Xu),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},z0="DialogDescriptionWarning",q0=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Zu(z0).contentName}}.`;return p.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},K0=Fu,H0=Uu,G0=Wu,ed=zu,td=qu,rd=Hu,nd=Ju,J0=Qu;const Y0=K0,Q0=H0,X0=G0,sd=p.forwardRef(({className:t,...e},r)=>g.jsx(ed,{ref:r,className:be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));sd.displayName=ed.displayName;const od=p.forwardRef(({className:t,children:e,...r},n)=>g.jsxs(X0,{children:[g.jsx(sd,{}),g.jsxs(td,{ref:n,className:be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,g.jsxs(J0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(al,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));od.displayName=td.displayName;const id=({className:t,...e})=>g.jsx("div",{className:be("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});id.displayName="DialogHeader";const ad=p.forwardRef(({className:t,...e},r)=>g.jsx(rd,{ref:r,className:be("text-lg font-semibold leading-none tracking-tight",t),...e}));ad.displayName=rd.displayName;const Z0=p.forwardRef(({className:t,...e},r)=>g.jsx(nd,{ref:r,className:be("text-sm text-muted-foreground",t),...e}));Z0.displayName=nd.displayName;const ri=p.forwardRef(({className:t,type:e,...r},n)=>g.jsx("input",{type:e,className:be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));ri.displayName="Input";var ex=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tx=ex.reduce((t,e)=>{const r=Tu(`Primitive.${e}`),n=p.forwardRef((s,o)=>{const{asChild:i,...a}=s,c=i?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(c,{...a,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),rx="Label",cd=p.forwardRef((t,e)=>g.jsx(tx.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));cd.displayName=rx;var ld=cd;const nx=gi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),fs=p.forwardRef(({className:t,...e},r)=>g.jsx(ld,{ref:r,className:be(nx(),t),...e}));fs.displayName=ld.displayName;function ud(t,[e,r]){return Math.min(r,Math.max(e,t))}var sx=p.createContext(void 0);function Fi(t){const e=p.useContext(sx);return t||e||"ltr"}function ox(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var dd=["PageUp","PageDown"],hd=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fd={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},hn="Slider",[ni,ix,ax]=ks(hn),[pd]=$t(hn,[ax]),[cx,Js]=pd(hn),md=p.forwardRef((t,e)=>{const{name:r,min:n=0,max:s=100,step:o=1,orientation:i="horizontal",disabled:a=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:l,onValueChange:m=()=>{},onValueCommit:y=()=>{},inverted:f=!1,form:b,...v}=t,x=p.useRef(new Set),E=p.useRef(0),S=i==="horizontal"?lx:ux,[C=[],A]=sn({prop:l,defaultProp:u,onChange:U=>{var Y;(Y=[...x.current][E.current])==null||Y.focus(),m(U)}}),O=p.useRef(C);function I(U){const F=mx(C,U);B(U,F)}function P(U){B(U,E.current)}function D(){const U=O.current[E.current];C[E.current]!==U&&y(C)}function B(U,F,{commit:Y}={commit:!1}){const L=wx(o),X=bx(Math.round((U-n)/o)*o+n,L),z=ud(X,[n,s]);A((H=[])=>{const V=fx(H,z,F);if(vx(V,c*o)){E.current=V.indexOf(z);const M=String(V)!==String(H);return M&&Y&&y(V),M?V:H}else return H})}return g.jsx(cx,{scope:t.__scopeSlider,name:r,disabled:a,min:n,max:s,valueIndexToChangeRef:E,thumbs:x.current,values:C,orientation:i,form:b,children:g.jsx(ni.Provider,{scope:t.__scopeSlider,children:g.jsx(ni.Slot,{scope:t.__scopeSlider,children:g.jsx(S,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:e,onPointerDown:W(v.onPointerDown,()=>{a||(O.current=C)}),min:n,max:s,inverted:f,onSlideStart:a?void 0:I,onSlideMove:a?void 0:P,onSlideEnd:a?void 0:D,onHomeKeyDown:()=>!a&&B(n,0,{commit:!0}),onEndKeyDown:()=>!a&&B(s,C.length-1,{commit:!0}),onStepKeyDown:({event:U,direction:F})=>{if(!a){const X=dd.includes(U.key)||U.shiftKey&&hd.includes(U.key)?10:1,z=E.current,H=C[z],V=o*X*F;B(H+V,z,{commit:!0})}}})})})})});md.displayName=hn;var[gd,yd]=pd(hn,{startEdge:"left",endEdge:"right",size:"width",direction:1}),lx=p.forwardRef((t,e)=>{const{min:r,max:n,dir:s,inverted:o,onSlideStart:i,onSlideMove:a,onSlideEnd:c,onStepKeyDown:u,...l}=t,[m,y]=p.useState(null),f=fe(e,S=>y(S)),b=p.useRef(void 0),v=Fi(s),x=v==="ltr",E=x&&!o||!x&&o;function T(S){const C=b.current||m.getBoundingClientRect(),A=[0,C.width],I=Bi(A,E?[r,n]:[n,r]);return b.current=C,I(S-C.left)}return g.jsx(gd,{scope:t.__scopeSlider,startEdge:E?"left":"right",endEdge:E?"right":"left",direction:E?1:-1,size:"width",children:g.jsx(vd,{dir:v,"data-orientation":"horizontal",...l,ref:f,style:{...l.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const C=T(S.clientX);i==null||i(C)},onSlideMove:S=>{const C=T(S.clientX);a==null||a(C)},onSlideEnd:()=>{b.current=void 0,c==null||c()},onStepKeyDown:S=>{const A=fd[E?"from-left":"from-right"].includes(S.key);u==null||u({event:S,direction:A?-1:1})}})})}),ux=p.forwardRef((t,e)=>{const{min:r,max:n,inverted:s,onSlideStart:o,onSlideMove:i,onSlideEnd:a,onStepKeyDown:c,...u}=t,l=p.useRef(null),m=fe(e,l),y=p.useRef(void 0),f=!s;function b(v){const x=y.current||l.current.getBoundingClientRect(),E=[0,x.height],S=Bi(E,f?[n,r]:[r,n]);return y.current=x,S(v-x.top)}return g.jsx(gd,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:g.jsx(vd,{"data-orientation":"vertical",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const x=b(v.clientY);o==null||o(x)},onSlideMove:v=>{const x=b(v.clientY);i==null||i(x)},onSlideEnd:()=>{y.current=void 0,a==null||a()},onStepKeyDown:v=>{const E=fd[f?"from-bottom":"from-top"].includes(v.key);c==null||c({event:v,direction:E?-1:1})}})})}),vd=p.forwardRef((t,e)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:a,onStepKeyDown:c,...u}=t,l=Js(hn,r);return g.jsx(le.span,{...u,ref:e,onKeyDown:W(t.onKeyDown,m=>{m.key==="Home"?(i(m),m.preventDefault()):m.key==="End"?(a(m),m.preventDefault()):dd.concat(hd).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:W(t.onPointerDown,m=>{const y=m.target;y.setPointerCapture(m.pointerId),m.preventDefault(),l.thumbs.has(y)?y.focus():n(m)}),onPointerMove:W(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&s(m)}),onPointerUp:W(t.onPointerUp,m=>{const y=m.target;y.hasPointerCapture(m.pointerId)&&(y.releasePointerCapture(m.pointerId),o(m))})})}),wd="SliderTrack",bd=p.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,s=Js(wd,r);return g.jsx(le.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:e})});bd.displayName=wd;var si="SliderRange",xd=p.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,s=Js(si,r),o=yd(si,r),i=p.useRef(null),a=fe(e,i),c=s.values.length,u=s.values.map(y=>Sd(y,s.min,s.max)),l=c>1?Math.min(...u):0,m=100-Math.max(...u);return g.jsx(le.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:a,style:{...t.style,[o.startEdge]:l+"%",[o.endEdge]:m+"%"}})});xd.displayName=si;var oi="SliderThumb",_d=p.forwardRef((t,e)=>{const r=ix(t.__scopeSlider),[n,s]=p.useState(null),o=fe(e,a=>s(a)),i=p.useMemo(()=>n?r().findIndex(a=>a.ref.current===n):-1,[r,n]);return g.jsx(dx,{...t,ref:o,index:i})}),dx=p.forwardRef((t,e)=>{const{__scopeSlider:r,index:n,name:s,...o}=t,i=Js(oi,r),a=yd(oi,r),[c,u]=p.useState(null),l=fe(e,T=>u(T)),m=c?i.form||!!c.closest("form"):!0,y=Ol(c),f=i.values[n],b=f===void 0?0:Sd(f,i.min,i.max),v=px(n,i.values.length),x=y==null?void 0:y[a.size],E=x?gx(x,b,a.direction):0;return p.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),g.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${b}% + ${E}px)`},children:[g.jsx(ni.ItemSlot,{scope:t.__scopeSlider,children:g.jsx(le.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":i.min,"aria-valuenow":f,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:l,style:f===void 0?{display:"none"}:t.style,onFocus:W(t.onFocus,()=>{i.valueIndexToChangeRef.current=n})})}),m&&g.jsx(Ed,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:f},n)]})});_d.displayName=oi;var hx="RadioBubbleInput",Ed=p.forwardRef(({__scopeSlider:t,value:e,...r},n)=>{const s=p.useRef(null),o=fe(s,n),i=ox(e);return p.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==e&&l){const m=new Event("input",{bubbles:!0});l.call(a,e),a.dispatchEvent(m)}},[i,e]),g.jsx(le.input,{style:{display:"none"},...r,ref:o,defaultValue:e})});Ed.displayName=hx;function fx(t=[],e,r){const n=[...t];return n[r]=e,n.sort((s,o)=>s-o)}function Sd(t,e,r){const o=100/(r-e)*(t-e);return ud(o,[0,100])}function px(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function mx(t,e){if(t.length===1)return 0;const r=t.map(s=>Math.abs(s-e)),n=Math.min(...r);return r.indexOf(n)}function gx(t,e,r){const n=t/2,o=Bi([0,50],[0,n]);return(n-o(e)*r)*r}function yx(t){return t.slice(0,-1).map((e,r)=>t[r+1]-e)}function vx(t,e){if(e>0){const r=yx(t);return Math.min(...r)>=e}return!0}function Bi(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function wx(t){return(String(t).split(".")[1]||"").length}function bx(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}var Cd=md,xx=bd,_x=xd,Ex=_d;const Td=p.forwardRef(({className:t,...e},r)=>g.jsxs(Cd,{ref:r,className:be("relative flex w-full touch-none select-none items-center",t),...e,children:[g.jsx(xx,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:g.jsx(_x,{className:"absolute h-full bg-primary"})}),g.jsx(Ex,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Td.displayName=Cd.displayName;const Sx=({isOpen:t,onOpenChange:e,triggerButton:r=!0})=>{const{underlyingValue:n,setUnderlyingValue:s,transactionCost:o,setTransactionCost:i}=Tb(),{trackInteraction:a}=Ru(),[c,u]=p.useState(n),[l,m]=p.useState(o),[y,f]=p.useState(n.toString()),[b,v]=p.useState(!1),x=t!==void 0?t:b,E=e||v;p.useEffect(()=>{x&&(console.log("SettingsModal: Modal opened, syncing values:",{underlyingValue:n,transactionCost:o}),u(n),m(o),f(n.toString()))},[x,n,o]);const T=D=>{const B=D[0];u(B),f(B.toString())},S=D=>{f(D.target.value)},C=()=>{const D=y.replace(/[^0-9]/g,""),B=parseInt(D,10);if(isNaN(B))f(c.toString());else{const U=Math.max(1e4,Math.min(1e6,B));u(U),f(U.toString())}},A=D=>{const B=D.target.value.replace(/[^0-9]/g,""),U=parseInt(B,10);!isNaN(U)&&U>=0&&m(U)},O=()=>{c>=1e4&&c<=1e6?(a("settings_saved",{element_type:"button",underlying_value:c,transaction_cost:l}),s(c),i(l),E(!1),ct.success(`Calculation Settings updated: Underlying value ${c.toLocaleString("sv-SE")}, Transaction cost ${l}`)):ct.error("Please enter a value between 10 000 and 1 000 000")},I=()=>{u(n),m(o),f(n.toString()),E(!1)},P=D=>D.toLocaleString("sv-SE");return g.jsxs(Y0,{open:x,onOpenChange:E,children:[r&&g.jsx(Q0,{asChild:!0,children:g.jsxs(Ze,{variant:"outline",size:"sm",onClick:()=>{a("settings_opened",{element_type:"button",element_text:"Calculation Settings"}),u(n),m(o),f(n.toString()),E(!0)},children:[g.jsx(jo,{className:"h-4 w-4 mr-2"}),"Calculation Settings"]})}),g.jsxs(od,{className:"sm:max-w-md",children:[g.jsx(id,{children:g.jsx(ad,{children:"Calculation Settings"})}),g.jsxs("div",{className:"space-y-6 py-4",children:[g.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[g.jsx("div",{className:"border-b pb-3 mb-4",children:g.jsx("h3",{className:"font-semibold text-base",children:"Underlying Stock Value for Premium Calculation"})}),g.jsx("div",{className:"space-y-2",children:g.jsx("p",{className:"text-sm text-muted-foreground",children:"This value is used to calculate the number of contracts and Premium. Default is 100,000."})}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(fs,{children:["Current Value: ",P(c)]}),g.jsx(Td,{value:[c],onValueChange:T,max:1e6,min:1e4,step:1e3,className:"w-full"}),g.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[g.jsx("span",{children:"10 000"}),g.jsx("span",{children:"1 000 000"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(fs,{htmlFor:"underlying-input",children:"Or enter exact value:"}),g.jsx(ri,{id:"underlying-input",type:"text",value:y,onChange:S,onBlur:C,placeholder:"100 000"})]})]})]}),g.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[g.jsx("div",{className:"border-b pb-3 mb-4",children:g.jsx("h3",{className:"font-semibold text-base",children:"Transaction Cost"})}),g.jsx("div",{className:"space-y-2",children:g.jsx("p",{className:"text-sm text-muted-foreground",children:"The transaction cost that will be subtracted from the premium calculation. Default is 150."})}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(fs,{htmlFor:"transaction-cost-input",children:"Transaction Cost:"}),g.jsx(ri,{id:"transaction-cost-input",type:"text",value:l.toString(),onChange:A,placeholder:"150"})]})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[g.jsx(Ze,{variant:"outline",onClick:I,children:"Cancel"}),g.jsx(Ze,{onClick:O,children:"Apply Settings"})]})]})]})]})};var Ao="rovingFocusGroup.onEntryFocus",Cx={bubbles:!1,cancelable:!0},Un="RovingFocusGroup",[ii,Rd,Tx]=ks(Un),[Rx,Ad]=$t(Un,[Tx]),[Ax,kx]=Rx(Un),kd=p.forwardRef((t,e)=>g.jsx(ii.Provider,{scope:t.__scopeRovingFocusGroup,children:g.jsx(ii.Slot,{scope:t.__scopeRovingFocusGroup,children:g.jsx(Px,{...t,ref:e})})}));kd.displayName=Un;var Px=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:l=!1,...m}=t,y=p.useRef(null),f=fe(e,y),b=Fi(o),[v,x]=sn({prop:i,defaultProp:a??null,onChange:c,caller:Un}),[E,T]=p.useState(!1),S=Ge(u),C=Rd(r),A=p.useRef(!1),[O,I]=p.useState(0);return p.useEffect(()=>{const P=y.current;if(P)return P.addEventListener(Ao,S),()=>P.removeEventListener(Ao,S)},[S]),g.jsx(Ax,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(P=>x(P),[x]),onItemShiftTab:p.useCallback(()=>T(!0),[]),onFocusableItemAdd:p.useCallback(()=>I(P=>P+1),[]),onFocusableItemRemove:p.useCallback(()=>I(P=>P-1),[]),children:g.jsx(le.div,{tabIndex:E||O===0?-1:0,"data-orientation":n,...m,ref:f,style:{outline:"none",...t.style},onMouseDown:W(t.onMouseDown,()=>{A.current=!0}),onFocus:W(t.onFocus,P=>{const D=!A.current;if(P.target===P.currentTarget&&D&&!E){const B=new CustomEvent(Ao,Cx);if(P.currentTarget.dispatchEvent(B),!B.defaultPrevented){const U=C().filter(z=>z.focusable),F=U.find(z=>z.active),Y=U.find(z=>z.id===v),X=[F,Y,...U].filter(Boolean).map(z=>z.ref.current);Id(X,l)}}A.current=!1}),onBlur:W(t.onBlur,()=>T(!1))})})}),Pd="RovingFocusGroupItem",Od=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,children:i,...a}=t,c=xr(),u=o||c,l=kx(Pd,r),m=l.currentTabStopId===u,y=Rd(r),{onFocusableItemAdd:f,onFocusableItemRemove:b,currentTabStopId:v}=l;return p.useEffect(()=>{if(n)return f(),()=>b()},[n,f,b]),g.jsx(ii.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:g.jsx(le.span,{tabIndex:m?0:-1,"data-orientation":l.orientation,...a,ref:e,onMouseDown:W(t.onMouseDown,x=>{n?l.onItemFocus(u):x.preventDefault()}),onFocus:W(t.onFocus,()=>l.onItemFocus(u)),onKeyDown:W(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){l.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const E=jx(x,l.orientation,l.dir);if(E!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let S=y().filter(C=>C.focusable).map(C=>C.ref.current);if(E==="last")S.reverse();else if(E==="prev"||E==="next"){E==="prev"&&S.reverse();const C=S.indexOf(x.currentTarget);S=l.loop?Nx(S,C+1):S.slice(C+1)}setTimeout(()=>Id(S))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:v!=null}):i})})});Od.displayName=Pd;var Ox={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ix(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function jx(t,e,r){const n=Ix(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Ox[n]}function Id(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function Nx(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var Dx=kd,Mx=Od;function $x(t){const e=Lx(t),r=p.forwardRef((n,s)=>{const{children:o,...i}=n,a=p.Children.toArray(o),c=a.find(Bx);if(c){const u=c.props.children,l=a.map(m=>m===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:m);return g.jsx(e,{...i,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,l):null})}return g.jsx(e,{...i,ref:s,children:o})});return r.displayName=`${t}.Slot`,r}function Lx(t){const e=p.forwardRef((r,n)=>{const{children:s,...o}=r;if(p.isValidElement(s)){const i=Vx(s),a=Ux(o,s.props);return s.type!==p.Fragment&&(a.ref=n?sr(n,i):i),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Fx=Symbol("radix.slottable");function Bx(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Fx}function Ux(t,e){const r={...e};for(const n in e){const s=t[n],o=e[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...t,...r}}function Vx(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var ai=["Enter"," "],Wx=["ArrowDown","PageUp","Home"],jd=["ArrowUp","PageDown","End"],zx=[...Wx,...jd],qx={ltr:[...ai,"ArrowRight"],rtl:[...ai,"ArrowLeft"]},Kx={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Vn="Menu",[In,Hx,Gx]=ks(Vn),[Sr,Nd]=$t(Vn,[Gx,$s,Ad]),Ys=$s(),Dd=Ad(),[Jx,Cr]=Sr(Vn),[Yx,Wn]=Sr(Vn),Md=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:o,modal:i=!0}=t,a=Ys(e),[c,u]=p.useState(null),l=p.useRef(!1),m=Ge(o),y=Fi(s);return p.useEffect(()=>{const f=()=>{l.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>l.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),g.jsx(Ul,{...a,children:g.jsx(Jx,{scope:e,open:r,onOpenChange:m,content:c,onContentChange:u,children:g.jsx(Yx,{scope:e,onClose:p.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:l,dir:y,modal:i,children:n})})})};Md.displayName=Vn;var Qx="MenuAnchor",Ui=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Ys(r);return g.jsx(Vl,{...s,...n,ref:e})});Ui.displayName=Qx;var Vi="MenuPortal",[Xx,$d]=Sr(Vi,{forceMount:void 0}),Ld=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,o=Cr(Vi,e);return g.jsx(Xx,{scope:e,forceMount:r,children:g.jsx(Rt,{present:r||o.open,children:g.jsx(Ps,{asChild:!0,container:s,children:n})})})};Ld.displayName=Vi;var et="MenuContent",[Zx,Wi]=Sr(et),Fd=p.forwardRef((t,e)=>{const r=$d(et,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=Cr(et,t.__scopeMenu),i=Wn(et,t.__scopeMenu);return g.jsx(In.Provider,{scope:t.__scopeMenu,children:g.jsx(Rt,{present:n||o.open,children:g.jsx(In.Slot,{scope:t.__scopeMenu,children:i.modal?g.jsx(e_,{...s,ref:e}):g.jsx(t_,{...s,ref:e})})})})}),e_=p.forwardRef((t,e)=>{const r=Cr(et,t.__scopeMenu),n=p.useRef(null),s=fe(e,n);return p.useEffect(()=>{const o=n.current;if(o)return $u(o)},[]),g.jsx(zi,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:W(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),t_=p.forwardRef((t,e)=>{const r=Cr(et,t.__scopeMenu);return g.jsx(zi,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),r_=$x("MenuContent.ScrollLock"),zi=p.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:m,onInteractOutside:y,onDismiss:f,disableOutsideScroll:b,...v}=t,x=Cr(et,r),E=Wn(et,r),T=Ys(r),S=Dd(r),C=Hx(r),[A,O]=p.useState(null),I=p.useRef(null),P=fe(e,I,x.onContentChange),D=p.useRef(0),B=p.useRef(""),U=p.useRef(0),F=p.useRef(null),Y=p.useRef("right"),L=p.useRef(0),X=b?Di:p.Fragment,z=b?{as:r_,allowPinchZoom:!0}:void 0,H=M=>{var oe,Je;const Z=B.current+M,ce=C().filter(Se=>!Se.disabled),ee=document.activeElement,se=(oe=ce.find(Se=>Se.ref.current===ee))==null?void 0:oe.textValue,K=ce.map(Se=>Se.textValue),ae=p_(K,Z,se),Ae=(Je=ce.find(Se=>Se.textValue===ae))==null?void 0:Je.ref.current;(function Se(ze){B.current=ze,window.clearTimeout(D.current),ze!==""&&(D.current=window.setTimeout(()=>Se(""),1e3))})(Z),Ae&&setTimeout(()=>Ae.focus())};p.useEffect(()=>()=>window.clearTimeout(D.current),[]),ku();const V=p.useCallback(M=>{var ce,ee;return Y.current===((ce=F.current)==null?void 0:ce.side)&&g_(M,(ee=F.current)==null?void 0:ee.area)},[]);return g.jsx(Zx,{scope:r,searchRef:B,onItemEnter:p.useCallback(M=>{V(M)&&M.preventDefault()},[V]),onItemLeave:p.useCallback(M=>{var Z;V(M)||((Z=I.current)==null||Z.focus(),O(null))},[V]),onTriggerLeave:p.useCallback(M=>{V(M)&&M.preventDefault()},[V]),pointerGraceTimerRef:U,onPointerGraceIntentChange:p.useCallback(M=>{F.current=M},[]),children:g.jsx(X,{...z,children:g.jsx(Ni,{asChild:!0,trapped:s,onMountAutoFocus:W(o,M=>{var Z;M.preventDefault(),(Z=I.current)==null||Z.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:g.jsx($n,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:m,onInteractOutside:y,onDismiss:f,children:g.jsx(Dx,{asChild:!0,...S,dir:E.dir,orientation:"vertical",loop:n,currentTabStopId:A,onCurrentTabStopIdChange:O,onEntryFocus:W(c,M=>{E.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(Wl,{role:"menu","aria-orientation":"vertical","data-state":th(x.open),"data-radix-menu-content":"",dir:E.dir,...T,...v,ref:P,style:{outline:"none",...v.style},onKeyDown:W(v.onKeyDown,M=>{const ce=M.target.closest("[data-radix-menu-content]")===M.currentTarget,ee=M.ctrlKey||M.altKey||M.metaKey,se=M.key.length===1;ce&&(M.key==="Tab"&&M.preventDefault(),!ee&&se&&H(M.key));const K=I.current;if(M.target!==K||!zx.includes(M.key))return;M.preventDefault();const Ae=C().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);jd.includes(M.key)&&Ae.reverse(),h_(Ae)}),onBlur:W(t.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(D.current),B.current="")}),onPointerMove:W(t.onPointerMove,jn(M=>{const Z=M.target,ce=L.current!==M.clientX;if(M.currentTarget.contains(Z)&&ce){const ee=M.clientX>L.current?"right":"left";Y.current=ee,L.current=M.clientX}}))})})})})})})});Fd.displayName=et;var n_="MenuGroup",qi=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return g.jsx(le.div,{role:"group",...n,ref:e})});qi.displayName=n_;var s_="MenuLabel",Bd=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return g.jsx(le.div,{...n,ref:e})});Bd.displayName=s_;var Cs="MenuItem",bc="menu.itemSelect",Qs=p.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,o=p.useRef(null),i=Wn(Cs,t.__scopeMenu),a=Wi(Cs,t.__scopeMenu),c=fe(e,o),u=p.useRef(!1),l=()=>{const m=o.current;if(!r&&m){const y=new CustomEvent(bc,{bubbles:!0,cancelable:!0});m.addEventListener(bc,f=>n==null?void 0:n(f),{once:!0}),hi(m,y),y.defaultPrevented?u.current=!1:i.onClose()}};return g.jsx(Ud,{...s,ref:c,disabled:r,onClick:W(t.onClick,l),onPointerDown:m=>{var y;(y=t.onPointerDown)==null||y.call(t,m),u.current=!0},onPointerUp:W(t.onPointerUp,m=>{var y;u.current||(y=m.currentTarget)==null||y.click()}),onKeyDown:W(t.onKeyDown,m=>{const y=a.searchRef.current!=="";r||y&&m.key===" "||ai.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Qs.displayName=Cs;var Ud=p.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=t,i=Wi(Cs,r),a=Dd(r),c=p.useRef(null),u=fe(e,c),[l,m]=p.useState(!1),[y,f]=p.useState("");return p.useEffect(()=>{const b=c.current;b&&f((b.textContent??"").trim())},[o.children]),g.jsx(In.ItemSlot,{scope:r,disabled:n,textValue:s??y,children:g.jsx(Mx,{asChild:!0,...a,focusable:!n,children:g.jsx(le.div,{role:"menuitem","data-highlighted":l?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:u,onPointerMove:W(t.onPointerMove,jn(b=>{n?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:W(t.onPointerLeave,jn(b=>i.onItemLeave(b))),onFocus:W(t.onFocus,()=>m(!0)),onBlur:W(t.onBlur,()=>m(!1))})})})}),o_="MenuCheckboxItem",Vd=p.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return g.jsx(Hd,{scope:t.__scopeMenu,checked:r,children:g.jsx(Qs,{role:"menuitemcheckbox","aria-checked":Ts(r)?"mixed":r,...s,ref:e,"data-state":Hi(r),onSelect:W(s.onSelect,()=>n==null?void 0:n(Ts(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Vd.displayName=o_;var Wd="MenuRadioGroup",[i_,a_]=Sr(Wd,{value:void 0,onValueChange:()=>{}}),zd=p.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,o=Ge(n);return g.jsx(i_,{scope:t.__scopeMenu,value:r,onValueChange:o,children:g.jsx(qi,{...s,ref:e})})});zd.displayName=Wd;var qd="MenuRadioItem",Kd=p.forwardRef((t,e)=>{const{value:r,...n}=t,s=a_(qd,t.__scopeMenu),o=r===s.value;return g.jsx(Hd,{scope:t.__scopeMenu,checked:o,children:g.jsx(Qs,{role:"menuitemradio","aria-checked":o,...n,ref:e,"data-state":Hi(o),onSelect:W(n.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,r)},{checkForDefaultPrevented:!1})})})});Kd.displayName=qd;var Ki="MenuItemIndicator",[Hd,c_]=Sr(Ki,{checked:!1}),Gd=p.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,o=c_(Ki,r);return g.jsx(Rt,{present:n||Ts(o.checked)||o.checked===!0,children:g.jsx(le.span,{...s,ref:e,"data-state":Hi(o.checked)})})});Gd.displayName=Ki;var l_="MenuSeparator",Jd=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return g.jsx(le.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});Jd.displayName=l_;var u_="MenuArrow",Yd=p.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=Ys(r);return g.jsx(zl,{...s,...n,ref:e})});Yd.displayName=u_;var d_="MenuSub",[$E,Qd]=Sr(d_),yn="MenuSubTrigger",Xd=p.forwardRef((t,e)=>{const r=Cr(yn,t.__scopeMenu),n=Wn(yn,t.__scopeMenu),s=Qd(yn,t.__scopeMenu),o=Wi(yn,t.__scopeMenu),i=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=o,u={__scopeMenu:t.__scopeMenu},l=p.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return p.useEffect(()=>l,[l]),p.useEffect(()=>{const m=a.current;return()=>{window.clearTimeout(m),c(null)}},[a,c]),g.jsx(Ui,{asChild:!0,...u,children:g.jsx(Ud,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":th(r.open),...t,ref:sr(e,s.onTriggerChange),onClick:m=>{var y;(y=t.onClick)==null||y.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:W(t.onPointerMove,jn(m=>{o.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),l()},100))})),onPointerLeave:W(t.onPointerLeave,jn(m=>{var f,b;l();const y=(f=r.content)==null?void 0:f.getBoundingClientRect();if(y){const v=(b=r.content)==null?void 0:b.dataset.side,x=v==="right",E=x?-5:5,T=y[x?"left":"right"],S=y[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+E,y:m.clientY},{x:T,y:y.top},{x:S,y:y.top},{x:S,y:y.bottom},{x:T,y:y.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:W(t.onKeyDown,m=>{var f;const y=o.searchRef.current!=="";t.disabled||y&&m.key===" "||qx[n.dir].includes(m.key)&&(r.onOpenChange(!0),(f=r.content)==null||f.focus(),m.preventDefault())})})})});Xd.displayName=yn;var Zd="MenuSubContent",eh=p.forwardRef((t,e)=>{const r=$d(et,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,o=Cr(et,t.__scopeMenu),i=Wn(et,t.__scopeMenu),a=Qd(Zd,t.__scopeMenu),c=p.useRef(null),u=fe(e,c);return g.jsx(In.Provider,{scope:t.__scopeMenu,children:g.jsx(Rt,{present:n||o.open,children:g.jsx(In.Slot,{scope:t.__scopeMenu,children:g.jsx(zi,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:l=>{var m;i.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),l.preventDefault()},onCloseAutoFocus:l=>l.preventDefault(),onFocusOutside:W(t.onFocusOutside,l=>{l.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:W(t.onEscapeKeyDown,l=>{i.onClose(),l.preventDefault()}),onKeyDown:W(t.onKeyDown,l=>{var f;const m=l.currentTarget.contains(l.target),y=Kx[i.dir].includes(l.key);m&&y&&(o.onOpenChange(!1),(f=a.trigger)==null||f.focus(),l.preventDefault())})})})})})});eh.displayName=Zd;function th(t){return t?"open":"closed"}function Ts(t){return t==="indeterminate"}function Hi(t){return Ts(t)?"indeterminate":t?"checked":"unchecked"}function h_(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function f_(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function p_(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let i=f_(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function m_(t,e){const{x:r,y:n}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const a=e[o],c=e[i],u=a.x,l=a.y,m=c.x,y=c.y;l>n!=y>n&&r<(m-u)*(n-l)/(y-l)+u&&(s=!s)}return s}function g_(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return m_(r,e)}function jn(t){return e=>e.pointerType==="mouse"?t(e):void 0}var y_=Md,v_=Ui,w_=Ld,b_=Fd,x_=qi,__=Bd,E_=Qs,S_=Vd,C_=zd,T_=Kd,R_=Gd,A_=Jd,k_=Yd,P_=Xd,O_=eh,Xs="DropdownMenu",[I_]=$t(Xs,[Nd]),Ue=Nd(),[j_,rh]=I_(Xs),nh=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:i,modal:a=!0}=t,c=Ue(e),u=p.useRef(null),[l,m]=sn({prop:s,defaultProp:o??!1,onChange:i,caller:Xs});return g.jsx(j_,{scope:e,triggerId:xr(),triggerRef:u,contentId:xr(),open:l,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(y=>!y),[m]),modal:a,children:g.jsx(y_,{...c,open:l,onOpenChange:m,dir:n,modal:a,children:r})})};nh.displayName=Xs;var sh="DropdownMenuTrigger",oh=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,o=rh(sh,r),i=Ue(r);return g.jsx(v_,{asChild:!0,...i,children:g.jsx(le.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:sr(e,o.triggerRef),onPointerDown:W(t.onPointerDown,a=>{!n&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:W(t.onKeyDown,a=>{n||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});oh.displayName=sh;var N_="DropdownMenuPortal",ih=t=>{const{__scopeDropdownMenu:e,...r}=t,n=Ue(e);return g.jsx(w_,{...n,...r})};ih.displayName=N_;var ah="DropdownMenuContent",ch=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=rh(ah,r),o=Ue(r),i=p.useRef(!1);return g.jsx(b_,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:e,onCloseAutoFocus:W(t.onCloseAutoFocus,a=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:W(t.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,l=c.button===2||u;(!s.modal||l)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ch.displayName=ah;var D_="DropdownMenuGroup",M_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(x_,{...s,...n,ref:e})});M_.displayName=D_;var $_="DropdownMenuLabel",lh=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(__,{...s,...n,ref:e})});lh.displayName=$_;var L_="DropdownMenuItem",uh=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(E_,{...s,...n,ref:e})});uh.displayName=L_;var F_="DropdownMenuCheckboxItem",dh=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(S_,{...s,...n,ref:e})});dh.displayName=F_;var B_="DropdownMenuRadioGroup",U_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(C_,{...s,...n,ref:e})});U_.displayName=B_;var V_="DropdownMenuRadioItem",hh=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(T_,{...s,...n,ref:e})});hh.displayName=V_;var W_="DropdownMenuItemIndicator",fh=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(R_,{...s,...n,ref:e})});fh.displayName=W_;var z_="DropdownMenuSeparator",ph=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(A_,{...s,...n,ref:e})});ph.displayName=z_;var q_="DropdownMenuArrow",K_=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(k_,{...s,...n,ref:e})});K_.displayName=q_;var H_="DropdownMenuSubTrigger",mh=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(P_,{...s,...n,ref:e})});mh.displayName=H_;var G_="DropdownMenuSubContent",gh=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=Ue(r);return g.jsx(O_,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gh.displayName=G_;var J_=nh,Y_=oh,Q_=ih,yh=ch,vh=lh,wh=uh,bh=dh,xh=hh,_h=fh,Eh=ph,Sh=mh,Ch=gh;const xc=J_,_c=Y_,X_=p.forwardRef(({className:t,inset:e,children:r,...n},s)=>g.jsxs(Sh,{ref:s,className:be("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...n,children:[r,g.jsx(Jf,{className:"ml-auto h-4 w-4"})]}));X_.displayName=Sh.displayName;const Z_=p.forwardRef(({className:t,...e},r)=>g.jsx(Ch,{ref:r,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Z_.displayName=Ch.displayName;const ci=p.forwardRef(({className:t,sideOffset:e=4,...r},n)=>g.jsx(Q_,{children:g.jsx(yh,{ref:n,sideOffset:e,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));ci.displayName=yh.displayName;const Ne=p.forwardRef(({className:t,inset:e,...r},n)=>g.jsx(wh,{ref:n,className:be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));Ne.displayName=wh.displayName;const eE=p.forwardRef(({className:t,children:e,checked:r,...n},s)=>g.jsxs(bh,{ref:s,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(_h,{children:g.jsx(Hf,{className:"h-4 w-4"})})}),e]}));eE.displayName=bh.displayName;const tE=p.forwardRef(({className:t,children:e,...r},n)=>g.jsxs(xh,{ref:n,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(_h,{children:g.jsx(Yf,{className:"h-2 w-2 fill-current"})})}),e]}));tE.displayName=xh.displayName;const rE=p.forwardRef(({className:t,inset:e,...r},n)=>g.jsx(vh,{ref:n,className:be("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));rE.displayName=vh.displayName;const dr=p.forwardRef(({className:t,...e},r)=>g.jsx(Eh,{ref:r,className:be("-mx-1 my-1 h-px bg-muted",t),...e}));dr.displayName=Eh.displayName;const nE=()=>{const t=di(),{signOut:e}=dn(),[r,n]=p.useState(!1),{setTheme:s,theme:o}=vl(),i=l=>t.pathname===l,a=l=>l.some(m=>t.pathname===m),c=({path:l,icon:m,label:y})=>g.jsx(Ze,{asChild:!0,variant:i(l)?"default":"ghost",size:"sm",className:"flex items-center gap-2 whitespace-nowrap",children:g.jsxs(Le,{to:l,children:[g.jsx(m,{className:"h-4 w-4"}),g.jsx("span",{className:"hidden sm:inline",children:y})]})}),u=({label:l,icon:m,items:y})=>{const f=a(y.map(b=>b.path));return g.jsxs(xc,{children:[g.jsx(_c,{asChild:!0,children:g.jsxs(Ze,{variant:f?"default":"ghost",size:"sm",className:"flex items-center gap-1 whitespace-nowrap",children:[g.jsx(m,{className:"h-4 w-4"}),g.jsx("span",{className:"hidden sm:inline",children:l}),g.jsx(Gf,{className:"h-3 w-3"})]})}),g.jsx(ci,{align:"start",className:"w-56 bg-background border shadow-lg",children:y.map(b=>{const v=b.icon;return g.jsx(Ne,{asChild:!0,className:"cursor-pointer flex items-center gap-2",children:g.jsxs(Le,{to:b.path,children:[g.jsx(v,{className:"h-4 w-4"}),g.jsx("span",{children:b.label}),i(b.path)&&g.jsx("span",{className:"ml-auto text-primary",children:""})]})},b.path)})})]})};return g.jsxs(g.Fragment,{children:[g.jsxs("nav",{className:"hidden md:flex items-center gap-1 flex-wrap flex-1",children:[g.jsx(u,{label:"Support Levels",icon:io,items:[{path:"/consecutive-breaks",label:"Support Level Analysis",icon:io}]}),g.jsx(u,{label:"Historical Performance and Volatility",icon:oo,items:[{path:"/monthly-analysis",label:"Monthly Analysis",icon:oo},{path:"/volatility-analysis",label:"Financial Reporting Volatility",icon:ia},{path:"/iv-analysis",label:"Implied Volatility History",icon:pa}]}),g.jsx(u,{label:"Method Validation",icon:ao,items:[{path:"/probability-analysis",label:"Probability Analysis",icon:ao},{path:"/lower-bound-analysis",label:"Lower Bound Analysis",icon:aa}]}),g.jsx("div",{className:"flex-1"}),g.jsx(c,{path:"/stock-analysis",icon:la,label:"Stock Metrics and History"}),g.jsx(u,{label:"Automated Analysis",icon:Zf,items:[{path:"/recommendations",label:"Automated Put Option Recommendations",icon:ha},{path:"/scored-options",label:"Scored Options",icon:Gn},{path:"/portfolio-generator",label:"Automatic Portfolio Generator",icon:ca},{path:"/support-level-options",label:"Support Level Options List",icon:Gn}]})]}),g.jsx("div",{className:"md:hidden",children:g.jsxs(xc,{children:[g.jsx(_c,{asChild:!0,children:g.jsxs(Ze,{variant:"outline",size:"icon",className:"h-9 w-9",children:[g.jsx(Xf,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Open menu"})]})}),g.jsxs(ci,{align:"start",className:"w-56 bg-background border shadow-lg z-50",children:[g.jsx(Ne,{asChild:!0,className:"cursor-pointer",children:g.jsxs(Le,{to:"/stock-analysis",children:[g.jsx(la,{className:"mr-2 h-4 w-4"}),"Stock Metrics and History"]})}),g.jsx(dr,{}),g.jsx("div",{className:"px-2 py-1.5 text-sm font-medium text-muted-foreground",children:"Support Levels"}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/consecutive-breaks",children:[g.jsx(io,{className:"mr-2 h-4 w-4"}),"Support Level Analysis"]})}),g.jsx(dr,{}),g.jsx("div",{className:"px-2 py-1.5 text-sm font-medium text-muted-foreground",children:"Automated Analysis"}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/recommendations",children:[g.jsx(ha,{className:"mr-2 h-4 w-4"}),"Automated Put Option Recommendations"]})}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/scored-options",children:[g.jsx(Gn,{className:"mr-2 h-4 w-4"}),"Scored Options"]})}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/portfolio-generator",children:[g.jsx(ca,{className:"mr-2 h-4 w-4"}),"Automatic Portfolio Generator"]})}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/support-level-options",children:[g.jsx(Gn,{className:"mr-2 h-4 w-4"}),"Support Level Options List"]})}),g.jsx(dr,{}),g.jsx("div",{className:"px-2 py-1.5 text-sm font-medium text-muted-foreground",children:"Historical Performance and Volatility"}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/monthly-analysis",children:[g.jsx(oo,{className:"mr-2 h-4 w-4"}),"Monthly Analysis"]})}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/volatility-analysis",children:[g.jsx(ia,{className:"mr-2 h-4 w-4"}),"Financial Reporting Volatility"]})}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/iv-analysis",children:[g.jsx(pa,{className:"mr-2 h-4 w-4"}),"Implied Volatility History"]})}),g.jsx(dr,{}),g.jsx("div",{className:"px-2 py-1.5 text-sm font-medium text-muted-foreground",children:"Method Validation"}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/probability-analysis",children:[g.jsx(ao,{className:"mr-2 h-4 w-4"}),"Probability Analysis"]})}),g.jsx(Ne,{asChild:!0,className:"cursor-pointer ml-2",children:g.jsxs(Le,{to:"/lower-bound-analysis",children:[g.jsx(aa,{className:"mr-2 h-4 w-4"}),"Lower Bound Analysis"]})}),g.jsx(dr,{}),g.jsxs(Ne,{onClick:()=>n(!0),className:"cursor-pointer",children:[g.jsx(jo,{className:"mr-2 h-4 w-4"}),"Settings"]}),g.jsxs(Ne,{onClick:()=>s(o==="light"?"dark":"light"),className:"cursor-pointer",children:[o==="light"?g.jsx(da,{className:"mr-2 h-4 w-4"}):g.jsx(fa,{className:"mr-2 h-4 w-4"}),"Toggle Theme"]}),g.jsx(dr,{}),g.jsxs(Ne,{onClick:e,className:"cursor-pointer text-destructive focus:text-destructive",children:[g.jsx(ua,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})}),g.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[g.jsxs(Ze,{onClick:()=>n(!0),variant:"ghost",size:"sm",className:"flex items-center gap-2",title:"Calculation Settings",children:[g.jsx(jo,{className:"h-4 w-4"}),g.jsx("span",{className:"hidden lg:inline text-sm",children:"Calculation Settings"})]}),g.jsx(Ze,{onClick:()=>s(o==="light"?"dark":"light"),variant:"ghost",size:"icon",className:"h-9 w-9",title:o==="light"?"Switch to dark mode":"Switch to light mode",children:o==="light"?g.jsx(da,{className:"h-4 w-4"}):g.jsx(fa,{className:"h-4 w-4"})}),g.jsx(Ze,{onClick:e,variant:"ghost",size:"icon",className:"h-9 w-9 text-destructive hover:text-destructive",title:"Sign out",children:g.jsx(ua,{className:"h-4 w-4"})})]}),g.jsx(Sx,{isOpen:r,onOpenChange:n,triggerButton:!1})]})},sE=({children:t})=>{const e=di(),{trackPageView:r}=Ru(),{user:n}=dn();return p.useEffect(()=>{n&&r(e.pathname,document.title,{referrer:document.referrer,search_params:Object.fromEntries(new URLSearchParams(e.search))})},[e,n,r]),g.jsx(g.Fragment,{children:t})},oE=$.lazy(()=>Me(()=>import("./Index-EigZSzJQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))),iE=$.lazy(()=>Me(()=>import("./PortfolioGenerator-BXjiPiQq.js"),__vite__mapDeps([22,1,2,4,5,6,7,8,9,10,23,24,13,25,11,16,17,12,18,26,15]))),aE=$.lazy(()=>Me(()=>import("./MonthlyAnalysis-BtTiyHDk.js"),__vite__mapDeps([27,1,2,13,28,29,6,30,17,18,7,4,12,31,15,32,26])).then(t=>({default:t.MonthlyAnalysis}))),cE=$.lazy(()=>Me(()=>import("./VolatilityAnalysis-Bi3hsV1y.js"),__vite__mapDeps([33,1,2,13,29,34,17,14,15,4,28,5,12,26,21,32])).then(t=>({default:t.VolatilityAnalysis}))),lE=$.lazy(()=>Me(()=>import("./ConsecutiveBreaksAnalysis-B3MDMSfi.js"),__vite__mapDeps([35,1,2,36,15,10,18,17,34,13,28,4]))),uE=$.lazy(()=>Me(()=>import("./SupportBasedOptionFinder-a-d38qxj.js"),__vite__mapDeps([37,1,2,16,17,38,13,28,4,5,31,11,15]))),dE=$.lazy(()=>Me(()=>import("./OptionDetailsPage-D-NgWXHi.js"),__vite__mapDeps([39,1,16,17,2,13,7,6,40,15,11,26]))),Ec=$.lazy(()=>Me(()=>import("./StockDetailsPage-NF0GMhgL.js"),__vite__mapDeps([41,1,18,17,2,3,34,13,21,15,19,7,32,12,28,42,26]))),hE=$.lazy(()=>Me(()=>import("./ProbabilityAnalysis-CXms0b44.js"),__vite__mapDeps([43,1,3,44,17,13,28,15,36,10,12,23,42,11])).then(t=>({default:t.ProbabilityAnalysis}))),fE=$.lazy(()=>Me(()=>import("./LowerBoundAnalysis-EB46Khw0.js"),__vite__mapDeps([45,1,17,15,36,10,18,34,4,12,31,28,13,46,14,47,11])).then(t=>({default:t.LowerBoundAnalysis}))),pE=$.lazy(()=>Me(()=>import("./AutomatedRecommendations-CR1fs08I.js"),__vite__mapDeps([48,1,2,16,17,38,40,44,30,18,13,9,10,28,4,5,46,49,11,31,20,21,15]))),mE=$.lazy(()=>Me(()=>import("./ScoredOptions-DF5yvmrM.js"),__vite__mapDeps([50,1,2,24,13,23,25,11,16,17,9,10,28,20,4,5,49,31,15])).then(t=>({default:t.ScoredOptions}))),gE=$.lazy(()=>Me(()=>import("./IVAnalysis-BETgIpkd.js"),__vite__mapDeps([51,1,2,17,13,23,25,11,29,15,47])).then(t=>({default:t.IVAnalysis}))),yE=$.lazy(()=>Me(()=>import("./NotFound-p0LA7tVi.js"),__vite__mapDeps([52,1,2,15]))),vE=$.lazy(()=>Me(()=>import("./Auth-BeE66ycK.js"),__vite__mapDeps([53,1,2,13,14,15]))),wE=$.lazy(()=>Me(()=>import("./AuthCallback-Kfgb6wX9.js"),__vite__mapDeps([54,1,2,15]))),bE=()=>g.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:g.jsxs("div",{className:"flex flex-col items-center gap-3",children:[g.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}),xE=new Iy,_E=()=>{const{session:t}=dn();return g.jsxs("header",{className:"w-full border-b",children:[g.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:z-50 focus:top-2 focus:left-2 focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-md focus:text-sm focus:font-medium",children:"Skip to main content"}),g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 gap-4",children:[g.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:t&&g.jsxs(g.Fragment,{children:[g.jsx(Ze,{asChild:!0,variant:"ghost",size:"icon",title:"Go to home page",children:g.jsx(Le,{to:"/",children:g.jsx(Qf,{className:"h-5 w-5"})})}),g.jsx("div",{className:"h-6 w-px bg-border hidden md:block"}),g.jsx(nE,{})]})}),g.jsx("div",{children:!t&&g.jsx(Ze,{asChild:!0,children:g.jsx(Le,{to:"/auth",children:"Sign in"})})})]})]})},EE=()=>{const e=window.location.hostname==="datamilo.github.io"?"/put-options-se":"";return g.jsx(jy,{client:xE,children:g.jsx(Lp,{attribute:"class",defaultTheme:"light",storageKey:"vite-ui-theme",children:g.jsx(Sb,{children:g.jsx(Rb,{children:g.jsx(sy,{children:g.jsxs($b,{children:[g.jsx(Dp,{}),g.jsx(gm,{}),g.jsx(Ph,{basename:e,children:g.jsxs(sE,{children:[g.jsx(_E,{}),g.jsx("main",{id:"main-content",children:g.jsx(p.Suspense,{fallback:g.jsx(bE,{}),children:g.jsxs(Oh,{children:[g.jsx(ke,{path:"/auth",element:g.jsx(vE,{})}),g.jsx(ke,{path:"/auth/callback",element:g.jsx(wE,{})}),g.jsx(ke,{path:"/",element:g.jsx(Ve,{children:g.jsx(oE,{})})}),g.jsx(ke,{path:"/portfolio-generator",element:g.jsx(Ve,{children:g.jsx(iE,{})})}),g.jsx(ke,{path:"/monthly-analysis",element:g.jsx(Ve,{children:g.jsx(aE,{})})}),g.jsx(ke,{path:"/volatility-analysis",element:g.jsx(Ve,{children:g.jsx(cE,{})})}),g.jsx(ke,{path:"/iv-analysis",element:g.jsx(Ve,{children:g.jsx(gE,{})})}),g.jsx(ke,{path:"/consecutive-breaks",element:g.jsx(Ve,{children:g.jsx(lE,{})})}),g.jsx(ke,{path:"/support-level-options",element:g.jsx(Ve,{children:g.jsx(uE,{})})}),g.jsx(ke,{path:"/option/:optionId",element:g.jsx(Ve,{children:g.jsx(dE,{})})}),g.jsx(ke,{path:"/stock/:stockName",element:g.jsx(Ve,{children:g.jsx(Ec,{})})}),g.jsx(ke,{path:"/stock-analysis",element:g.jsx(Ve,{children:g.jsx(Ec,{})})}),g.jsx(ke,{path:"/probability-analysis",element:g.jsx(Ve,{children:g.jsx(hE,{})})}),g.jsx(ke,{path:"/lower-bound-analysis",element:g.jsx(Ve,{children:g.jsx(fE,{})})}),g.jsx(ke,{path:"/recommendations",element:g.jsx(Ve,{children:g.jsx(pE,{})})}),g.jsx(ke,{path:"/scored-options",element:g.jsx(Ve,{children:g.jsx(mE,{})})}),g.jsx(ke,{path:"*",element:g.jsx(yE,{})})]})})})]})})]})})})})})})};try{const t=document.getElementById("root");if(!t)throw new Error("Root element not found in DOM");$c(t).render(g.jsx(EE,{}))}catch(t){const e=t instanceof Error?t.message:String(t);document.body.innerHTML=`
    <div style="padding: 20px; font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; background: #f5f5f5; border-radius: 8px;">
      <h1 style="color: #d32f2f;">Application Error</h1>
      <p>Failed to load the Put Options SE application.</p>
      <details style="margin: 20px 0; padding: 10px; background: white; border-radius: 4px;">
        <summary style="cursor: pointer; font-weight: bold;">Error Details</summary>
        <pre style="margin-top: 10px; font-size: 12px; overflow: auto;">${e}</pre>
      </details>
      <div style="margin-top: 20px;">
        <button onclick="window.location.reload()" style="padding: 10px 20px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer;">
          Reload Page
        </button>
      </div>
      <p style="margin-top: 20px; font-size: 12px; color: #666;">
        Base URL: /put-options-se<br>
        Mode: production<br>
        Location: ${window.location.href}
      </p>
    </div>
  `}export{Pb as $,Mx as A,Ze as B,Gf as C,Y0 as D,Ad as E,Fi as F,$t as G,gi as H,ri as I,be as J,pa as K,fs as L,oo as M,io as N,Tu as O,le as P,RE as Q,Dx as R,jo as S,sy as T,Gn as U,ia as V,Rt as W,fe as X,ox as Y,Ol as Z,la as _,Q0 as a,Us as a0,by as a1,hy as a2,IE as a3,Vo as a4,lt as a5,Vs as a6,uy as a7,dy as a8,Uo as a9,$n as aA,Wl as aB,zl as aC,K0 as aD,G0 as aE,ed as aF,td as aG,tu as aa,Ty as ab,my as ac,Fe as ad,jE as ae,NE as af,Ha as ag,ha as ah,xr as ai,Nt as aj,qh as ak,dr as al,eE as am,Ge as an,ud as ao,sr as ap,Ul as aq,$s as ar,ks as as,Ef as at,Vl as au,Ps as av,$u as aw,ku as ax,Di as ay,Ni as az,od as b,Ee as c,id as d,ad as e,PE as f,OE as g,oy as h,AE as i,g as j,dn as k,xc as l,_c as m,ci as n,Ne as o,Ru as p,ct as q,Jf as r,Be as s,Tb as t,Cb as u,Td as v,zh as w,Hf as x,sn as y,W as z};
