import{r as u}from"./router-C0wDHNfv.js";import{c as x,j as t,J as h,B as j}from"./index-Bzb4F3kx.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=x("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=x("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),v=()=>{const[e,a]=u.useState(null),[i,r]=u.useState(!0);return u.useEffect(()=>{(async()=>{try{const s=Date.now(),l=[`https://raw.githubusercontent.com/datamilo/put-options-se/main/data/last_updated.json?cb=${s}`,`${window.location.origin}/put-options-sedata/last_updated.json?cb=${s}`];let c=null,n=null;for(const p of l)try{if(n=await fetch(p,{method:"GET",cache:"no-cache"}),n.ok)break}catch(g){c=g}if(!n||!n.ok)throw c||new Error("Failed to load timestamps from any URL");const d=await n.text(),m=JSON.parse(d);a(m)}catch(s){console.error("Error loading timestamps:",s),a(null)}finally{r(!1)}})()},[]),{timestamps:e,isLoading:i}},w=e=>{if(e instanceof Date)return e;const a=typeof e=="string"?e.replace(" ","T"):e;return new Date(a)};function S({timestamp:e,label:a="Last updated",showRefresh:i=!1,onRefresh:r,className:o}){if(!e)return t.jsxs("div",{className:h("flex items-center gap-2 text-sm text-muted-foreground",o),children:[t.jsx(f,{className:"h-4 w-4"}),t.jsxs("span",{children:[a,": ",t.jsx("span",{className:"font-medium",children:"Loading..."})]})]});const s=w(e);if(isNaN(s.getTime()))return console.warn("Invalid timestamp format:",e),t.jsxs("div",{className:h("flex items-center gap-2 text-sm text-muted-foreground",o),children:[t.jsx(f,{className:"h-4 w-4"}),t.jsxs("span",{children:[a,": ",t.jsx("span",{className:"font-medium",children:"Invalid date"})]})]});const l=s.getFullYear(),c=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0"),d=String(s.getHours()).padStart(2,"0"),m=String(s.getMinutes()).padStart(2,"0"),p=`${l}-${c}-${n} ${d}:${m}`;return t.jsxs("div",{className:h("flex items-center gap-2 text-sm text-muted-foreground",o),children:[t.jsx(f,{className:"h-4 w-4"}),t.jsxs("span",{children:[a,": ",t.jsx("span",{className:"font-medium",children:p})]}),i&&r&&t.jsxs(j,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:r,title:"Refresh data",children:[t.jsx(y,{className:"h-3 w-3"}),t.jsx("span",{className:"sr-only",children:"Refresh data"})]})]})}export{S as D,v as u};
